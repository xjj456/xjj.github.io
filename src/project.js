window.__require=function e(a,t,i){function n(s,r){if(!t[s]){if(!a[s]){var c=s.split("/");if(c=c[c.length-1],!a[c]){var p="function"==typeof __require&&__require;if(!r&&p)return p(c,!0);if(o)return o(c,!0);throw new Error("Cannot find module '"+s+"'")}s=c}var l=t[s]={exports:{}};a[s][0].call(l.exports,function(e){return n(a[s][1][e]||e)},l,l.exports,e,a,t,i)}return t[s].exports}for(var o="function"==typeof __require&&__require,s=0;s<i.length;s++)n(i[s]);return n}({ActivityPopup:[function(e,a,t){"use strict";cc._RF.push(a,"333caQGbP1Ar6WkFo6uBN3w","ActivityPopup"),cc.Class({extends:cc.Component,properties:{page1:cc.Node,page2:cc.Node,btn1:cc.Node,btn2:cc.Node,activeProgress:cc.ProgressBar,progressBtnGroup:cc.Node,activeUI:cc.Label,curPageIndex:0,onLineTaskNum:[],activityTaskNum:[],activityCoinNum:[]},onLoad:function(){var e=GameApp.dataManager.globalData.onLineGiftCurNum;this.onLineTaskNum=[e-10,e-5,e],this.activityTaskNum=GameApp.dataManager.globalData.activityCurNum.concat(),this.activityCoinNum=GameApp.dataManager.globalData.activityCurCoin.concat(),this.btn1Click()},btn1Click:function(e){1==this.curPageIndex&&e||(this.curPageIndex=1,e&&GameApp.audioManager.playEffect("click"),this.btn1.children[0].active=!1,this.btn1.children[1].active=!0,this.btn2.children[0].active=!0,this.btn2.children[1].active=!1,this.page2.active=!1,this.showPage1())},btn2Click:function(e){2==this.curPageIndex&&e||(this.curPageIndex=2,e&&GameApp.audioManager.playEffect("click"),this.btn1.children[0].active=!0,this.btn1.children[1].active=!1,this.btn2.children[0].active=!1,this.btn2.children[1].active=!0,this.page1.active=!1,this.showPage2())},updateOnlineTask:function(){var e=!0;for(var a in this.page1.children)if(2!=GameApp.dataManager.getOnLineGiftsState(a)){e=!1;break}if(e){GameApp.dataManager.globalData.onLineGiftCurNum+=15,cc.sys.localStorage.setItem("EatChicken_onLineGiftCurNum",GameApp.dataManager.globalData.onLineGiftCurNum);var t=GameApp.dataManager.globalData.onLineGiftCurNum;this.onLineTaskNum=[t-10,t-5,t],GameApp.dataManager.setOnLineGiftsState(0,TaskState.Unfinish),GameApp.dataManager.setOnLineGiftsState(1,TaskState.Unfinish),GameApp.dataManager.setOnLineGiftsState(2,TaskState.Unfinish)}this.updateOnLineTaskShow()},updateOnLineTaskShow:function(){for(var e in this.page1.children)this.page1.children[e].children[0].children[0].getComponent(cc.Label).string="\u7d2f\u8ba1\u6e38\u620f\u5728\u7ebf"+this.onLineTaskNum[e]+"\u5206\u949f",this.page1.children[e].children[0].children[1].children[0].getComponent(cc.Label).string=this.onLineTaskNum[e];this.updateOnlineTaskBtnShow()},updateOnlineTaskBtnShow:function(){var e=GameApp.dataManager.getOnlineTimeMinute();for(var a in this.page1.children)switch(GameApp.dataManager.getOnLineGiftsState(a)){case 0:e>=this.onLineTaskNum[a]?(GameApp.dataManager.setOnLineGiftsState(a,TaskState.Canget),this.page1.children[a].children[1].children[0].active=!1,this.page1.children[a].children[1].children[1].active=!0,this.page1.children[a].children[1].children[2].active=!1):(this.page1.children[a].children[1].children[0].active=!0,this.page1.children[a].children[1].children[1].active=!1,this.page1.children[a].children[1].children[2].active=!1);break;case 1:this.page1.children[a].children[1].children[0].active=!1,this.page1.children[a].children[1].children[1].active=!0,this.page1.children[a].children[1].children[2].active=!1;break;case 2:this.page1.children[a].children[1].children[0].active=!1,this.page1.children[a].children[1].children[1].active=!1,this.page1.children[a].children[1].children[2].active=!0}},updateActivityTask:function(){for(var e in this.activityTaskNum)2==GameApp.dataManager.getActivityGiftsState(e)&&(GameApp.dataManager.globalData.activityCurNum[e]+=GameApp.dataManager.globalData.activityAddNum[e],cc.sys.localStorage.setItem("EatChicken_activityCurNum",JSON.stringify(GameApp.dataManager.globalData.activityCurNum)),GameApp.dataManager.globalData.activityCurCoin[e]+=GameApp.dataManager.globalData.activityAddCoin[e],cc.sys.localStorage.setItem("EatChicken_activityCurCoin",JSON.stringify(GameApp.dataManager.globalData.activityCurCoin)),GameApp.dataManager.setActivityGiftsState(e,TaskState.Unfinish));this.activityTaskNum=GameApp.dataManager.globalData.activityCurNum.concat(),this.activityCoinNum=GameApp.dataManager.globalData.activityCurCoin.concat(),this.updateActivityTaskShow()},updateActivityTaskShow:function(){var e=["\u7d2f\u8ba1\u4f7f\u7528\u624b\u67aa\u51fb\u6740"+this.activityTaskNum[0]+"\u4eba","\u7d2f\u8ba1\u51fb\u6740"+this.activityTaskNum[1]+"\u4eba","\u7d2f\u8ba1\u5403\u9e21"+this.activityTaskNum[2]+"\u5c40"];for(var a in this.activityTaskNum)this.page2.children[a].children[0].children[0].getComponent(cc.Label).string=e[a],this.page2.children[a].children[0].children[1].children[0].getComponent(cc.Label).string=this.activityCoinNum[a];this.updateActivityTaskBtnShow()},updateActivityTaskBtnShow:function(){for(var e in this.activityTaskNum)switch(GameApp.dataManager.getActivityGiftsState(e)){case 0:GameApp.dataManager.globalData.activityNum[e]>=this.activityTaskNum[e]?(GameApp.dataManager.setActivityGiftsState(e,TaskState.Canget),this.page2.children[e].children[1].children[0].active=!1,this.page2.children[e].children[1].children[1].active=!0,this.page2.children[e].children[1].children[2].active=!1):(this.page2.children[e].children[1].children[0].active=!0,this.page2.children[e].children[1].children[1].active=!1,this.page2.children[e].children[1].children[2].active=!1);break;case 1:this.page2.children[e].children[1].children[0].active=!1,this.page2.children[e].children[1].children[1].active=!0,this.page2.children[e].children[1].children[2].active=!1;break;case 2:this.page2.children[e].children[1].children[0].active=!1,this.page2.children[e].children[1].children[1].active=!1,this.page2.children[e].children[1].children[2].active=!0}},showPage1:function(){this.updateOnlineTask(),this.page1.active=!0},showPage2:function(){this.updateActivityTask(),this.updateProgressShow(),this.updateProgressBtnShow(),this.page2.active=!0},onLineTaskBtnClick:function(e,a){var t=parseInt(a);1==GameApp.dataManager.getOnLineGiftsState(t-1)&&(GameApp.dataManager.setOnLineGiftsState(t-1,TaskState.Got),GameApp.dataManager.addCoin(this.onLineTaskNum[t-1]),GameApp.uiManager.showToast("\u83b7\u5f97\u91d1\u5e01*"+this.onLineTaskNum[t-1]),this.updateOnlineTaskBtnShow())},activityTaskBtnClick:function(e,a){var t=parseInt(a);1==GameApp.dataManager.getActivityGiftsState(t-1)&&(GameApp.dataManager.setActivityGiftsState(t-1,TaskState.Got),GameApp.dataManager.addCoin(this.activityCoinNum[t-1]),GameApp.dataManager.addActiveValue(20),this.updateProgressShow(),GameApp.uiManager.showToast("\u83b7\u5f97\u91d1\u5e01*"+this.activityCoinNum[t-1]),this.updateActivityTaskBtnShow())},updateProgressShow:function(){this.activeProgress.progress=GameApp.dataManager.globalData.activeValue/120,this.activeUI.string=GameApp.dataManager.globalData.activeValue},progressBtnClick:function(e,a){var t=parseInt(a);if(1==GameApp.dataManager.globalData.progressGifts[t-1]){GameApp.audioManager.playEffect("click");var i=[100,200,300,400];GameApp.dataManager.addCoin(i[t-1]),GameApp.uiManager.showToast("\u83b7\u5f97\u91d1\u5e01*"+i[t-1]),GameApp.dataManager.setProgressGifts(t-1,2),this.updateProgressBtnShow()}},updateProgressBtnShow:function(){var e=[30,60,90,120];for(var a in e)0==GameApp.dataManager.globalData.progressGifts[a]&&GameApp.dataManager.globalData.activeValue>=e[a]&&GameApp.dataManager.setProgressGifts(a,1);for(var a in this.progressBtnGroup.children)2==GameApp.dataManager.globalData.progressGifts[a]?(this.progressBtnGroup.children[a].children[0].active=!1,this.progressBtnGroup.children[a].children[1].active=!0):(this.progressBtnGroup.children[a].children[0].active=!0,this.progressBtnGroup.children[a].children[1].active=!1)},closeBtnClick:function(){GameApp.audioManager.playEffect("click"),GameApp.eventManager.emit(EventNames.EVENT_SHOW_ACTIVITYBTN),this.node.destroy()}}),cc._RF.pop()},{}],AudioManager:[function(e,a,t){"use strict";cc._RF.push(a,"317f3yV6L9IGI9wd41WD/xL","AudioManager"),cc.Class({name:"AudioManager",properties:{_musicOn:!0,_musicAudioID:null,_musicName:"",_effectOn:!0,_effectAudioID:null,_Audios:{default:{}}},ctor:function(){cc.game.on(cc.game.EVENT_HIDE,function(){console.log("cc.audioEngine.pauseAll"),cc.audioEngine.pauseAll()}),cc.game.on(cc.game.EVENT_SHOW,function(){console.log("cc.audioEngine.resumeAll"),cc.audioEngine.resumeAll()});var e=cc.sys.localStorage.getItem("EatChicken_Sound");null!=e&&""!=e&&void 0!=e&&(e="true"==e,this._effectOn=e)},getMusicName:function(e){return cc.AudioClip.raw("resources/audio/music/"+e+".mp3")},getEffectName:function(e){return cc.AudioClip.raw("resources/audio/effect/"+e+".mp3")},playMusic:function(e,a){var t=this;""===e||this._musicName===e&&!a||(this._musicName=e,this._musicOn&&(cc.audioEngine.stopMusic(this._musicAudioID),cc.loader.loadRes("audio/music/"+e+".mp3",cc.AudioClip,function(e,a){t._musicAudioID=cc.audioEngine.playMusic(a,!0,!0)})))},setMusic:function(e){this._musicOn=e,cc.sys.localStorage.setItem("MUSIC_ON",""+e),e?this.playMusic(this._musicName,!0):cc.audioEngine.stop(this._musicAudioID)},playEffect:function(e,a,t){var i=this;this._effectOn&&(1==t&&cc.audioEngine.stop(this._effectAudioID),cc.loader.loadRes("audio/effect/"+e,cc.AudioClip,function(e,n){var o=cc.audioEngine.play(n,2==t,a||1);2==t&&(i._effectAudioID=o)}))},setEffect:function(e){this._effectOn=e,cc.sys.localStorage.setItem("EatChicken_Sound",""+e),e||cc.audioEngine.stop(this._effectAudioID)}}),cc._RF.pop()},{}],BoxUI:[function(e,a,t){"use strict";cc._RF.push(a,"c5af8P64uBNMYGlZief5kOA","BoxUI");var i=e("Utils");cc.Class({extends:cc.Component,properties:{coinUI:cc.Label,needCoinUI:cc.Label,box1CoinRewardUI:cc.Label,box2CoinRewardUI:cc.Label,onceClick:{default:!0,visible:!1}},onLoad:function(){GameApp.eventManager.on(EventNames.EVENT_UPDATE_COIN_SHOW,this.updateUIShow.bind(this)),this.updateUIShow()},onDestroy:function(){GameApp.eventManager.removeListener(EventNames.EVENT_UPDATE_COIN_SHOW)},updateUIShow:function(){this.coinUI.string=GameApp.dataManager.userData.coinNum,this.needCoinUI.string=GameApp.dataManager.userData.box1NeedCoinNum,this.box1CoinRewardUI.string=GameApp.dataManager.userData.box1RewardCoinNum[0]+"~"+GameApp.dataManager.userData.box1RewardCoinNum[1],this.box2CoinRewardUI.string=GameApp.dataManager.userData.box2RewardCoinNum[0]+"~"+GameApp.dataManager.userData.box2RewardCoinNum[1]},oneBtnClick:function(){var e=this;this.onceClick&&(this.onceClick=!1,GameApp.audioManager.playEffect("click"),GameApp.dataManager.reduceCoin(GameApp.dataManager.userData.box1NeedCoinNum)?GameApp.uiManager.showPopup("OpenBoxPopup",function(a){var t=Tools.randomNum(GameApp.dataManager.userData.box1RewardCoinNum[0],GameApp.dataManager.userData.box1RewardCoinNum[1]);GameApp.dataManager.addCoin(t),a.getComponent("OpenBoxPopup").init(GameApp.uiManager.boxSkinDataGroup[0],1,t),GameApp.dataManager.userData.box1NeedCoinNum<6400&&(GameApp.dataManager.userData.box1NeedCoinNum*=2,GameApp.dataManager.userData.box1RewardCoinNum[0]=GameApp.dataManager.userData.box1NeedCoinNum/2,GameApp.dataManager.userData.box1RewardCoinNum[1]=1.5*GameApp.dataManager.userData.box1NeedCoinNum),e.updateUIShow(),e.onceClick=!0}):(this.onceClick=!0,GameApp.uiManager.showToast("\u91d1\u5e01\u4e0d\u8db3!")))},twoBtnClick:function(){if(window.wx)GameApp.uiManager.showToast("\u6682\u672a\u5f00\u653e\uff01");else if(this.onceClick){this.onceClick=!1,GameApp.audioManager.playEffect("click");var e=this;window.tt?i.addVideo("addVideo",function(){e.onceClick=!0,GameApp.dataManager.addPlayedVideoNum(),GameApp.uiManager.showPopup("OpenBoxPopup",function(a){var t=Tools.randomNum(GameApp.dataManager.userData.box2RewardCoinNum[0],GameApp.dataManager.userData.box2RewardCoinNum[1]);GameApp.dataManager.addCoin(t),a.getComponent("OpenBoxPopup").init(GameApp.uiManager.boxSkinDataGroup[1],1,t),GameApp.dataManager.userData.box2RewardCoinNum[0]<1400&&(GameApp.dataManager.userData.box2RewardCoinNum[0]=Math.floor(1.5*GameApp.dataManager.userData.box2RewardCoinNum[0]),GameApp.dataManager.userData.box2RewardCoinNum[1]=Math.floor(1.5*GameApp.dataManager.userData.box2RewardCoinNum[1])),e.updateUIShow(),e.onceClick=!0})},function(a){e.onceClick=!0,a?GameApp.uiManager.showToast(a):GameApp.uiManager.showToast("\u672a\u770b\u5b8c\u89c6\u9891\uff01")}):(e.onceClick=!0,GameApp.dataManager.addPlayedVideoNum(),GameApp.uiManager.showPopup("OpenBoxPopup",function(a){var t=Tools.randomNum(GameApp.dataManager.userData.box2RewardCoinNum[0],GameApp.dataManager.userData.box2RewardCoinNum[1]);GameApp.dataManager.addCoin(t),a.getComponent("OpenBoxPopup").init(GameApp.uiManager.boxSkinDataGroup[1],1,t),GameApp.dataManager.userData.box2RewardCoinNum[0]<1400&&(GameApp.dataManager.userData.box2RewardCoinNum[0]=Math.floor(1.5*GameApp.dataManager.userData.box2RewardCoinNum[0]),GameApp.dataManager.userData.box2RewardCoinNum[1]=Math.floor(1.5*GameApp.dataManager.userData.box2RewardCoinNum[1])),e.updateUIShow(),e.onceClick=!0}))}},threeBtnClick:function(){if(window.wx)GameApp.uiManager.showToast("\u6682\u672a\u5f00\u653e\uff01");else if(this.onceClick){this.onceClick=!1,GameApp.audioManager.playEffect("click");var e=this;if(window.tt)i.addVideo("addVideo",function(){e.onceClick=!0,GameApp.dataManager.addPlayedVideoNum();var a=Tools.randomNum(26,30);GameApp.dataManager.addPieceNum(a,5),GameApp.uiManager.showPopup("OpenBoxPopup",function(t){t.getComponent("OpenBoxPopup").init(GameApp.uiManager.boxSkinDataGroup[2],2,5,a),e.onceClick=!0})},function(a){e.onceClick=!0,a?GameApp.uiManager.showToast(a):GameApp.uiManager.showToast("\u672a\u770b\u5b8c\u89c6\u9891\uff01")});else{e.onceClick=!0,GameApp.dataManager.addPlayedVideoNum();var a=Tools.randomNum(26,30);GameApp.dataManager.addPieceNum(a,5),GameApp.uiManager.showPopup("OpenBoxPopup",function(t){t.getComponent("OpenBoxPopup").init(GameApp.uiManager.boxSkinDataGroup[2],2,5,a),e.onceClick=!0})}}},coinBtnClick:function(){if(this.onceClick){this.onceClick=!1,GameApp.audioManager.playEffect("click");var e=this;window.tt?i.addVideo("addVideo",function(){e.onceClick=!0,GameApp.uiManager.showToast("\u83b7\u5f97500\u91d1\u5e01"),GameApp.dataManager.addCoin(500),e.updateUIShow()},function(a){e.onceClick=!0,a?GameApp.uiManager.showToast(a):GameApp.uiManager.showToast("\u672a\u770b\u5b8c\u89c6\u9891\uff01")}):(e.onceClick=!0,GameApp.uiManager.showToast("\u975e\u771f\u673a,\u83b7\u5f97500\u91d1\u5e01"),GameApp.dataManager.addCoin(500),e.updateUIShow())}},backBtnClick:function(){GameApp.audioManager.playEffect("click"),GameApp.uiManager.showUI("LoginUI")}}),cc._RF.pop()},{Utils:"Utils"}],Bullet:[function(e,a,t){"use strict";cc._RF.push(a,"72ba1bMe1VOy63ITcS26/28","Bullet"),cc.Class({extends:cc.Component,properties:{_belongTag:-1,_belongName:"",gunData:{default:{}},_pbc:cc.PhysicsBoxCollider,_doFly:!1,_flyDir:{default:cc.v2(0,0)},_flySpeed:0,_maxRange:500,_curRange:0,_power:0,_isCrit:!1,_onceExec:!0,bulletAtlas:cc.SpriteAtlas},onLoad:function(){this._pbc=this.node.getComponent(cc.PhysicsBoxCollider)},init:function(e,a,t,i){this.gunData=e,this._power=a,this._isCrit=t;var n=this.gunData.weaponid;n>1100&&(n-=100),this.getComponent(cc.Sprite).spriteFrame=this.bulletAtlas.getSpriteFrame(n+1e3),this._flySpeed=this.gunData.speed,this._maxRange=this.gunData.range,this._pbc.size=new cc.size(60,30),this._pbc.enabled=!0,this._doFly=!0},update:function(e){this._doFly?(this.node.x+=this._flyDir.x*this._flySpeed*e,this.node.y+=this._flyDir.y*this._flySpeed*e,this._curRange+=this._flyDir.mag()*e*1e3,this._curRange>this._maxRange&&(1005!=this.gunData.weaponid&&1105!=this.gunData.weaponid||(this._pbc.size=new cc.size(120,120),this._pbc.apply()),this._doFly=!1)):this.doAnim()},doAnim:function(){var e=this;if(this._onceExec){this._onceExec=!1,this.node.runAction(cc.sequence(cc.delayTime(.1),cc.callFunc(function(){e._pbc.enabled=!1})));var a=this.getComponent(cc.Sprite),t=1;this.node.runAction(cc.sequence(cc.callFunc(function(){var i=e.gunData.weaponid;i>1100&&(i-=100);var n=e.bulletAtlas.getSpriteFrame(i+1e3+"_"+t);null!=n?(a.spriteFrame=n,++t):e.node.destroy()}),cc.delayTime(.1)).repeatForever())}},onBeginContact:function(e,a,t){t.tag!=this._belongTag&&(t.tag==Tags.collider||t.tag==Tags.player||t.tag>=Tags.enemy)&&(1005!=this.gunData.weaponid&&1105!==this.gunData.weaponid||(this._pbc.size=new cc.size(120,120),this._pbc.apply()),this._doFly=!1)}}),cc._RF.pop()},{}],1:[function(e,a,t){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function o(e){return"number"==typeof e}function s(e){return"object"==typeof e&&null!==e}function r(e){return void 0===e}a.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(e){if(!o(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},i.prototype.emit=function(e){var a,t,i,o,c,p;if(this._events||(this._events={}),"error"===e&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if((a=arguments[1])instanceof Error)throw a;var l=new Error('Uncaught, unspecified "error" event. ('+a+")");throw l.context=a,l}if(r(t=this._events[e]))return!1;if(n(t))switch(arguments.length){case 1:t.call(this);break;case 2:t.call(this,arguments[1]);break;case 3:t.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),t.apply(this,o)}else if(s(t))for(o=Array.prototype.slice.call(arguments,1),i=(p=t.slice()).length,c=0;c<i;c++)p[c].apply(this,o);return!0},i.prototype.addListener=function(e,a){var t;if(!n(a))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(a.listener)?a.listener:a),this._events[e]?s(this._events[e])?this._events[e].push(a):this._events[e]=[this._events[e],a]:this._events[e]=a,s(this._events[e])&&!this._events[e].warned&&(t=r(this._maxListeners)?i.defaultMaxListeners:this._maxListeners)&&t>0&&this._events[e].length>t&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(e,a){if(!n(a))throw TypeError("listener must be a function");var t=!1;function i(){this.removeListener(e,i),t||(t=!0,a.apply(this,arguments))}return i.listener=a,this.on(e,i),this},i.prototype.removeListener=function(e,a){var t,i,o,r;if(!n(a))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(o=(t=this._events[e]).length,i=-1,t===a||n(t.listener)&&t.listener===a)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,a);else if(s(t)){for(r=o;r-- >0;)if(t[r]===a||t[r].listener&&t[r].listener===a){i=r;break}if(i<0)return this;1===t.length?(t.length=0,delete this._events[e]):t.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,a)}return this},i.prototype.removeAllListeners=function(e){var a,t;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(a in this._events)"removeListener"!==a&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events={},this}if(n(t=this._events[e]))this.removeListener(e,t);else if(t)for(;t.length;)this.removeListener(e,t[t.length-1]);return delete this._events[e],this},i.prototype.listeners=function(e){return this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},i.prototype.listenerCount=function(e){if(this._events){var a=this._events[e];if(n(a))return 1;if(a)return a.length}return 0},i.listenerCount=function(e,a){return e.listenerCount(a)}},{}],ConfigManager:[function(e,a,t){"use strict";cc._RF.push(a,"1bd72n2n1JOz4R303K0b7TD","ConfigManager");var i={Skin:"data/skins.json"},n={allConfigs:{},loadConfig:function(e,a){var t=i[e];cc.loader.loadRes(t,function(t,i){if(t)return console.log("\u52a0\u8f7d\u51fa\u9519\u4e86"),void console.error(t.message||t);var n=i;this.allConfigs[e]=n,a&&a()}.bind(this))},loadAllConfig:function(e){for(var a in i)i.hasOwnProperty(a)&&this.loadConfig(a,e)},getAllConfig:function(){return this.allConfigs}};a.exports=n,cc._RF.pop()},{}],Consts:[function(e,a,t){"use strict";cc._RF.push(a,"fcba3fxLE5O3oI0GoUWFYYj","Consts"),window.WS_SERVERS={TEST:"ws://192.168.25.242:19999/server",INSPECT:"",RELEASE:""};window.SERVER="TEST",window.VERSION="1.0.0",window.NameColor=["#0cf60b","#09b2eb","#fc01fc","#fb7f03","#ec0807","#faf80d"],window.Tags={collider:0,player:1,item:2,bullet:3,empty:4,box:5,boom:6,enemy:10},window.ItemType={weapon:0,item:1},window.EquipType={damage:0,def:1,speed:2,crit:3},window.ItemAttr=[[{attr:.1,des:"\u4f24\u5bb3+10%"},{attr:.2,des:"\u4f24\u5bb3+20%"},{attr:.3,des:"\u4f24\u5bb3+30%"}],[{attr:.1,des:"\u51cf\u4f24+10%"},{attr:.2,des:"\u51cf\u4f24+20%"},{attr:.3,des:"\u51cf\u4f24+30%"}],[{attr:.1,des:"\u79fb\u901f+10%"},{attr:.2,des:"\u79fb\u901f+20%"},{attr:.3,des:"\u79fb\u901f+30%"}],[{attr:1,des:"\u66b4\u51fb+10%"},{attr:2,des:"\u66b4\u51fb+20%"},{attr:3,des:"\u66b4\u51fb+30%"}]],window.TaskState={Unfinish:0,Canget:1,Got:2},window.EventNames={EVENT_UPDATE_SHOP_CHOOSED_SHOW:"EVENT_UPDATE_SHOP_CHOOSED_SHOW",EVENT_UPDATE_COIN_SHOW:"EVENT_UPDATE_COIN_SHOW",EVENT_UPDATE_AMO_SHOW:"EVENT_UPDATE_AMO_SHOW",EVENT_PLAYER_SHOOT:"EVENT_PLAYER_SHOOT",EVENT_PLAYER_RELOAD:"EVENT_PLAYER_RELOAD",EVENT_UPDATE_TOPBAR_SHOW:"EVENT_UPDATE_TOPBAR_SHOW",EVENT_SHOW_GUN_UI:"EVENT_SHOW_GUN_UI",EVENT_SHOW_ALLROLENUM_UI:"EVENT_SHOW_ALLROLENUM_UI",EVENT_SHOW_RELOAD_UI:"EVENT_SHOW_RELOAD_UI",EVENT_PICKUP_WEAPON:"EVENT_PICKUP_WEAPON",EVENT_AIM:"EVENT_AIM",EVENT_GAME_BEGIN:"EVENT_GAME_BEGIN",EVENT_UPDATE_MIPMAP_PLAYER:"EVENT_UPDATE_MIPMAP_PLAYER",EVENT_THEGAMESTART:"EVENT_THEGAMESTART",EVENT_UPDATE_RANK_SHOW:"EVENT_UPDATE_RANK_SHOW",EVENT_UPDATE_GAS_SHOW:"EVENT_UPDATE_GAS_SHOW",EVENT_FLASH:"EVENT_FLASH",EVENT_RESUME_HEALTH:"EVENT_RESUME_HEALTH",EVENT_DROP_BOX:"EVENT_DROP_BOX",EVENT_NOTYFY_BOX_DISMISS:"EVENT_NOTYFY_BOX_DISMISS",EVENT_NOTYFY_BOOM_DISMISS:"EVENT_NOTYFY_BOOM_DISMISS",EVENT_SHOW_BOXITEM:"EVENT_SHOW_BOXITEM",EVENT_UPDATE_STAR_SHOW:"EVENT_UPDATE_STAR_SHOW",EVENT_NOTIFY_ENEMY_MAPBOX:"EVENT_NOTIFY_ENEMY_MAPBOX",EVENT_SHOW_ACTIVITYBTN:"EVENT_SHOW_ACTIVITYBTN"},cc._RF.pop()},{}],DailyPopup:[function(e,a,t){"use strict";cc._RF.push(a,"3aba0X4OkJLfae48HsS/dWc","DailyPopup");e("Utils");cc.Class({extends:cc.Component,properties:{dailyGroup:cc.Node,dailyGotNum:{default:0,type:cc.number,visible:!1},closeBtn:cc.Node,onceClick:!0},onLoad:function(){this.dailyGotNum=cc.sys.localStorage.getItem("EatChicken_dailyGotNum"),null==this.dailyGotNum||void 0==this.dailyGotNum||""==this.dailyGotNum?(this.dailyGotNum=0,cc.sys.localStorage.setItem("EatChicken_dailyGotNum",0)):this.dailyGotNum=parseInt(this.dailyGotNum),this.initShow();var e=cc.sequence(cc.delayTime(3),cc.scaleTo(.3,1));this.closeBtn.runAction(e),GameApp.dataManager.globalData.curDailyGot?(this.dailyGroup.children[this.dailyGotNum-1].getComponent(cc.Button).interactable=!1,this.dailyGroup.children[this.dailyGotNum-1].children[0].active=!0):this.dailyGroup.children[this.dailyGotNum].children[0].active=!0},initShow:function(){if(this.dailyGotNum>0)for(var e=0;e<this.dailyGotNum;e++)this.dailyGroup.children[e].children[1].runAction(cc.scaleTo(.5,1).easing(cc.easeBackOut()))},getBtnClick:function(e,a){var t=parseInt(a);if(!GameApp.dataManager.globalData.curDailyGot&&this.dailyGotNum==t-1){GameApp.audioManager.playEffect("click");this.onceClick=!0,this.dailyGroup.children[this.dailyGotNum].getComponent(cc.Button).interactable=!1,GameApp.dataManager.globalData.curDailyGot=!0,cc.sys.localStorage.setItem("EatChicken_dailyGotState",!0),this.dailyGroup.children[this.dailyGotNum].children[1].runAction(cc.sequence(cc.scaleTo(.5,1).easing(cc.easeBackOut()),cc.callFunc(function(){var e=[1,2,1,2,1,2,1],a=[50,5,50,5,100,5,500];1==e[this.dailyGotNum]?(GameApp.uiManager.showToast("\u83b7\u5f97\u91d1\u5e01*"+a[this.dailyGotNum]),GameApp.dataManager.addCoin(a[this.dailyGotNum])):2==e[this.dailyGotNum]&&(GameApp.uiManager.showToast("\u83b7\u5f97<color=#faf80d>"+GameApp.dataManager.getSkinDataById(27).name+"</color> \u788e\u7247*"+a[this.dailyGotNum]),GameApp.dataManager.addPieceNum(27,a[this.dailyGotNum])),this.dailyGotNum++,7==this.dailyGotNum&&(this.dailyGotNum=0),cc.sys.localStorage.setItem("EatChicken_dailyGotNum",this.dailyGotNum)}.bind(this),this)))}},closeBtnClick:function(){GameApp.audioManager.playEffect("click"),this.node.destroy()}}),cc._RF.pop()},{Utils:"Utils"}],DataManager:[function(e,a,t){"use strict";cc._RF.push(a,"8ad44fXOFxB4J34LEZZE1b8","DataManager"),window.RecordState=cc.Enum({READY:0,RECORD:1,PAUSE:2}),cc.Class({name:"DataManager",properties:{MD5Code:null,userData:{default:{}}},ctor:function(){this.userData={isFirstPlay:!0,playerName:"\u83e0\u841d\u5439\u96ea",coinNum:0,choosedSkinId:1,unLockedSkinIdArr:[1],playedVideoNum:0,havePieceNum:{26:0,27:0,28:0,29:0,30:0},box1NeedCoinNum:100,box1RewardCoinNum:[50,150],box2RewardCoinNum:[250,500],baseHp:100,baseDamage:1,baseCrit:0,baseSpeed:200,baseCd:0,baseDef:0,baseRecovery:1,alDieNum:0,allKillNum:0,allPlayNum:0,winNum:0,top5Num:0,winRate:0,kd:0,avgRank:0,mostKill:0,avgLifeTime:0},this.globalData={days:1,curDailyGot:!1,shootInterval:0,reloadInterval:0,maxAmoNum:20,curAmoNum:20,maxHp:100,curHp:100,curDamage:0,curCrit:0,curSpeed:200,curCd:0,curDef:0,curRecovery:0,allRoleArr:[],allGunArr:[],allBoxArr:[],isInGame:!1,inGameKillNum:[],gasConfig:null,getItemAttrArr:[{rank:0,item:null},{rank:0,item:null},{rank:0,item:null},{rank:0,item:null}],equipItemAttr:[0,0,0,0],lifeTime:0,onLineTime:0,onLineGifts:[2,2,2],onLineGiftCurNum:0,activeValue:0,activityGifts:[2,2,2],activityNum:[0,0,0],activityCurNum:[0,0,0],activityCurCoin:[0,0,0],progressGifts:[0,0,0,0],activityAddNum:[1,3,1],activityAddCoin:[50,100,100],playerNameArr:["\u968b\u6657\u857e","\u9a79\u590f\u4e4b","\u58ec\u7d2b\u96ea","\u534e\u6e05\u6db5","\u538d\u5c9a\u5f69","\u4f9d\u96ea\u5170","\u4fdf\u9a8a\u5a67","\u58f0\u91c7\u73ca","\u6108\u6210\u6d4e","\u66b4\u96e8","\u515a\u96c1\u4e1d","\u67f4\u4fca\u90ce","\u6f5c\u6625\u82b3","\u8877\u4ea6\u5de7","\u8d8a\u4e16\u654f","\u7948\u6850","\u83c5\u6606\u9510","\u5351\u7ecd\u94a7","\u6d51\u79c0\u82f1","\u725b\u4fca\u609f","\u6c72\u6c38\u5eb7","\u864e\u80e4\u6587","\u5bbf\u5de7\u6625","\u6d77\u5408\u745e","\u670b\u66fe","\u54c8\u8776","\u5b8f\u777f\u6587","\u9ece\u6cf0\u7136"],recordPath:null,recordTimer:0,recordState:RecordState.READY},this.jsonData={SkinsData:[],WeaponData:[],RobotName:[]}},initSomeAttr:function(){var e=this;cc.game.on(cc.game.EVENT_HIDE,function(){console.log("\u8fdb\u5165\u540e\u53f0\u524d\u5b58\u50a8\u4e86\u6570\u636e"),cc.sys.localStorage.setItem("EatChicken_onLineTime",parseInt(e.globalData.onLineTime))});var a=cc.sys.localStorage.getItem("EatChicken_dailyGotState");this.globalData.curDailyGot="true"==a||1==a;var t=cc.sys.localStorage.getItem("EatChicken_onLineTime");null==t||void 0==t||""==t?(t=0,cc.sys.localStorage.setItem("EatChicken_onLineTime",0)):t=parseInt(t),this.globalData.onLineTime=t;var i=cc.sys.localStorage.getItem("EatChicken_onLineGifts");null==i||void 0==i||""==i?(i=[2,2,2],cc.sys.localStorage.setItem("EatChicken_onLineGifts",JSON.stringify(i))):i=JSON.parse(i),this.globalData.onLineGifts=i;var n=cc.sys.localStorage.getItem("EatChicken_onLineGiftCurNum");null==n||void 0==n||""==n?(n=0,cc.sys.localStorage.setItem("EatChicken_onLineGiftCurNum",0)):n=parseInt(n),this.globalData.onLineGiftCurNum=n;var o=cc.sys.localStorage.getItem("EatChicken_activeValue");null==o||void 0==o||""==o?(o=0,cc.sys.localStorage.setItem("EatChicken_activeValue",0)):o=parseInt(o),this.globalData.activeValue=o;var s=cc.sys.localStorage.getItem("EatChicken_activityGifts");null==s||void 0==s||""==s?(s=[2,2,2],cc.sys.localStorage.setItem("EatChicken_activityGifts",JSON.stringify(s))):s=JSON.parse(s),this.globalData.activityGifts=s;var r=cc.sys.localStorage.getItem("EatChicken_activityNum");null==r||void 0==r||""==r?(r=[0,0,0],cc.sys.localStorage.setItem("EatChicken_activityNum",JSON.stringify(r))):r=JSON.parse(r),this.globalData.activityNum=r;var c=cc.sys.localStorage.getItem("EatChicken_activityCurNum");null==c||void 0==c||""==c?(c=[0,0,0],cc.sys.localStorage.setItem("EatChicken_activityCurNum",JSON.stringify(c))):c=JSON.parse(c),this.globalData.activityCurNum=c;var p=cc.sys.localStorage.getItem("EatChicken_activityCurCoin");null==p||void 0==p||""==p?(p=[0,0,0],cc.sys.localStorage.setItem("EatChicken_activityCurCoin",JSON.stringify(p))):p=JSON.parse(p),this.globalData.activityCurCoin=p;var l=cc.sys.localStorage.getItem("EatChicken_progressGifts");null==l||void 0==l||""==l?(l=[0,0,0,0],cc.sys.localStorage.setItem("EatChicken_progressGifts",JSON.stringify(l))):l=JSON.parse(l),this.globalData.progressGifts=l,this.globalData.allRoleArr=[],this.globalData.allGunArr=[],this.globalData.allBoxArr=[],this.globalData.inGameKillNum=[],this.globalData.gasConfig=null,this.globalData.getItemAttrArr=[{rank:0,item:null},{rank:0,item:null},{rank:0,item:null},{rank:0,item:null}],this.globalData.equipItemAttr=[0,0,0,0],this.globalData.maxHp=this.globalData.curHp=this.userData.baseHp,this.globalData.curDamage=this.userData.baseDamage,this.globalData.curCrit=this.userData.baseCrit,this.globalData.curSpeed=this.userData.baseSpeed,this.globalData.curCd=this.userData.baseCd,this.globalData.curDef=this.userData.baseDef,this.globalData.curRecovery=this.userData.baseRecovery},setPlayerName:function(e){this.userData.playerName=e,this.save()},addCoin:function(e){this.userData.coinNum+=e,GameApp.eventManager.emit(EventNames.EVENT_UPDATE_COIN_SHOW),this.save()},reduceCoin:function(e){var a=this.userData.coinNum-e;return!(a<0)&&(this.userData.coinNum=a,GameApp.eventManager.emit(EventNames.EVENT_UPDATE_COIN_SHOW),this.save(),!0)},unLockSkin:function(e){-1==this.userData.unLockedSkinIdArr.indexOf(e)&&this.userData.unLockedSkinIdArr.push(e)},addPieceNum:function(e,a){var t=this;this.userData.havePieceNum[e]+=a;[26,27,28,29,30].forEach(function(e){t.userData.havePieceNum[e]>=t.getSkinDataById(e).needpiece&&t.unLockSkin(e)}),this.save()},addPlayedVideoNum:function(){var e=this;this.userData.playedVideoNum++;[21,22,23,24,25].forEach(function(a){e.userData.playedVideoNum>=e.getSkinDataById(a).needgem&&e.unLockSkin(a)}),this.save()},getSkinDataById:function(e){return this.jsonData.SkinsData[e-1]},setChoosedSkinId:function(e){e>30&&(e=1),e<1&&(e=30),this.userData.choosedSkinId=e,this.addSkinAttr(),this.save()},addSkinAttr:function(){var e=this.getSkinDataById(this.userData.choosedSkinId);this.globalData.maxHp=this.globalData.curHp=this.userData.baseHp+Math.floor(this.userData.baseHp*(e.att_hpmax/100)),this.globalData.curDamage=this.userData.baseDamage+e.att_damage/100,this.globalData.curCrit=this.userData.baseCrit+e.att_crit/10,this.globalData.curSpeed=this.userData.baseSpeed+Math.floor(this.userData.baseSpeed*(e.att_speed/100)),this.globalData.curCd=this.userData.baseCd+e.att_cd/100,this.globalData.curDef=this.userData.baseDef+e.att_defense/100,this.globalData.curRecovery=this.userData.baseRecovery+e.att_recovery/100},getChoosedSkinId:function(){return this.userData.choosedSkinId},reduceHp:function(e){var a=this.globalData.curHp-e;return a<=0?(this.globalData.curHp=0,GameApp.eventManager.emit(EventNames.EVENT_UPDATE_TOPBAR_SHOW),!1):(this.globalData.curHp=a,GameApp.eventManager.emit(EventNames.EVENT_UPDATE_TOPBAR_SHOW),!0)},getResumeHealthNum:function(){return 10*this.globalData.curRecovery},getSkillCD:function(){return 10*(1-this.globalData.curCd)},addHp:function(e){var a=this.globalData.curHp+e;a>this.globalData.maxHp?this.globalData.curHp=this.globalData.maxHp:this.globalData.curHp=a,GameApp.eventManager.emit(EventNames.EVENT_UPDATE_TOPBAR_SHOW)},reduceAmo:function(){var e=this.globalData.curAmoNum-1;return e<0?(this.globalData.curAmoNum=0,GameApp.eventManager.emit(EventNames.EVENT_UPDATE_AMO_SHOW),!1):(this.globalData.curAmoNum=e,GameApp.eventManager.emit(EventNames.EVENT_UPDATE_AMO_SHOW),!0)},reloadAmo:function(){this.globalData.curAmoNum=this.globalData.maxAmoNum,GameApp.eventManager.emit(EventNames.EVENT_UPDATE_AMO_SHOW)},addKillNum:function(e,a){return 1==e?e=0:e-=9,this.globalData.inGameKillNum[e]._killNum++,this.globalData.inGameKillNum[e]._belongName=a,GameApp.eventManager.emit(EventNames.EVENT_UPDATE_RANK_SHOW),this.globalData.inGameKillNum[e]._killNum},equipBoxItem:function(e){var a=this.globalData.getItemAttrArr[e].rank+1;this.globalData.getItemAttrArr[e]={rank:a,item:ItemAttr[e][a-1]},this.globalData.equipItemAttr[e]=this.globalData.getItemAttrArr[e].item.attr,GameApp.eventManager.emit(EventNames.EVENT_UPDATE_STAR_SHOW)},getEquipItemAttr:function(e){return this.globalData.equipItemAttr[e]},getEquipShowAttr:function(){var e=[];for(var a in this.globalData.getItemAttrArr){0==this.globalData.getItemAttrArr[a].rank?e.push(null):e.push(this.globalData.getItemAttrArr[a])}return e},getOnLineGiftsState:function(e){return this.globalData.onLineGifts[e]},getActivityGiftsState:function(e){return this.globalData.activityGifts[e]},setOnLineGiftsState:function(e,a){this.globalData.onLineGifts[e]=a,cc.sys.localStorage.setItem("EatChicken_onLineGifts",JSON.stringify(this.globalData.onLineGifts))},setActivityGiftsState:function(e,a){this.globalData.activityGifts[e]=a,cc.sys.localStorage.setItem("EatChicken_activityGifts",JSON.stringify(this.globalData.activityGifts))},getOnlineTimeMinute:function(){var e=Tools.toTimeString2(this.globalData.onLineTime);return Math.floor(60*e.hour+e.minute)},addActiveValue:function(e){var a=this.globalData.activeValue+e;a>120&&(a=120),this.globalData.activeValue=a;var t=[30,60,90,120];for(var i in t)0==this.globalData.progressGifts[i]&&this.globalData.activeValue>=t[i]&&this.setProgressGifts(i,1);cc.sys.localStorage.setItem("EatChicken_activeValue",this.globalData.activeValue)},addActivityNum:function(e,a){this.globalData.activityNum[e]+=a,cc.sys.localStorage.setItem("EatChicken_activityNum",JSON.stringify(this.globalData.activityNum))},setProgressGifts:function(e,a){this.globalData.progressGifts[e]=a,cc.sys.localStorage.setItem("EatChicken_progressGifts",JSON.stringify(this.globalData.progressGifts))},save:function(){cc.sys.localStorage.setItem("EatChicken_UserData",JSON.stringify(this.userData))},changeRecordState:function(e){this.globalData.recordState=e},setMD5Code:function(e){this.MD5Code=e},getMD5Code:function(){return this.MD5Code}}),cc._RF.pop()},{}],DropBox:[function(e,a,t){"use strict";cc._RF.push(a,"53d079b9kpBmqvST+YSa7z0","DropBox"),cc.Class({extends:cc.Component,properties:{boxIndex:1231231,_showToPlayer:!1,progressBar:cc.ProgressBar,_beginOpen:!1,_hadOpen:!1,_openTimer:0,_belongTagsArr:[],other:null},onLoad:function(){this._belongTagsArr=[]},init:function(e){this.boxIndex=e},update:function(e){if(!this._hadOpen){if(this._beginOpen){if(this._openTimer+=e,this._openTimer>=5){if(this._hadOpen)return;if(this._hadOpen=!0,GameApp.eventManager.emit(EventNames.EVENT_NOTYFY_BOX_DISMISS,this.boxIndex.toString()),0==this._belongTagsArr.length)return;-1!=this._belongTagsArr.indexOf(Tags.player)?GameApp.eventManager.emit(EventNames.EVENT_SHOW_BOXITEM):this.other&&this.other.node.getComponent("Enemy").enemyEquipBoxItem()}}else this._openTimer-=e,this._openTimer<0&&(this._openTimer=0);this.progressBar.progress=this._openTimer/5}},onBeginContact:function(e,a,t){(t.tag==Tags.player||t.tag>=Tags.enemy)&&(this._beginOpen=!0,-1==this._belongTagsArr.indexOf(t.tag)&&this._belongTagsArr.push(t.tag))},onEndContact:function(e,a,t){if(t.tag==Tags.player||t.tag>=Tags.enemy){if(this._openTimer>=5){if(this.other=t,this._hadOpen)return;if(this._hadOpen=!0,GameApp.eventManager.emit(EventNames.EVENT_NOTYFY_BOX_DISMISS,this.boxIndex.toString()),0==this._belongTagsArr.length)return;return void(-1!=this._belongTagsArr.indexOf(Tags.player)?GameApp.eventManager.emit(EventNames.EVENT_SHOW_BOXITEM):t.node.getComponent("Enemy").enemyEquipBoxItem())}-1!=this._belongTagsArr.indexOf(t.tag)&&Tools.removeArray(this._belongTagsArr,t.tag),0==this._belongTagsArr.length&&(this._beginOpen=!1)}}}),cc._RF.pop()},{}],Enemy:[function(e,a,t){"use strict";cc._RF.push(a,"db4d1xBOmVGm7LWfdofEM+7","Enemy");var i=e("JoystickCommon");cc.Class({extends:cc.Component,properties:{moveDir:{default:cc.v2(0,0),displayName:"Move Dir",tooltip:"\u79fb\u52a8\u65b9\u5411"},_speedType:{default:i.SpeedType.STOP,displayName:"Speed Type",type:i.SpeedType,tooltip:"\u901f\u5ea6\u7ea7\u522b"},_moveSpeed:{default:0,displayName:"Move Speed",tooltip:"\u79fb\u52a8\u901f\u5ea6"},stopSpeed:{default:0,type:cc.Integer,tooltip:"\u505c\u6b62\u65f6\u901f\u5ea6"},normalSpeed:{default:200,type:cc.Integer,tooltip:"\u6b63\u5e38\u901f\u5ea6"},fastSpeed:{default:200,type:cc.Integer,tooltip:"\u6700\u5feb\u901f\u5ea6"},roleAnim:{default:null,type:sp.Skeleton,tooltip:"\u89d2\u8272\u7684Spine\u52a8\u753b\u7ec4\u4ef6"},_gunDir:{default:cc.v2(1,0)},gunAnim:{default:null,type:sp.Skeleton,tooltip:"\u67aa\u7684Spine\u52a8\u753b\u7ec4\u4ef6"},gunNode:{default:null,type:cc.Node,tooltip:"\u67aa\u8282\u70b9"},_haveGun:!1,_mapNoGun:!1,_mapNoBox:!0,thisName:"",gunData:{default:{}},skinData:{default:{}},_pbc:cc.PhysicsBoxCollider,nameUI:cc.Label,bulletPrefab:cc.Prefab,_choosedSkinId:0,hpBar:cc.ProgressBar,amoBar:cc.ProgressBar,starNode:cc.Node,_maxHp:100,_curHp:100,_shootInterval:0,_reloadInterval:0,_maxAmoNum:20,_curAmoNum:20,_curDamage:0,_curCrit:0,_curSpeed:200,_curCd:0,_curDef:0,_curRecovery:0,getItemAttrArr:[],equipItemAttr:[],_shootFlag:!1,_shootTimer:.3,_reloadFlag:!1,_reloadTimer:0,lastHitBullet:null,_desTime:0,_desTime2:0,_isAim:!1,_aimDir:null,_aimTimer:0,_aimInterval:.1,_isDie:!1,_move:!1,_isProtect:!1,_isBlock:!1,_isGas:!1,_inGasTimer:0,_inGasInterval:.5},onLoad:function(){this.getItemAttrArr=[{rank:0,item:null},{rank:0,item:null},{rank:0,item:null},{rank:0,item:null}],this.equipItemAttr=[0,0,0,0],GameApp.eventManager.on(EventNames.EVENT_THEGAMESTART,this.theGameStart.bind(this)),GameApp.eventManager.on(EventNames.EVENT_NOTIFY_ENEMY_MAPBOX,this.notifyMapBox.bind(this)),this._pbc=this.getComponent(cc.PhysicsBoxCollider)},onEnable:function(){},onDisable:function(){},onDestroy:function(){GameApp.eventManager.removeListener(EventNames.EVENT_THEGAMESTART),GameApp.eventManager.removeListener(EventNames.EVENT_NOTIFY_ENEMY_MAPBOX)},init:function(e,a){GameApp.dataManager.globalData.isInGame&&this.roleProtect(),this._choosedSkinId=e,this.skinData=GameApp.dataManager.jsonData.SkinsData[e-1],this.addSkinAttr(),this.initNameShow(a),this.initSkinShow(),this.setSpeedType(i.SpeedType.FAST)},addSkinAttr:function(){var e=this.skinData;this._maxHp=this._curHp=GameApp.dataManager.userData.baseHp+Math.floor(GameApp.dataManager.userData.baseHp*(e.att_hpmax/100)),this._curDamage=GameApp.dataManager.userData.baseDamage+e.att_damage/100,this._curCrit=GameApp.dataManager.userData.baseCrit+e.att_crit/10,this._curSpeed=GameApp.dataManager.userData.baseSpeed+Math.floor(GameApp.dataManager.userData.baseSpeed*(e.att_speed/100)),this._curCd=GameApp.dataManager.userData.baseCd+e.att_cd/100,this._curDef=GameApp.dataManager.userData.baseDef+e.att_defense/100,this._curRecovery=GameApp.dataManager.userData.baseRecovery+e.att_recovery/100},roleProtect:function(){this._isProtect=!0,this.node.opacity=0},theGameStart:function(){this.node.opacity=255,this._isProtect=!1},notifyMapBox:function(){this._mapNoBox=!1},enemyEquipBoxItem:function(){for(var e=[0,1,2,3],a=0;3==this.getItemAttrArr[a].rank;){if(Tools.removeArray(e,a),0==e.length)return;a=Tools.getRandomElement(e)}var t=this.getItemAttrArr[a].rank+1;this.getItemAttrArr[a]={rank:t,item:ItemAttr[a][t-1]},this.equipItemAttr[a]=this.getItemAttrArr[a].item.attr,this.updateStarShow()},updateStarShow:function(){for(var e=0,a=0;a<4;a++)e+=this.getItemAttrArr[a].rank;if(0==e)this.starNode.active=!1;else{var t=parseInt((e-1)/3),i=e-3*t;this.starNode.children[0].getComponent(cc.Sprite).spriteFrame=GameApp.uiManager.commonAtlas.getSpriteFrame("level_bg_"+(t+1)),this.starNode.children[1].getComponent(cc.Sprite).spriteFrame=GameApp.uiManager.commonAtlas.getSpriteFrame("level_star_"+(t+1)+"_"+i),this.starNode.active=!0}},initNameShow:function(e){this.thisName=e,this.nameUI.string=e,GameApp.dataManager.globalData.isInGame||(this.hpBar.node.active=!1)},initSkinShow:function(){this._choosedSkinId<21?(this.roleAnim.skeletonData=GameApp.uiManager.normalSkinData,this.roleAnim.setSkin(this.skinData.skinname)):this.roleAnim.skeletonData=GameApp.uiManager.advanceSkinDataGroup[this._choosedSkinId-21];var e=this._choosedSkinId<21?["await"]:["await_fight_1"];this.roleAnim.setAnimation(0,e[0],!0)},move:function(e){if(this.moveDir){var a=90-cc.misc.radiansToDegrees(Math.atan2(this.moveDir.y,this.moveDir.x));this.roleAnim.node.scaleX=a>180||a<0?-1:1;var t=this.node.position.add(this.moveDir.mul(this._moveSpeed*e));this.node.setPosition(t)}},doParser:function(e){if(this._desTime-=e,this._desTime2-=e,this._isAim)this._desTime2<0&&(this._desTime2=1,this._haveGun?!this._isBlock&&this.setDir(this._aimDir):!this._isBlock&&this.setDir(this._aimDir.rotate(180)));else{if(null!=GameApp.dataManager.globalData.gasConfig){var a=cc.v2(GameApp.dataManager.globalData.gasConfig.safePosition).sub(cc.v2(this.node.position)),t=a.mag();if(GameApp.dataManager.globalData.gasConfig.gasCircle>0&&t>GameApp.dataManager.globalData.gasConfig.gasCircle/2)return this._inGasTimer-=e,this._inGasTimer<0&&(this._inGasTimer=this._inGasInterval,this.beDamage(5,-1)),this._isGas=!0,void(!this._isBlock&&this.setDir(a.normalize()));this._isGas=!1}else this._isGas=!1;if(this._desTime<0)if(this._isGas||this._mapNoGun||this._haveGun)if(!this._isGas&&GameApp.dataManager.globalData.isInGame&&!this._mapNoBox&&this._haveGun)this._desTime=.3,this.searchBox();else{this._desTime=Tools.randomNum(1,3);var i=cc.v2(0,1).rotate(cc.misc.radiansToDegrees(Tools.randomNum(0,360)));!this._isBlock&&this.setDir(i)}else this._desTime=.3,!this._isBlock&&this.searchGun()}},searchGun:function(){for(var e=GameApp.dataManager.globalData.allGunArr.concat(),a=1e6,t=-1,i=0;i<e.length;i++){var n=cc.v2(e[i].position).sub(cc.v2(this.node.position)).mag();if(n<a){if(null!=GameApp.dataManager.globalData.gasConfig)if(cc.v2(GameApp.dataManager.globalData.gasConfig.safePosition).sub(cc.v2(e[i].position)).mag()>GameApp.dataManager.globalData.gasConfig.gasCircle/2)continue;a=n,t=i}}var o=null;if(-1==t)this._mapNoGun=!0;else{var s=e[t];o=cc.v2(s.position).sub(cc.v2(this.node.position)).normalize()}this.setDir(o)},searchBox:function(){for(var e=GameApp.dataManager.globalData.allBoxArr.concat(),a=1e6,t=-1,i=0;i<e.length;i++){var n=cc.v2(e[i].position).sub(cc.v2(this.node.position)).mag();if(n<10)return void this.setDir(cc.v2(0,0));if(n<a){if(null!=GameApp.dataManager.globalData.gasConfig)if(cc.v2(GameApp.dataManager.globalData.gasConfig.safePosition).sub(cc.v2(e[i].position)).mag()>GameApp.dataManager.globalData.gasConfig.gasCircle/2)continue;a=n,t=i}}var o=cc.v2(0,0);if(-1==t)this._mapNoBox=!0;else{var s=e[t];o=cc.v2(s.position).sub(cc.v2(this.node.position)).normalize()}this.setDir(o)},setSpeedType:function(e){if(!this._isDie&&this._speedType!=e){this._speedType=e;var a=this._choosedSkinId<21?["await","run2","run2"]:["await_fight_1","run","run"];this.roleAnim.setAnimation(0,a[e],!0)}},setDir:function(e){this._isDie||(e&&0==e.mag()?this.setSpeedType(i.SpeedType.STOP):this.setSpeedType(i.SpeedType.FAST),this.moveDir=e,this._isAim||this.setGunDir(e))},setGunDir:function(e){if(null==e&&(e=this.moveDir),this._gunDir=e,this._aimDir=e,this._haveGun){this.gunNode.rotation=-cc.misc.radiansToDegrees(Math.atan2(e.y,e.x));var a=90-this.gunNode.rotation;this.gunNode.scaleY=a>180||a<0?-1:1}},update:function(e){if(!this._isDie){switch(this.doParser(e),this._speedType){case i.SpeedType.STOP:this._moveSpeed=this.stopSpeed;break;case i.SpeedType.NORMAL:this._moveSpeed=this.normalSpeed;break;case i.SpeedType.FAST:this._moveSpeed=this._curSpeed+Math.floor(this._curSpeed*this.equipItemAttr[EquipType.speed])}this.move(e),this._isProtect||(this._aimTimer-=e,this._aimTimer<0&&(this._aimTimer=this._aimInterval,this.aimToNearest()),this._isAim&&(this._shootTimer-=e,this._shootTimer<0&&!this._reloadFlag&&(this._shootTimer=this._shootInterval,this.shoot())),this._reloadFlag&&(this._reloadTimer-=e,this._reloadFlag&&this._reloadTimer<0&&(this._reloadFlag=!1,this.reloadAmo())))}},lateUpdate:function(e){},aimToNearest:function(){this._haveGun||(this.gunData.range=400);var e=GameApp.dataManager.globalData.allRoleArr.concat();Tools.removeArray(e,this.getComponent("Enemy"));for(var a=1e6,t=-1,i=0;i<e.length;i++){var n=cc.v2(e[i].node.position).sub(cc.v2(this.node.position)).mag();n<a&&n<1.4*this.gunData.range&&(a=n,t=i)}var o=null;if(-1==t)this._isAim=!1;else{var s=e[t].node;o=cc.v2(s.position).sub(cc.v2(this.node.position)).normalize(),this._isAim=!0}this.setGunDir(o)},shoot:function(){if(this._haveGun){if(this.reduceAmo()){this.gunAnim.setAnimation(0,"attack_"+this.gunData.skinname,!1);var e=Math.ceil(this.gunData.power*(this._curDamage+this.equipItemAttr[EquipType.damage])),a=!1;if(Tools.isCrit(this._curCrit+this.equipItemAttr[EquipType.crit])&&(e*=2,a=!0),1002==this.gunData.weaponid){GameApp.uiManager.isInMapSight(this.node)&&GameApp.audioManager.playEffect("shot_shoot",.3,!1);var t=cc.instantiate(this.bulletPrefab),i=cc.instantiate(this.bulletPrefab),n=cc.instantiate(this.bulletPrefab),o=this.node.parent.parent.convertToNodeSpaceAR(this.gunNode.children[0].convertToWorldSpaceAR(cc.v2(0,0)));t.parent=i.parent=n.parent=this.node.parent.parent,t.setPosition(o),i.setPosition(o),n.setPosition(o),t.rotation=this.gunNode.rotation,i.rotation=this.gunNode.rotation+30,n.rotation=this.gunNode.rotation-30;var s=cc.v2(this._gunDir),r=t.getComponent("Bullet");r._belongTag=this._pbc.tag,r._belongName=this.thisName,r._flyDir=s,r.init(this.gunData,e,a);var c=i.getComponent("Bullet");c._belongTag=this._pbc.tag,c._belongName=this.thisName,c._flyDir=s.rotate(-cc.misc.degreesToRadians(30)),c.init(this.gunData,e,a);var p=n.getComponent("Bullet");p._belongTag=this._pbc.tag,p._belongName=this.thisName,p._flyDir=s.rotate(-cc.misc.degreesToRadians(-30)),p.init(this.gunData,e,a)}else{1003==this.gunData.weaponid?GameApp.uiManager.isInMapSight(this.node)&&GameApp.audioManager.playEffect("charge_shoot",.3,!1):1005==this.gunData.weaponid&&GameApp.uiManager.isInMapSight(this.node)&&GameApp.audioManager.playEffect("missile_shoot",.3,!1);var l=cc.instantiate(this.bulletPrefab),d=this.node.parent.parent.convertToNodeSpaceAR(this.gunNode.children[0].convertToWorldSpaceAR(cc.v2(0,0)));l.parent=this.node.parent.parent,l.setPosition(d),l.rotation=this.gunNode.rotation;var h=l.getComponent("Bullet");h._belongTag=this._pbc.tag,h._belongName=this.thisName,h._flyDir=this._gunDir,h.init(this.gunData,e,a)}this.updateAmoShow()}else this.reload();0==this._curAmoNum&&this.reload()}},reduceAmo:function(){var e=this._curAmoNum-1;return e<0?(this._curAmoNum=0,this.updateAmoShow(),!1):(this._curAmoNum=e,this.updateAmoShow(),!0)},reload:function(){this._haveGun&&(this._reloadFlag||(GameApp.uiManager.isInMapSight(this.node)&&GameApp.audioManager.playEffect("reload",.6),this.gunAnim.setAnimation(0,"reload_"+this.gunData.skinname,!1),this._reloadTimer=this._reloadInterval,this._reloadFlag=!0))},reloadAmo:function(){this._curAmoNum=this._maxAmoNum,this.updateAmoShow()},updateAmoShow:function(){this.amoBar.progress=this._curAmoNum/this._maxAmoNum},updateHpShow:function(){this.hpBar.progress=this._curHp/this._maxHp},equipWeapon:function(e){GameApp.uiManager.isInMapSight(this.node)&&GameApp.audioManager.playEffect("pick_item",.6),this.gunData=GameApp.dataManager.jsonData.WeaponData[e],this._shootInterval=this.gunData.shootdelay,this._reloadInterval=this.gunData.reloaddelay,this._maxAmoNum=this.gunData.clipnum,this.reloadAmo(),this.gunNode.active=!0,this.gunAnim.skeletonData=e<3?GameApp.uiManager.gunSkinDataGroup[0]:GameApp.uiManager.gunSkinDataGroup[1],this.gunAnim.setSkin(this.gunData.skinname),this._haveGun=!0,this.setGunDir(this.moveDir)},getItem:function(){},onBeginContact:function(e,a,t){var i=this;if(!this._isDie&&a.tag!=Tags.empty)if(t.tag==Tags.item){var n=t.node.getComponent("GroundItem");if(n.itemType._type==ItemType.weapon){var o=n.itemType._kind;this._haveGun||(Tools.removeArray(GameApp.dataManager.globalData.allGunArr,t.node),this.equipWeapon(o),t.node.destroy())}else n.itemType._type==ItemType.item&&this.getItem()}else if(t.tag==Tags.bullet){if(!GameApp.dataManager.globalData.isInGame)return;var s=t.node.getComponent("Bullet");if(s._belongTag==a.tag)return;if(t.node==this.lastHitBullet)return;this.lastHitBullet=t.node,this.beDamage(s._power,s._belongTag,s._belongName,s._isCrit,s.gunData.weaponid)}else t.tag==Tags.collider?(this._isBlock=!0,this.moveDir&&this.moveDir.rotateSelf(cc.misc.degreesToRadians(Tools.randomNum(90,180))),this.scheduleOnce(function(){i._isBlock=!1},.5)):t.tag==Tags.boom&&this.beDamage(999,-2)},reduceHp:function(e){var a=this._curHp-e;return a<=0?(this._curHp=0,this.updateHpShow(),!1):(this._curHp=a,this.updateHpShow(),!0)},beDamage:function(e,a,t,i,n){var o=this;if(GameApp.uiManager.isInMapSight(this.node)&&GameApp.uiManager.showGameObject("InfoLabel",function(a){var t=a.parent.convertToNodeSpaceAR(o.node.convertToWorldSpaceAR(cc.v2(.5,.5)));a.setPosition(t);var n=Math.ceil(e*o._curDef)+Math.ceil(e*o.equipItemAttr[EquipType.def]),s="<color=red>-"+(e-=n)+"</color>";i&&(s="<color=red>\u66b4\u51fb-"+e+"</color>"),n&&(s+="<color=#0fffff>\u51cf\u4f24"+n+"</color>"),a.getComponent(cc.RichText).string="<b>"+s+"</b>";var r=cc.v2(Tools.randomNum(60,100),Tools.randomNum(60,100)),c=[t,cc.v2(t.x+r.x-20,t.y+r.y+20),t.add(r)],p=cc.sequence(cc.spawn(cc.fadeIn(.2),cc.scaleTo(.3,1.5),cc.bezierTo(.3,c)),cc.delayTime(.5),cc.fadeOut(.3),cc.callFunc(function(){a.destroy()}));a.runAction(p)},this.node.parent.parent),this.reduceHp(e));else{if(GameApp.uiManager.isInMapSight(this.node)&&GameApp.audioManager.playEffect("maleDeath",.5),this.node.parent=GameApp.uiManager.getGame("GameMap").getChildByName("DeadObjectNode"),this._pbc.enabled=!1,this._isDie=!0,-1==a)GameApp.uiManager.showToast(this.thisName+" \u88ab\u6bd2\u51fa\u5c40");else if(-2==a)GameApp.uiManager.showToast(this.thisName+" \u88ab\u8f70\u70b8\u51fa\u5c40");else{var s=GameApp.dataManager.addKillNum(a,t);if(t==GameApp.dataManager.userData.playerName&&(t="<color=#0fffff>"+t+"</color>"),s>1){var r=s>5?5:s;GameApp.audioManager.playEffect("kill"+r,.5),GameApp.uiManager.showToast(t,null,s)}else GameApp.uiManager.showToast(t+" \u51fb\u6740\u4e86 "+this.thisName);1==a&&(cc.log("\u73a9\u5bb6\u6740\u4eba\u4e86"),GameApp.dataManager.addActivityNum(1,1),1102==n&&GameApp.dataManager.addActivityNum(0,1))}if(this._haveGun){var c=GameApp.uiManager.gameRoot.children[0].getComponent("GameMap");GameApp.uiManager.showGameObject("GroundItem",function(e){var a=c.allGunNode.convertToNodeSpaceAR(o.node.convertToWorldSpaceAR(cc.v2(0,0)));e.parent=c.allGunNode,e.setPosition(a);var t={_type:ItemType.weapon,_kind:Tools.getIndex(GameApp.dataManager.jsonData.WeaponData,o.gunData)};e.getComponent("GroundItem").init(t),GameApp.dataManager.globalData.allGunArr.push(e)})}this.node.stopActionByTag(1);var p=this._choosedSkinId<21?["dead"]:["dead2"];this.roleAnim.setAnimation(0,p[0],!1),this.gunNode.active=!1,Tools.removeArray(GameApp.dataManager.globalData.allRoleArr,this.node.getComponent("Enemy")),GameApp.eventManager.emit(EventNames.EVENT_SHOW_ALLROLENUM_UI)}}}),cc._RF.pop()},{JoystickCommon:"JoystickCommon"}],EventManager:[function(e,a,t){"use strict";cc._RF.push(a,"00aeeK/GotGDrrLxg+sYtgT","EventManager");var i=e("events").EventEmitter;cc.Class({name:"EventManager",properties:{_eventEmitter:i},ctor:function(){this._eventEmitter=new i,this._eventEmitter.setMaxListeners(0)},on:function(e,a){this._eventEmitter.on(e,a)},once:function(e,a){this._eventEmitter.once(e,a)},emit:function(e,a,t){a&&t?this._eventEmitter.emit(e,a,t):a?this._eventEmitter.emit(e,a):this._eventEmitter.emit(e)},removeListener:function(e,a){if(a)return this._eventEmitter.removeListener(e,a);this._eventEmitter.removeAllListeners(e)}}),cc._RF.pop()},{events:1}],GameApp:[function(e,a,t){"use strict";cc._RF.push(a,"d852dPR0w5Ho5tjM6fqnxy9","GameApp");var i=e("AudioManager"),n=e("UIManager"),o=e("DataManager"),s=e("EventManager"),r=cc.Class({properties:{eventManager:s,dataManager:o,audioManager:i,uiManager:n},ctor:function(){this.eventManager=new s,this.dataManager=new o,this.audioManager=new i,this.uiManager=null},Start:function(){}});console.log("\u521d\u59cb\u5316GameApp"),window.GameApp=new r,window.GameApp.Start(),cc._RF.pop()},{AudioManager:"AudioManager",DataManager:"DataManager",EventManager:"EventManager",UIManager:"UIManager"}],GameMap:[function(e,a,t){"use strict";var i;cc._RF.push(a,"fc94bOW2txGwZfe6BFh7ITa","GameMap"),cc.Class({extends:cc.Component,properties:(i={tiledMap:cc.TiledMap,objectPrefab:cc.Prefab,colliderPrefab:cc.Prefab,groundItemPrefab:cc.Prefab,allObjectNode:cc.Node,allColliderNode:cc.Node,allGunNode:cc.Node,otherGunPos:cc.Node,enemySpawnPosGroupNode:cc.Node,paratrooperNode:cc.Node,cloudNode:cc.Node,mapAtlas:cc.SpriteAtlas,_timer0:.1,_timer:.1,readyToSort:!1,gasPanel:cc.Node,dropPanel:cc.Node,boomPanel:cc.Node,safeCircle:10240,safePosition:cc.v2(0,0),_gasState:0},i.safeCircle=0,i._dropTime=0,i._mipBoxGroup=[],i),onLoad:function(){GameApp.eventManager.on(EventNames.EVENT_UPDATE_GAS_SHOW,this.updateGasShow.bind(this)),GameApp.eventManager.on(EventNames.EVENT_DROP_BOX,this.dropBox.bind(this)),GameApp.eventManager.on(EventNames.EVENT_NOTYFY_BOX_DISMISS,this.notifyBoxDismiss.bind(this)),GameApp.eventManager.on(EventNames.EVENT_DROP_BOOM,this.dropBoom.bind(this)),this.initMapShow()},onDestroy:function(){GameApp.eventManager.removeListener(EventNames.EVENT_UPDATE_GAS_SHOW),GameApp.eventManager.removeListener(EventNames.EVENT_DROP_BOX),GameApp.eventManager.removeListener(EventNames.EVENT_NOTYFY_BOX_DISMISS),GameApp.eventManager.removeListener(EventNames.EVENT_DROP_BOOM)},init:function(e,a,t){var i=this;this.showCloud(t),this.showParatrooperPlayer(e,a),this.schedule(function(){i.showParatrooperEnemy(e,Tools.randomNum(0,100)/100)},.1,29,.5),this.initGas()},update:function(e){this.gasCountDown(e),this.readyToSort&&(this._timer-=e,this._timer<0&&(this._timer=this._timer0,this.sortAll()))},initGas:function(){this.gasPanel.children[1].width=this.gasPanel.children[1].height=300/204*10240,this.gasPanel.children[1].runAction(cc.sequence(cc.fadeTo(1,200),cc.fadeTo(.8,255)).repeatForever())},updateGasShow:function(e,a){this._gasState=e,this.safeCircle=a.safeCircle/204*10240,this.safePosition.x=a.safePosition.x/204*10240,this.safePosition.y=a.safePosition.y/204*10240,GameApp.dataManager.globalData.gasConfig={safePosition:this.gasPanel.children[1].position,gasCircle:this.gasPanel.children[1].width}},gasCountDown:function(e){if(!(this.safeCircle<0)&&2==this._gasState){if(this.gasPanel.children[1].width<=this.safeCircle)return this.gasPanel.children[1].width=this.gasPanel.children[1].height=this.safeCircle,this.safeCircle<=0?void(this.safeCircle-=50):void 0;var a=e*(10/204*10240);if(this.gasPanel.children[1].width-=a,this.gasPanel.children[1].height-=a,GameApp.dataManager.globalData.gasConfig={safePosition:this.gasPanel.children[1].position,gasCircle:this.gasPanel.children[1].width},50==this.safeCircle)return;if(Tools.isIntersect(this.gasPanel.children[1].position,this.gasPanel.children[1].width/2,this.safePosition,this.safeCircle/2)){if(Math.abs(this.gasPanel.children[1].width-this.safeCircle)>.01){var t=(this.gasPanel.children[1].y-this.safePosition.y)/(this.gasPanel.children[1].x-this.safePosition.x),i=a*parseFloat(Math.sqrt(1/(t*t+1)));this.gasPanel.children[1].x+=1*(this.gasPanel.children[1].x<this.safePosition.x?1:-1)*i,this.gasPanel.children[1].y=t*(this.gasPanel.children[1].x-this.safePosition.x)+this.safePosition.y,GameApp.dataManager.globalData.gasConfig={safePosition:this.gasPanel.children[1].position,gasCircle:this.gasPanel.children[1].width}}}else;}},dropBox:function(e,a){var t=this;e=e.div(204).mul(10240),GameApp.uiManager.showGameObject("DropBox",function(a){t._mipBoxGroup.push(a),GameApp.dataManager.globalData.allBoxArr.push(a),a.setPosition(e),a.getComponent("DropBox").init(Tools.getIndex(t._mipBoxGroup,a)),GameApp.eventManager.emit(EventNames.EVENT_NOTIFY_ENEMY_MAPBOX)},this.dropPanel)},notifyBoxDismiss:function(e){Tools.removeArray(GameApp.dataManager.globalData.allBoxArr,this._mipBoxGroup[parseInt(e)]),this._mipBoxGroup[parseInt(e)].destroy()},dropBoom:function(e,a){e=e.div(204).mul(10240),a=10240*a/204;for(var t=[],i=0;i<10;i++)t.push(Tools.pointOfRandom(e,a/2,0));this.dropItBoom(t,0)},dropItBoom:function(e,a){var t=this;if(a>=e.length)GameApp.eventManager.emit(EventNames.EVENT_NOTYFY_BOOM_DISMISS);else{var i=Tools.randomNum(0,2,!0);this.node.runAction(cc.sequence(cc.delayTime(i),cc.callFunc(function(){GameApp.uiManager.showGameObject("Boom",function(t){t.setPosition(e[a]),t.children[0].getComponent(sp.Skeleton).setAnimation(0,"animation",!0),t.children[0].runAction(cc.sequence(cc.moveBy(1,cc.v2(0,-220)),cc.fadeOut(0))),t.children[1].runAction(cc.sequence(cc.delayTime(1),cc.callFunc(function(){GameApp.audioManager.playEffect("boom");var e=t.getComponent(cc.PhysicsBoxCollider);e.enabled=!0;var a=t.children[1].getComponent(sp.Skeleton);a.setAnimation(0,"boom1",!1),a.setCompleteListener(function(){e.enabled=!1,t.destroy()})})))},t.boomPanel),t.dropItBoom(e,++a)})))}},initMapShow:function(){var e=this;GameApp.dataManager.globalData.allRoleArr=[],GameApp.dataManager.globalData.allGunArr=[];var a=this.tiledMap.getLayer("wall");this.tiledMap.getObjectGroup("dynamic")._objects.forEach(function(t){var i=cc.instantiate(e.objectPrefab);i.getComponent(cc.Sprite).spriteFrame=e.mapAtlas.getSpriteFrame(t.name.split(".")[0]),i.parent=e.allColliderNode;var n=a.getPositionAt(e.getTilePos(cc.v2(t.x,t.y)));i.setPosition(n);var o=e.allObjectNode.convertToNodeSpaceAR(i.convertToWorldSpaceAR(cc.v2(0,0)));i.parent=e.allObjectNode,i.setPosition(o)}),this.tiledMap.getObjectGroup("collision")._objects.forEach(function(a){var t=cc.instantiate(e.colliderPrefab),i=t.getComponent(cc.PhysicsBoxCollider);i.size=cc.size(a.width,a.height),i.offset=cc.v2(a.width/2,-a.height/2),i.apply(),e.allColliderNode.addChild(t),t.setPosition(cc.v2(a.x,a.y)),i.tag=Tags.collider})},showParatrooperPlayer:function(e,a){var t=this;GameApp.uiManager.showGameObject("ParatrooperPlayer",function(i){var n=i.getComponent("ParatrooperPlayer");n.init(t.enemySpawnPosGroupNode.children),GameApp.uiManager.getUI("GameUI").getComponent("GameUI").joystick.getComponent("Joystick").player=n;var o=0,s=0;0==e?(o=(t.enemySpawnPosGroupNode.children[3].x-t.enemySpawnPosGroupNode.children[0].x)*a-t.enemySpawnPosGroupNode.children[3].x,s=(t.enemySpawnPosGroupNode.children[3].y-t.enemySpawnPosGroupNode.children[0].y)*a-t.enemySpawnPosGroupNode.children[3].y):(o=(t.enemySpawnPosGroupNode.children[1].x-t.enemySpawnPosGroupNode.children[2].x)*a-t.enemySpawnPosGroupNode.children[1].x,s=(t.enemySpawnPosGroupNode.children[1].y-t.enemySpawnPosGroupNode.children[2].y)*a-t.enemySpawnPosGroupNode.children[1].y),i.setPosition(o,s)},this.paratrooperNode)},showParatrooperEnemy:function(e,a){var t=this;GameApp.uiManager.showGameObject("ParatrooperEnemy",function(i){i.getComponent("ParatrooperEnemy").init(t.enemySpawnPosGroupNode.children);var n=0,o=0;0==e?(n=(t.enemySpawnPosGroupNode.children[3].x-t.enemySpawnPosGroupNode.children[0].x)*a-t.enemySpawnPosGroupNode.children[3].x,o=(t.enemySpawnPosGroupNode.children[0].y-t.enemySpawnPosGroupNode.children[3].y)*a-t.enemySpawnPosGroupNode.children[0].y):(n=(t.enemySpawnPosGroupNode.children[1].x-t.enemySpawnPosGroupNode.children[2].x)*a-t.enemySpawnPosGroupNode.children[1].x,o=(t.enemySpawnPosGroupNode.children[1].y-t.enemySpawnPosGroupNode.children[2].y)*a-t.enemySpawnPosGroupNode.children[1].y),i.setPosition(n,o);var s=cc.v2(0,10).rotate(cc.misc.radiansToDegrees(Tools.randomNum(0,360)));i.runAction(cc.repeatForever(cc.moveBy(.1,s)))},this.paratrooperNode)},showCloud:function(e){var a=this,t=2;e&&(t=1),GameApp.uiManager.mapCamera.zoomRatio=.3;var i=.3/(3.6+3*t)/100*5,n=cc.sequence(cc.callFunc(function(){GameApp.uiManager.mapCamera.zoomRatio>=.8?GameApp.uiManager.mapCamera.zoomRatio=.8:GameApp.uiManager.mapCamera.zoomRatio+=i}),cc.delayTime(.05)).repeatForever();this.cloudNode.runAction(n),t=t||2,this.cloudNode.runAction(cc.sequence(cc.callFunc(function(){a.cloudNode.children[0].active=!0}),cc.delayTime(.3),cc.callFunc(function(){GameApp.audioManager.playEffect("skydivingBegin",null,1),a.cloudNode.children[1].active=!0}),cc.delayTime(.3),cc.callFunc(function(){a.cloudNode.children[2].active=!0}),cc.delayTime(.3),cc.callFunc(function(){a.cloudNode.children[3].active=!0}),cc.delayTime(t),cc.callFunc(function(){GameApp.audioManager.playEffect("skydivingWind",null,2),a.cloudNode.children[0].active=!1}),cc.delayTime(.3),cc.callFunc(function(){a.cloudNode.children[1].active=!0}),cc.delayTime(.3),cc.callFunc(function(){a.cloudNode.children[2].active=!0}),cc.delayTime(.3),cc.callFunc(function(){a.cloudNode.children[3].active=!0}),cc.delayTime(t),cc.callFunc(function(){a.cloudNode.children[0].active=!1}),cc.delayTime(.3),cc.callFunc(function(){a.cloudNode.children[1].active=!1}),cc.delayTime(.3),cc.callFunc(function(){a.cloudNode.children[2].active=!0}),cc.delayTime(.3),cc.callFunc(function(){a.cloudNode.children[3].active=!0}),cc.delayTime(t),cc.callFunc(function(){a.cloudNode.children[0].active=!1}),cc.delayTime(.3),cc.callFunc(function(){a.cloudNode.children[1].active=!1}),cc.delayTime(.3),cc.callFunc(function(){a.cloudNode.children[2].active=!1}),cc.delayTime(.3),cc.callFunc(function(){a.cloudNode.children[3].active=!0}),cc.delayTime(t),cc.callFunc(function(){a.gameBegin(e)})))},gameBegin:function(e){var a=this;GameApp.dataManager.globalData.isInGame=!0,this.cloudNode.destroy(),GameApp.uiManager.mapCamera.zoomRatio=.8,GameApp.audioManager.playEffect("skydivingToGround",null,1),GameApp.eventManager.emit(EventNames.EVENT_GAME_BEGIN);var t=this.paratrooperNode.children[0].position;this.paratrooperNode.destroyAllChildren(),this.showGun(),this.showPlayer(t),e?this.node.runAction(cc.sequence(cc.delayTime(5),cc.callFunc(function(){a.showEnemy()}))):this.showEnemy()},showGun:function(){var e=this,a=this.tiledMap.getLayer("wall");this.tiledMap.getObjectGroup("grass")._objects.forEach(function(t){var i=cc.instantiate(e.groundItemPrefab);i.parent=e.allColliderNode;var n=a.getPositionAt(e.getTilePos(cc.v2(t.x,t.y)));i.setPosition(n);var o=e.allGunNode.convertToNodeSpaceAR(i.convertToWorldSpaceAR(cc.v2(0,0)));i.parent=e.allGunNode,i.setPosition(o);var s={_type:ItemType.weapon,_kind:Tools.randomNum(0,5)};i.getComponent("GroundItem").init(s),GameApp.dataManager.globalData.allGunArr.push(i)}),this.otherGunPos.children.forEach(function(a){var t=cc.instantiate(e.groundItemPrefab),i=e.allGunNode.convertToNodeSpaceAR(a.convertToWorldSpaceAR(cc.v2(0,0)));t.parent=e.allGunNode,t.setPosition(i);var n={_type:ItemType.weapon,_kind:Tools.randomNum(0,5)};t.getComponent("GroundItem").init(n),GameApp.dataManager.globalData.allGunArr.push(t)})},getTilePos:function(e){var a=this.tiledMap.node.getContentSize(),t=this.tiledMap.getTileSize(),i=Math.floor(e.x/t.width),n=Math.floor((a.height-e.y)/t.height);return cc.v2(i,n)},showPlayer:function(e){GameApp.uiManager.showGameObject("Player",function(a){a.setPosition(e);var t=a.getComponent("Player");GameApp.uiManager.getUI("GameUI").getComponent("GameUI").joystick.getComponent("Joystick").player=t,t.init(),GameApp.dataManager.globalData.allRoleArr.push(t)},this.allObjectNode)},showEnemy:function(){for(var e=this,a=[],t=this.enemySpawnPosGroupNode.children,i=0;i<30;i++)a.push(cc.v2(Tools.randomNum(t[0].x,t[1].x),Tools.randomNum(t[2].y,t[0].y)));for(var n=Tags.enemy,o=0;o<a.length;o++)o+1!=GameApp.dataManager.userData.choosedSkinId&&GameApp.uiManager.showGameObject("Enemy",function(t){t.getComponent(cc.PhysicsBoxCollider).tag=n++,t.setPosition(a[o]);var i=t.getComponent("Enemy");i.init(o+1,GameApp.dataManager.jsonData.RobotName[o]),GameApp.dataManager.globalData.inGameKillNum.push({_killNum:0,_belongName:GameApp.dataManager.jsonData.RobotName[o]}),GameApp.dataManager.globalData.allRoleArr.push(i),e.readyToSort=!0},this.allObjectNode);GameApp.eventManager.emit(EventNames.EVENT_SHOW_ALLROLENUM_UI),GameApp.eventManager.emit(EventNames.EVENT_UPDATE_RANK_SHOW)},sortAll:function(){var e=this.allObjectNode.children.concat(),a=[],t=[];for(var i in e)GameApp.uiManager.isInMapSight(e[i])&&(a.push({y:e[i].y,index:i}),t.push(i));for(var n in a.sort(function(e,a){return a.y-e.y}),a)e[a[n].index].setSiblingIndex(a[n])}}),cc._RF.pop()},{}],GameUI:[function(e,a,t){"use strict";cc._RF.push(a,"22560Ckc7ZILqFwWW4hovUj","GameUI");var i=e("Utils");cc.Class({extends:cc.Component,properties:{joystick:{default:null,type:cc.Node,tooltip:"\u6447\u6746\u7684\u811a\u672c"},btnArr:{default:[],type:[cc.Node]},soundNode:cc.Node,gameUIPanel:cc.Node,shootBtn:cc.Node,reloadBtnNode:cc.Node,amoUI:cc.Label,allRoleNumUI:cc.Label,weaponBtnNode:cc.Node,mipmapNode:cc.Node,prepareTopNode:cc.Node,countDownSpGroup:[cc.SpriteFrame],rankGroup:[cc.Node],_shootFlag:!1,_shootTimer:0,_reloadFlag:!1,_reloadTimer:0,_theGameBegin:!1,_protectTimeCountDown:8,_onceCountDownAnim:!1,_onceGasCountDownAnim:!1,gasNodeUI:cc.Node,safeNode:cc.Node,gasNode:cc.Node,boomNode:cc.Node,_gasState:0,_gasCountDownTimer:40,_gasCountDownInterval:20,safeCircle:150,_boxCountDownTimer:20,_boxCountDownInterval:50,_dropTime:0,_boomCountDownTimer:30,_boomCountDownInterval:50,tipNode:cc.Node,flashBtn:cc.Node,flashCDUI:cc.Label,healthBtn:cc.Node,healthCDUI:cc.Label,_flashTimer:0,_flashInCD:!1,_healthTimer:0,_healthInCD:!1,mipNode:cc.Node,_mipBoxGroup:[],boxAttrNodeGroup:[cc.Node],equipAttrNodeGroup:[cc.Node]},onLoad:function(){this._gasState=0,this._gasCountDownTimer=40,this._gasCountDownInterval=20,this.safeCircle=150,this._boxCountDownTimer=20,this._boxCountDownInterval=50,this._boomCountDownTimer=30,this._boomCountDownInterval=50,GameApp.eventManager.on(EventNames.EVENT_UPDATE_AMO_SHOW,this.updateAmoShow.bind(this)),GameApp.eventManager.on(EventNames.EVENT_SHOW_GUN_UI,this.updateGunUIShow.bind(this)),GameApp.eventManager.on(EventNames.EVENT_SHOW_RELOAD_UI,this.updateReloadUIShow.bind(this)),GameApp.eventManager.on(EventNames.EVENT_SHOW_ALLROLENUM_UI,this.updateAllRoleNumUIShow.bind(this)),GameApp.eventManager.on(EventNames.EVENT_GAME_BEGIN,this.gameBegin.bind(this)),GameApp.eventManager.on(EventNames.EVENT_UPDATE_MIPMAP_PLAYER,this.updateMipmapPlayer.bind(this)),GameApp.eventManager.on(EventNames.EVENT_UPDATE_RANK_SHOW,this.updateRankShow.bind(this)),GameApp.eventManager.on(EventNames.EVENT_NOTYFY_BOX_DISMISS,this.notifyBoxDismiss.bind(this)),GameApp.eventManager.on(EventNames.EVENT_NOTYFY_BOOM_DISMISS,this.notifyBoomDismiss.bind(this)),GameApp.eventManager.on(EventNames.EVENT_SHOW_BOXITEM,this.showBoxItemUI.bind(this)),this.shootBtn.on(cc.Node.EventType.TOUCH_START,this.onTouchBegin,this),this.shootBtn.on(cc.Node.EventType.TOUCH_END,this.onTouchLeave,this),this.shootBtn.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchLeave,this),this.weaponBtnNode.children[0].runAction(cc.rotateBy(.2,90).repeatForever()),GameApp.dataManager.userData.isFirstPlay&&(this.tipNode.active=!0,this.tipNode.children[0].runAction(cc.sequence(cc.moveTo(.5,cc.v2(0,10)),cc.moveTo(.5,cc.v2(0,-10))).repeatForever())),this.updateSoundBtnShow()},onDestroy:function(){GameApp.eventManager.removeListener(EventNames.EVENT_UPDATE_AMO_SHOW),GameApp.eventManager.removeListener(EventNames.EVENT_SHOW_GUN_UI),GameApp.eventManager.removeListener(EventNames.EVENT_SHOW_RELOAD_UI),GameApp.eventManager.removeListener(EventNames.EVENT_SHOW_ALLROLENUM_UI),GameApp.eventManager.removeListener(EventNames.EVENT_GAME_BEGIN),GameApp.eventManager.removeListener(EventNames.EVENT_UPDATE_MIPMAP_PLAYER),GameApp.eventManager.removeListener(EventNames.EVENT_UPDATE_RANK_SHOW),GameApp.eventManager.removeListener(EventNames.EVENT_NOTYFY_BOX_DISMISS),GameApp.eventManager.removeListener(EventNames.EVENT_NOTYFY_BOOM_DISMISS),GameApp.eventManager.removeListener(EventNames.EVENT_SHOW_BOXITEM)},init:function(e,a,t){GameApp.uiManager.showGame("GameMap",function(i){i.getComponent("GameMap").init(e,a,t)}),GameApp.uiManager.showToast("\u843d\u5730\u540e\u8bf7\u5c3d\u5feb\u5bfb\u627e\u67aa\u68b0")},gameBegin:function(){this._theGameBegin=!0,this.gameUIPanel.active=!0},update:function(e){this._shootTimer-=e,this._shootFlag&&this._shootTimer<0&&!this._reloadFlag&&(this._shootTimer=GameApp.dataManager.globalData.shootInterval,this.shoot()),this._reloadFlag&&(this._reloadTimer-=e,this._reloadFlag&&this._reloadTimer<0&&(this._reloadFlag=!1,GameApp.dataManager.reloadAmo())),this.gasCountDown(e),this.boxCountDown(e),this.boomCountDown(e),this.duleFlash(e),this.duleHealth(e),this._theGameBegin&&this.protectCcountDown(e)},duleFlash:function(e){this._flashTimer-=e,this._flashTimer<0&&(this._flashInCD=!1,this.flashBtn.children[0].active=!0,this.flashBtn.children[1].active=!1),this._flashInCD?this.flashCDUI.string=Math.floor(this._flashTimer):this.flashCDUI.string=""},duleHealth:function(e){this._healthTimer-=e,this._healthTimer<0&&(this._healthInCD=!1,this.healthBtn.children[0].active=!0,this.healthBtn.children[1].active=!1),this._healthInCD?this.healthCDUI.string=Math.floor(this._healthTimer):this.healthCDUI.string=""},protectCcountDown:function(e){this._protectTimeCountDown-=e,this._protectTimeCountDown<6&&(this.prepareTopNode.children[1].active=!0,this.protectCcountDownAnim(),this.prepareTopNode.children[1].getComponent(cc.Sprite).spriteFrame=this.countDownSpGroup[Math.floor(this._protectTimeCountDown-1)]),Math.floor(this._protectTimeCountDown)<=0&&(GameApp.eventManager.emit(EventNames.EVENT_THEGAMESTART),this.prepareTopNode.active=!1,this._theGameBegin=!1)},protectCcountDownAnim:function(){var e=this;if(!this._onceCountDownAnim){this._onceCountDownAnim=!0,GameApp.audioManager.playEffect("waitSceneCutDown");var a=cc.sequence(cc.scaleTo(.2,1.5),cc.scaleTo(.3,1),cc.delayTime(.5),cc.callFunc(function(){e._onceCountDownAnim=!1}));this.prepareTopNode.children[1].runAction(a)}},gasCountDown:function(e){switch(this._gasCountDownTimer-=e,this._gasState){case 0:this.quietGasState();break;case 1:this.refreshCircleAndCD(e);break;case 2:this.reduceCircleAndTip(e)}},quietGasState:function(){if(this._gasCountDownTimer<16){this.gasNodeUI.children[0].active=!0,this.gasNodeUI.children[1].active=!0,this.gasNodeUI.children[2].active=!1,this.gasNodeUI.children[3].getComponent(cc.RichText).string="\u6bd2\u6c14\u5012\u8ba1\u65f6",this.gasNodeUI.active=!0,this.safeNode.children[0].active=!0,this.safeNode.children[0].width=this.safeNode.children[0].height=this.safeCircle+5;var e=this.gasNode.width;300==e&&(e=204),0==this.safeCircle?this.safeNode.setPosition(this.gasNode.position):this.safeNode.setPosition(Tools.pointOfRandom(this.safeNode.position,e/2,this.safeCircle/2)),this.safeNode.width=this.safeNode.height=this.safeCircle,GameApp.audioManager.playEffect("gasAlert"),GameApp.audioManager.playEffect("noticeGasComing"),this.safeNode.children[0].runAction(cc.sequence(cc.spawn(cc.scaleTo(0,1),cc.fadeIn(0)),cc.spawn(cc.scaleTo(1,1.3),cc.fadeOut(1))).repeat(2)),this._gasState=1}},refreshCircleAndCD:function(e){this.gasNodeUI.children[0].getComponent(cc.RichText).string=Math.floor(this._gasCountDownTimer)+"\u79d2",this._gasCountDownTimer<0&&(this.gasNodeUI.children[0].active=!1,this.gasNodeUI.children[1].active=!1,this.gasNodeUI.children[2].active=!0,this.gasNodeUI.children[3].getComponent(cc.RichText).string="<color=#0fffff>\u6bd2\u6c14\u6b63\u5728\u6269\u6563</color>",GameApp.audioManager.playEffect("noticeGasDiffusion"),this.gasNodeUI.children[2].runAction(cc.sequence(cc.fadeOut(.3),cc.fadeIn(.5)).repeatForever()),this._gasState=2,GameApp.eventManager.emit(EventNames.EVENT_UPDATE_GAS_SHOW,2,{safeCircle:this.safeCircle,safePosition:this.safeNode.position}))},reduceCircleAndTip:function(e){if(!(this.safeCircle<0)){if(this.gasNode.width<=this.safeCircle)return this._gasCountDownTimer=this._gasCountDownInterval,this.gasNode.width=this.gasNode.height=this.safeCircle,this.safeCircle-=50,this.gasNodeUI.active=!1,this.safeCircle<0?void GameApp.audioManager.playEffect("noticeGasNoWay"):void(this._gasState=0);if(this.gasNode.width-=10*e,this.gasNode.height-=10*e,0!=this.safeCircle)if(Tools.isIntersect(this.gasNode.position,this.gasNode.width/2,this.safeNode.position,this.safeCircle/2)){if(Math.abs(this.gasNode.width-this.safeCircle)>.05){var a=(this.gasNode.y-this.safeNode.y)/(this.gasNode.x-this.safeNode.x),t=10*e*parseFloat(Math.sqrt(1/(a*a+1)));this.gasNode.x+=1*(this.gasNode.x<this.safeNode.x?1:-1)*t,this.gasNode.y=a*(this.gasNode.x-this.safeNode.x)+this.safeNode.y}}else;}},boxCountDown:function(e){this._dropTime>=2||(this._boxCountDownTimer-=e,this._boxCountDownTimer<0&&(this._boxCountDownTimer=this._boxCountDownInterval,this.dropBox()))},boomCountDown:function(e){this._dropTime>=2||(this._boomCountDownTimer-=e,this._boomCountDownTimer<0&&(this._boomCountDownTimer=this._boomCountDownInterval,this.dropBoom()))},dropBox:function(){var e=this;GameApp.audioManager.playEffect("noticeExpShow");for(var a=[10,6,3,2],t=function(a){GameApp.uiManager.showGameObject("MipBox",function(t){e._mipBoxGroup.push(t);var i=Tools.pointOfRandom(e.safeNode.position,e.safeCircle/2,0);t.setPosition(i);var n=e.mipNode.convertToNodeSpaceAR(t.convertToWorldSpaceAR(cc.v2(.5,.5)));GameApp.eventManager.emit(EventNames.EVENT_DROP_BOX,n,e._dropTime+""+a),t.children[0].runAction(cc.sequence(cc.scaleTo(1,4),cc.scaleTo(0,1),cc.fadeOut(0)).repeat(2))},e.mipNode)},i=0;i<a[this._dropTime];i++)t(i);this._dropTime++},dropBoom:function(){this.safeCircle<=0||(GameApp.audioManager.playEffect("noticeBoomComing"),this.boomNode.active=!0,this.boomNode.setPosition(Tools.pointOfRandom(this.safeNode.position,this.safeCircle/2,this.boomNode.width/2)),GameApp.eventManager.emit(EventNames.EVENT_DROP_BOOM,this.mipNode.convertToNodeSpaceAR(this.boomNode.convertToWorldSpaceAR(cc.v2(.5,.5))),this.boomNode.width))},notifyBoxDismiss:function(e){this._mipBoxGroup[parseInt(e)].destroy()},notifyBoomDismiss:function(e){this.boomNode.active=!1},showBoxItemUI:function(){var e=this;this.boxAttrNodeGroup.forEach(function(e){e.active=!1});var a=Tools.randomNum(3,4);Tools.getRandomAmountElementUnRepeat([0,1,2,3],a).nodeArr.forEach(function(a){var t=GameApp.dataManager.globalData.getItemAttrArr[a].rank;if(3==t)e.boxAttrNodeGroup[a].active=!1;else{var i={rank:t+1,item:ItemAttr[a][t]};e.boxAttrNodeGroup[a].children[0].getComponent(cc.Label).string=i.rank+"\u7ea7",e.boxAttrNodeGroup[a].children[1].getComponent(cc.Label).string=i.item.des,e.boxAttrNodeGroup[a].children[2].runAction(cc.rotateBy(.2,90).repeatForever()),e.boxAttrNodeGroup[a].active=!0}})},boxItemUIBtnClick:function(e,a){var t=parseInt(a)-1;GameApp.dataManager.equipBoxItem(t),this.boxAttrNodeGroup.forEach(function(e){e.active=!1}),this.updateEquipShowUI()},updateEquipShowUI:function(){var e=GameApp.dataManager.getEquipShowAttr();for(var a in this.equipAttrNodeGroup)null==e[a]?this.equipAttrNodeGroup[a].active=!1:(this.equipAttrNodeGroup[a].children[0].getComponent(cc.Label).string=e[a].rank+"\u7ea7",this.equipAttrNodeGroup[a].children[1].getComponent(cc.Label).string=e[a].item.des,this.equipAttrNodeGroup[a].active=!0)},onTouchBegin:function(e){this._shootFlag=!0},onTouchLeave:function(e){this._shootFlag=!1,GameApp.eventManager.emit(EventNames.EVENT_AIM,!1)},shoot:function(){GameApp.eventManager.emit(EventNames.EVENT_AIM,!0),GameApp.eventManager.emit(EventNames.EVENT_PLAYER_SHOOT)},updateAmoShow:function(){this.amoUI.string=GameApp.dataManager.globalData.curAmoNum,GameApp.eventManager.emit(EventNames.EVENT_UPDATE_TOPBAR_SHOW)},updateGunUIShow:function(e,a){a&&(this.weaponBtnNode.getComponent(cc.Sprite).spriteFrame=GameApp.uiManager.commonAtlas.getSpriteFrame("ui_weapon_"+a.weaponid),this.weaponBtnNode.children[1].children[0].getComponent(cc.Label).string=a.name),this.weaponBtnNode.active=e},updateReloadUIShow:function(e){this.reloadBtnNode.active=e},updateAllRoleNumUIShow:function(){var e=GameApp.dataManager.globalData.allRoleArr.length;1==e&&(GameApp.dataManager.globalData.allRoleArr[0]._pbc.tag==Tags.player&&null==GameApp.uiManager.getPopup("OverPopup")&&GameApp.uiManager.showPopup("OverPopup",function(a){a.getComponent("OverPopup").init(!0,e)}));this.allRoleNumUI.string=e+"\u4eba\u5b58\u6d3b"},updateMipmapPlayer:function(e){this.mipmapNode.children[2].setPosition(e)},updateMipmapBox:function(e){},updateRankShow:function(){var e=GameApp.dataManager.globalData.inGameKillNum.concat();e.sort(function(e,a){return a._killNum-e._killNum});for(var a=0;a<5;a++){var t=e[a]._belongName;t==GameApp.dataManager.userData.playerName&&(t="<color=#0fffff>"+e[a]._belongName+"</color>"),this.rankGroup[a].children[0].getComponent(cc.RichText).string=t,this.rankGroup[a].children[1].getComponent(cc.Label).string=e[a]._killNum}},reloadBtnClick:function(){GameApp.audioManager.playEffect("click"),this._reloadFlag||(this._reloadTimer=GameApp.dataManager.globalData.reloadInterval,this._reloadFlag=!0,GameApp.eventManager.emit(EventNames.EVENT_PLAYER_RELOAD))},weaponBtnClick:function(){GameApp.audioManager.playEffect("click"),GameApp.eventManager.emit(EventNames.EVENT_PICKUP_WEAPON)},flashBtnClick:function(){this._flashInCD?GameApp.uiManager.showToast("\u6280\u80fd\u6b63\u5728\u51b7\u5374\u4e2d"):(this.tipNode.active=!1,GameApp.eventManager.emit(EventNames.EVENT_FLASH),this.flashBtn.children[0].active=!1,this.flashBtn.children[1].active=!0,this._flashTimer=GameApp.dataManager.getSkillCD(),this._flashInCD=!0)},healthBtnClick:function(){GameApp.audioManager.playEffect("click"),this._healthInCD?GameApp.uiManager.showToast("\u6280\u80fd\u6b63\u5728\u51b7\u5374\u4e2d"):(GameApp.eventManager.emit(EventNames.EVENT_RESUME_HEALTH),this.healthBtn.children[0].active=!1,this.healthBtn.children[1].active=!0,this._healthTimer=GameApp.dataManager.getSkillCD(),this._healthInCD=!0)},backBtnClick:function(){GameApp.uiManager.showUI("LoginUI")},soundBtnClick:function(){GameApp.audioManager.playEffect("click");var e=!GameApp.audioManager._effectOn;GameApp.audioManager.setEffect(e),this.updateSoundBtnShow()},updateSoundBtnShow:function(){this.soundNode.children[0].active=GameApp.audioManager._effectOn,this.soundNode.children[1].active=!GameApp.audioManager._effectOn},updateRecordBtnShow:function(){this.btnArr[0].active=GameApp.dataManager.globalData.recordState==RecordState.RECORD,this.btnArr[1].active=GameApp.dataManager.globalData.recordState==RecordState.PAUSE||GameApp.dataManager.globalData.recordState==RecordState.READY},recordBtnClick:function(){GameApp.audioManager.playEffect("click");var e=this;switch(GameApp.dataManager.globalData.recordState){case RecordState.RECORD:i.pauseRecord(function(){GameApp.dataManager.changeRecordState(RecordState.PAUSE),e.updateRecordBtnShow()});break;case RecordState.PAUSE:i.resumeRecord(function(){GameApp.dataManager.changeRecordState(RecordState.RECORD),e.updateRecordBtnShow()});break;case RecordState.READY:console.log("\u5f55\u5c4fbug\u4e86")}}}),cc._RF.pop()},{Utils:"Utils"}],GiftPopup:[function(e,a,t){"use strict";cc._RF.push(a,"97122PwMglKv7Cq3WJKcLoh","GiftPopup");var i=e("Utils");cc.Class({extends:cc.Component,properties:{closeBtnNode:cc.Node,sureBtnNode:cc.Node,nextUIName:"",_popupType:1,titleUI:cc.Label,coinSp:cc.Node,coinInfo:cc.Node,speedSp:cc.Node,speedInfo:cc.Node,onceClick:{default:!0,visible:!1}},onLoad:function(){var e=this;this.node.runAction(cc.sequence(cc.delayTime(3),cc.callFunc(function(){e.closeBtnNode.active=!0}))),Tools.scaleUpAndDowm(this.sureBtnNode)},init:function(e,a){this.nextUIName=e,this._popupType=a,1==a?(this.titleUI.string="\u91d1\u5e01\u5927\u793c\u5305",this.coinSp.active=!0,this.coinInfo.active=!0):2==a&&(this.titleUI.string="\u52a0\u901f\u5927\u793c\u5305",this.speedSp.active=!0,this.speedInfo.active=!0)},sureBtnClick:function(){if(this.onceClick){this.onceClick=!1,GameApp.audioManager.playEffect("click");var e=this;if(window.tt)i.addVideo("addVideo",function(){e.onceClick=!0,1==e._popupType?(GameApp.uiManager.showToast("\u83b7\u5f97500\u91d1\u5e01"),GameApp.dataManager.addCoin(500),e.closeBtnClick()):2==e._popupType&&(GameApp.uiManager.showToast("\u83b7\u5f97\u52a0\u901f"),e.closeBtnClick2(!0))},function(a){e.onceClick=!0,a?GameApp.uiManager.showToast(a):GameApp.uiManager.showToast("\u672a\u770b\u5b8c\u89c6\u9891\uff01")});else if(1==e._popupType){if(window.wx)return GameApp.uiManager.showToast("\u6682\u672a\u5f00\u653e\uff01"),void e.closeBtnClick();GameApp.uiManager.showToast("\u798f\u5229,\u83b7\u5f97500\u91d1\u5e01"),GameApp.dataManager.addCoin(500),e.closeBtnClick()}else if(2==e._popupType){if(window.wx)return GameApp.uiManager.showToast("\u6682\u672a\u5f00\u653e\uff01"),void e.closeBtnClick2(!0);GameApp.uiManager.showToast("\u798f\u5229,\u83b7\u5f97\u52a0\u901f"),e.closeBtnClick2(!0)}}},closeBtnClick:function(){1==this._popupType?(GameApp.audioManager.playEffect("click"),GameApp.uiManager.closePopup("GiftPopup"),GameApp.uiManager.showUI(this.nextUIName)):2==this._popupType&&this.closeBtnClick2(!1)},closeBtnClick2:function(e){GameApp.audioManager.playEffect("click"),GameApp.uiManager.closePopup("GiftPopup"),GameApp.uiManager.getUI("PrepareUI").getComponent("PrepareUI").showPlaneUI(e)}}),cc._RF.pop()},{Utils:"Utils"}],GroundItem:[function(e,a,t){"use strict";cc._RF.push(a,"3ac97Fj4dlJab4T+HVu8epF","GroundItem"),cc.Class({extends:cc.Component,properties:{itemType:{default:{}}},onLoad:function(){this.getComponent(cc.PhysicsBoxCollider).tag=Tags.item,this.doAnim()},doAnim:function(){this.node.children[0].runAction(cc.sequence(cc.fadeOut(.6),cc.fadeIn(.3)).repeatForever()),this.node.children[1].runAction(cc.sequence(cc.moveBy(.5,cc.v2(0,10)),cc.moveBy(.5,cc.v2(0,-10))).repeatForever())},init:function(e,a){e&&(this.itemType=e),this.itemType._type==ItemType.weapon?(this.node.children[2].active=!1,this.node.children[1].getComponent(cc.Sprite).spriteFrame=GameApp.uiManager.commonAtlas.getSpriteFrame("item_weapon_"+GameApp.dataManager.jsonData.WeaponData[e._kind].skinname)):(this.node.children[2].getComponent(cc.Label).string=GameApp.dataManager.jsonData.WeaponData[this.itemType._kind].name,this.node.children[2].active=!0,this.node.children[1].getComponent(cc.Sprite).spriteFrame=GameApp.uiManager.commonAtlas.getSpriteFrame("item_equip_1_valid"))}}),cc._RF.pop()},{}],GunUI:[function(e,a,t){"use strict";cc._RF.push(a,"5b571QytXtMKbQD0qJWJTvK","GunUI"),cc.Class({extends:cc.Component,properties:{},backBtnClick:function(){GameApp.audioManager.playEffect("click"),GameApp.uiManager.showUI("LoginUI")}}),cc._RF.pop()},{}],JoystickCommon:[function(e,a,t){"use strict";cc._RF.push(a,"51150qsnGhKl4PsmdrbeVCq","JoystickCommon"),t.__esModule=!0,t.default=void 0;var i={JoystickType:cc.Enum({FIXED:0,FOLLOW:1}),DirectionType:cc.Enum({FOUR:4,EIGHT:8,ALL:0}),SpeedType:cc.Enum({STOP:0,NORMAL:1,FAST:2})};t.default=i,a.exports=t.default,cc._RF.pop()},{}],Joystick:[function(e,a,t){"use strict";cc._RF.push(a,"a085ato4b5AsrP+bIxB9yZe","Joystick");var i=function(e){return e&&e.__esModule?e:{default:e}}(e("JoystickCommon"));cc.Class({extends:cc.Component,properties:{dot:{default:null,type:cc.Node,displayName:"\u6746\u5b50",tooltip:"\u6447\u6746\u64cd\u7eb5\u70b9"},ring:{default:null,type:cc.Node,displayName:"\u5e95\u90e8\u5708\u5b50",tooltip:"\u6447\u6746\u80cc\u666f\u8282\u70b9"},player:{default:null,type:cc.Node,displayName:"\u64cd\u63a7\u89d2\u8272",tooltip:"\u64cd\u63a7\u89d2\u8272"},joystickType:{default:i.default.JoystickType.FIXED,type:i.default.JoystickType,displayName:"\u89e6\u6478\u7c7b\u578b",tooltip:"\u5b9a\u6b7b\u7684\u8fd8\u662f\u968f\u89e6\u6478\u4f4d\u7f6e\u53d8\u5316\u7684"},directionType:{default:i.default.DirectionType.ALL,type:i.default.DirectionType,displayName:"\u65b9\u5411\u9650\u5236",tooltip:"\u56db\u5411\uff0c\u516b\u5411\uff0c\u4e07\u5411"},_stickPos:{default:null,type:cc.Node,tooltip:"\u6447\u6746\u6240\u5728\u4f4d\u7f6e"},_touchLocation:{default:null,type:cc.Node,tooltip:"\u89e6\u6478\u4f4d\u7f6e"}},onLoad:function(){this._radius=this.ring.width/2,this._initTouchEvent(),this.joystickType==i.default.JoystickType.FOLLOW&&(this.node.opacity=0)},_initTouchEvent:function(){this.node.on(cc.Node.EventType.TOUCH_START,this._touchStartEvent,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this._touchMoveEvent,this),this.node.on(cc.Node.EventType.TOUCH_END,this._touchEndEvent,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._touchEndEvent,this)},_touchStartEvent:function(e){if(null!=this.player&&void 0!=this.player){var a=this.node.convertToNodeSpaceAR(e.getLocation());if(this.joystickType===i.default.JoystickType.FIXED){this._stickPos=this.ring.getPosition();var t=a.sub(this.ring.getPosition()).mag();this._radius>t&&this.dot.setPosition(a)}else this.joystickType===i.default.JoystickType.FOLLOW&&(this._stickPos=a,this.node.opacity=255,this._touchLocation=e.getLocation(),this.ring.setPosition(a),this.dot.setPosition(a))}},_touchMoveEvent:function(e){if(this.joystickType===i.default.JoystickType.FOLLOW&&this._touchLocation===e.getLocation())return!1;var a=this.ring.convertToNodeSpaceAR(e.getLocation()),t=a.mag(),n=this._stickPos.x+a.x,o=this._stickPos.y+a.y,s=cc.v2(n,o).sub(this.ring.getPosition()).normalize();if(this._radius>t)this.dot.setPosition(cc.v2(n,o));else{var r=this._stickPos.x+s.x*this._radius,c=this._stickPos.y+s.y*this._radius;this.dot.setPosition(cc.v2(r,c))}null!=this.player&&void 0!=this.player&&(this.player.setSpeedType(i.default.SpeedType.FAST),this.player.setDir(s))},_touchEndEvent:function(){this.dot.setPosition(this.ring.getPosition()),this.joystickType==i.default.JoystickType.FOLLOW&&(this.node.opacity=0),null!=this.player&&void 0!=this.player&&this.player.setSpeedType(i.default.SpeedType.STOP)}}),cc._RF.pop()},{JoystickCommon:"JoystickCommon"}],JsonPath:[function(e,a,t){"use strict";cc._RF.push(a,"fdeeeZx8DNNF7H5MiqQJ5Cm","JsonPath");a.exports={SkinsData:"data/skins",WeaponData:"data/weapon",RobotName:"data/robotName"},cc._RF.pop()},{}],LaunchScript:[function(e,a,t){"use strict";cc._RF.push(a,"3bba0wL+YtCjqothlcKDRgB","LaunchScript"),cc.Class({extends:cc.Component,properties:{Player:{default:null,type:sp.Skeleton,displayName:"\u73a9\u5bb6\u52a8\u753b"}},start:function(){this.loadSkeletonDataResources()},loadSkeletonDataResources:function(){},getSkeletonDataByName:function(e){for(var a=0;a<cc.SkeletonData.length;a++){var t=cc.SkeletonData[a];if(t.name===e)return t}}}),cc._RF.pop()},{}],LoginUI:[function(e,a,t){"use strict";cc._RF.push(a,"8f722V7x2lPAZMMnHF0xOA7","LoginUI");var i=e("Utils");cc.Class({extends:cc.Component,properties:{coinUI:cc.Label,nameUI:cc.EditBox,curPlayerAnim:sp.Skeleton,onceClick:{default:!0,visible:!1},moreBtn:cc.Node,moreSprites:[cc.SpriteFrame],spriteIndex:0,activityBtnNode:cc.Node,originActivityBtnPos:null},onLoad:function(){GameApp.eventManager.on(EventNames.EVENT_SHOW_ACTIVITYBTN,this.showActivityBtn.bind(this)),GameApp.eventManager.on(EventNames.EVENT_UPDATE_COIN_SHOW,this.updateCoinShow.bind(this)),GameApp.dataManager.initSomeAttr(),GameApp.dataManager.setChoosedSkinId(GameApp.dataManager.userData.choosedSkinId),this.updateCoinShow(),this.updateNameShow(),this.initSkinShow(),this.originActivityBtnPos=this.activityBtnNode.position,this.showActivityBtn();var e=cc.sys.localStorage.getItem("EatChicken_passDays");null==e||void 0==e||""==e?(e=0,cc.sys.localStorage.setItem("EatChicken_passDays",0)):e=parseInt(e);var a=0,t=new Date;t=parseInt(t.getTime()/1e3);var n=cc.sys.localStorage.getItem("EatChicken_dailyDate");if(null==n||void 0==n||""==n)cc.sys.localStorage.setItem("EatChicken_dailyDate",t),a=1;else if(n=parseInt(n),console.log(t),console.log(n),t>=n){var o=t-n,s=Tools.toTimeString2(o);a=Math.floor(s.hour/24)+1}else console.log("\u73b0\u5728\u65f6\u95f4\u6bd4\u4e4b\u524d\u65f6\u95f4\u65e9\uff0c\u8c03\u65f6\u95f4\u4e86\uff1f"),cc.sys.localStorage.setItem("EatChicken_dailyDate",t),a=1,cc.sys.localStorage.setItem("EatChicken_passDays",0),e=0;a-e>0&&(console.log("\u6267\u884c\u4e86\u5929\u6570\u52a0\u4e00"),e+=a-e,GameApp.dataManager.globalData.curDailyGot=!1,cc.sys.localStorage.setItem("EatChicken_dailyGotState",!1),GameApp.dataManager.globalData.activeValue=0,cc.sys.localStorage.setItem("EatChicken_activeValue",GameApp.dataManager.globalData.activeValue),GameApp.dataManager.globalData.progressGifts=[0,0,0,0],cc.sys.localStorage.setItem("EatChicken_progressGifts",JSON.stringify(GameApp.dataManager.globalData.progressGifts))),cc.sys.localStorage.setItem("EatChicken_passDays",e);var r=e;0==(r%=7)&&(r=7),GameApp.dataManager.globalData.days=r,console.log(GameApp.dataManager.globalData.curDailyGot),GameApp.dataManager.globalData.curDailyGot||GameApp.uiManager.showPopup("DailyPopup"),GameApp.dataManager.globalData.recordState==RecordState.READY&&i.startRecord(function(){GameApp.dataManager.changeRecordState(RecordState.RECORD)},function(e){GameApp.uiManager.showToast("\u5df2\u5230\u5f55\u5c4f\u6700\u5927\u65f6\u957f!"),null!=e.videoPath&&""!=e.videoPath&&(GameApp.dataManager.globalData.recordPath=e.videoPath,i.recorder.stop())})},onDestroy:function(){GameApp.eventManager.removeListener(EventNames.EVENT_SHOW_ACTIVITYBTN),GameApp.eventManager.removeListener(EventNames.EVENT_UPDATE_COIN_SHOW)},soloBtnClick:function(){GameApp.audioManager.playEffect("click"),GameApp.uiManager.showPopup("GiftPopup",function(e){e.getComponent("GiftPopup").init("PrepareUI",1)})},onNameChanged:function(e){GameApp.dataManager.setPlayerName(Tools.getRandomElement(GameApp.dataManager.globalData.playerNameArr)),this.updateNameShow()},updateCoinShow:function(){this.coinUI.string=GameApp.dataManager.userData.coinNum},updateNameShow:function(){this.nameUI.node.children[0].getComponent(cc.Label).string=GameApp.dataManager.userData.playerName},initSkinShow:function(){var e=this;GameApp.dataManager.userData.choosedSkinId<21?(this.curPlayerAnim.skeletonData=GameApp.uiManager.normalSkinData,this.curPlayerAnim.setSkin(GameApp.dataManager.getSkinDataById(GameApp.dataManager.getChoosedSkinId()).skinname)):this.curPlayerAnim.skeletonData=GameApp.uiManager.advanceSkinDataGroup[GameApp.dataManager.userData.choosedSkinId-21],GameApp.dataManager.userData.choosedSkinId<21?this.curPlayerAnim.setAnimation(0,"await",!0):(this.curPlayerAnim.setAnimation(0,"await_main_1",!1),this.curPlayerAnim.setCompleteListener(function(){e.curPlayerAnim.setAnimation(0,"await_main_"+Tools.randomNum(1,3),!1)}))},coinBtnClick:function(){if(window.wx)GameApp.uiManager.showToast("\u6682\u672a\u5f00\u653e\uff01");else if(this.onceClick){this.onceClick=!1,GameApp.audioManager.playEffect("click");var e=this;window.tt?i.addVideo("addVideo",function(){e.onceClick=!0,GameApp.uiManager.showToast("\u83b7\u5f97500\u91d1\u5e01"),GameApp.dataManager.addCoin(500),e.updateCoinShow()},function(a){e.onceClick=!0,a?GameApp.uiManager.showToast(a):GameApp.uiManager.showToast("\u672a\u770b\u5b8c\u89c6\u9891\uff01")}):(e.onceClick=!0,GameApp.uiManager.showToast("\u975e\u771f\u673a,\u83b7\u5f97500\u91d1\u5e01"),GameApp.dataManager.addCoin(500),e.updateCoinShow())}},skinBtnClick:function(){GameApp.audioManager.playEffect("click"),GameApp.uiManager.showUI("SkinUI")},boxBtnClick:function(){GameApp.audioManager.playEffect("click"),GameApp.uiManager.showUI("BoxUI")},rankBtnClick:function(){GameApp.audioManager.playEffect("click"),GameApp.uiManager.showUI("RankUI")},weaponBtnClick:function(){GameApp.audioManager.playEffect("click"),GameApp.uiManager.showUI("GunUI")},shopBtnClick:function(){GameApp.audioManager.playEffect("click")},shareBtnClick:function(){GameApp.audioManager.playEffect("click"),i.shareFromHomePage(function(){GameApp.uiManager.showToast("\u611f\u8c22\u60a8\u7684\u652f\u6301\uff0c\u8d60\u900150\u91d1\u5e01"),GameApp.dataManager.addCoin(50)},function(){GameApp.uiManager.showToast("\u5206\u4eab\u5931\u8d25!")})},moreGameBtnClick:function(){(this.showActivityBtn(),window.tt)&&("ios"!==tt.getSystemInfoSync().platform&&tt.showMoreGamesModal({appLaunchOptions:[{appId:"ttXXXXXX",query:"foo=bar&baz=qux",extraData:{}}],success:function(e){console.log("success",e.errMsg)},fail:function(e){console.log("fail",e.errMsg)}}))},showActivityBtn:function(){var e=this;this.activityBtnNode.getComponent(cc.Button).interactable=!0,this.activityBtnNode.stopAllActions(),this.activityBtnNode.runAction(cc.sequence(cc.moveTo(.2,cc.v2(this.originActivityBtnPos).add(cc.v2(90,0))).easing(cc.easeBackOut()),cc.callFunc(function(){e.activityBtnNode.runAction(cc.sequence(cc.moveBy(.8,cc.v2(20,0)).easing(cc.easeBounceOut(4)),cc.moveBy(.2,cc.v2(-20,0)),cc.moveBy(.5,cc.v2(20,0)).easing(cc.easeBounceOut(4)),cc.moveBy(.2,cc.v2(-20,0)),cc.delayTime(1)).repeatForever())})))},activityBtnClick:function(){GameApp.audioManager.playEffect("click"),this.activityBtnNode.getComponent(cc.Button).interactable=!1,this.activityBtnNode.stopAllActions(),this.activityBtnNode.runAction(cc.moveTo(.2,this.originActivityBtnPos)),GameApp.uiManager.showPopup("ActivityPopup")}}),cc._RF.pop()},{Utils:"Utils"}],OpenBoxPopup:[function(e,a,t){"use strict";cc._RF.push(a,"9a84fG3r59NkL5igHRQlhjW","OpenBoxPopup");var i=e("Utils");cc.Class({extends:cc.Component,properties:{boxAnim:sp.Skeleton,delayShowPanel:cc.Node,_itemType:1,_itemNum:0,_pieceIndex:0,onceClick:{default:!0,visible:!1}},onLoad:function(){},init:function(e,a,t,i){switch(this._itemType=a,this._itemNum=t,this._pieceIndex=i,a){case 1:this.addCoin(t);break;case 2:this.addPiece(t,i)}this.initSkinShow(e)},initSkinShow:function(e){var a=this;this.boxAnim.skeletonData=e;var t=["appear","big--small","open","open_await"],i=0;this.boxAnim.setAnimation(0,t[i++],!1),this.boxAnim.setCompleteListener(function(){if(!(i>t.length-1)){var e=i==t.length-1;i==t.length-2&&a.node.runAction(cc.sequence(cc.delayTime(.8),cc.callFunc(function(){a.delayShowPanel.active=!0,Tools.scaleUpAndDowm(a.delayShowPanel.children[2])}))),a.boxAnim.setAnimation(0,t[i++],e)}})},sureBtnClick:function(){if(window.wx)GameApp.uiManager.showToast("\u6682\u672a\u5f00\u653e\uff01");else if(this.onceClick){this.onceClick=!1,GameApp.audioManager.playEffect("click");var e=this;if(window.tt)i.addVideo("addVideo",function(){switch(e.onceClick=!0,GameApp.dataManager.addPlayedVideoNum(),e._itemType){case 1:GameApp.dataManager.addCoin(e._itemNum),GameApp.uiManager.showToast("\u83b7\u5f97\u91d1\u5e01*"+2*e._itemNum);break;case 2:GameApp.dataManager.addPieceNum(e._pieceIndex,e._itemNum),GameApp.uiManager.showToast("\u83b7\u5f97<color=#faf80d>"+GameApp.dataManager.getSkinDataById(e._pieceIndex).name+"</color> \u788e\u7247*"+2*e._itemNum)}GameApp.uiManager.closePopup("OpenBoxPopup")},function(a){e.onceClick=!0,a?GameApp.uiManager.showToast(a):GameApp.uiManager.showToast("\u672a\u770b\u5b8c\u89c6\u9891\uff01")});else{switch(e.onceClick=!0,GameApp.dataManager.addPlayedVideoNum(),e._itemType){case 1:GameApp.dataManager.addCoin(e._itemNum),GameApp.uiManager.showToast("\u83b7\u5f97\u91d1\u5e01*"+2*e._itemNum);break;case 2:GameApp.dataManager.addPieceNum(e._pieceIndex,e._itemNum),GameApp.uiManager.showToast("\u83b7\u5f97<color=#faf80d>"+GameApp.dataManager.getSkinDataById(e._pieceIndex).name+"</color> \u788e\u7247*"+2*e._itemNum)}GameApp.uiManager.closePopup("OpenBoxPopup")}}},skipBtnClick:function(){GameApp.audioManager.playEffect("click");switch(this._itemType){case 1:GameApp.uiManager.showToast("\u83b7\u5f97\u91d1\u5e01*"+this._itemNum);break;case 2:GameApp.uiManager.showToast("\u83b7\u5f97<color=#faf80d>"+GameApp.dataManager.getSkinDataById(this._pieceIndex).name+"</color> \u788e\u7247*"+this._itemNum)}GameApp.uiManager.closePopup("OpenBoxPopup")},addCoin:function(e){this.delayShowPanel.children[1].getComponent(cc.RichText).string="\u91d1\u5e01*"+e},addPiece:function(e,a){this.setpieceIcon(a),this.delayShowPanel.children[1].getComponent(cc.RichText).string="<color=#faf80d>"+GameApp.dataManager.getSkinDataById(a).name+"</color> \u788e\u7247*"+e},setpieceIcon:function(e){var a=this;cc.loader.loadRes("texture/skin_piece/card_p_"+e,cc.SpriteFrame,function(e,t){a.delayShowPanel.children[0].getComponent(cc.Sprite).spriteFrame=t})}}),cc._RF.pop()},{Utils:"Utils"}],OverPopup:[function(e,a,t){"use strict";cc._RF.push(a,"9381aqM1mNENZMWDyiPSiym","OverPopup");var i=e("Utils");cc.Class({extends:cc.Component,properties:{winTitle:cc.Node,winSprite:cc.Node,loseTitle:cc.Node,nameUI:cc.Label,rankUI:cc.Label,killUI:cc.Label,allRewardUI:cc.Label,rankRewardUI:cc.Label,killRewardUI:cc.Label,rewardBtnNode:cc.Button,homeBtnNode:cc.Node,onceClick:{default:!0,visible:!1},clickedShare:{default:!1,visible:!1}},onLoad:function(){var e=this;this.node.runAction(cc.sequence(cc.delayTime(3),cc.callFunc(function(){e.homeBtnNode.active=!0}))),Tools.scaleUpAndDowm(this.rewardBtnNode.node)},init:function(e,a){e?(a=1,this.winTitle.active=!0,this.winSprite.active=!0,GameApp.dataManager.userData.winNum++,GameApp.dataManager.addActivityNum(2,1)):(this.loseTitle.active=!0,GameApp.dataManager.userData.alDieNum++),a<=5&&GameApp.dataManager.userData.top5Num++,this.nameUI.string=GameApp.dataManager.userData.playerName,this.rankUI.string=a;var t=GameApp.dataManager.globalData.inGameKillNum[0]._killNum;GameApp.dataManager.userData.allKillNum+=t,this.killUI.string=t;var i=50*(30-a),n=100*t,o=i+n;this.allRewardUI.string=o,this.rankRewardUI.string=i,this.killRewardUI.string=n,GameApp.dataManager.userData.allPlayNum++,GameApp.dataManager.userData.winRate=(GameApp.dataManager.userData.winNum/GameApp.dataManager.userData.allPlayNum).toFixed(2),GameApp.dataManager.userData.kd=(GameApp.dataManager.userData.allKillNum/(0==GameApp.dataManager.userData.alDieNum?1:GameApp.dataManager.userData.alDieNum)).toFixed(2),GameApp.dataManager.userData.avgRank=parseInt((GameApp.dataManager.userData.avgRank+a)/GameApp.dataManager.userData.allPlayNum),GameApp.dataManager.userData.mostKill=t>GameApp.dataManager.userData.mostKill?t:GameApp.dataManager.userData.mostKill,GameApp.dataManager.userData.avgLifeTime=parseInt((GameApp.dataManager.userData.avgLifeTime+GameApp.dataManager.globalData.lifeTime)/GameApp.dataManager.userData.allPlayNum),GameApp.dataManager.addCoin(o)},homeBtnClick:function(){GameApp.audioManager.playEffect("click"),GameApp.uiManager.showUI("LoginUI")},rewardBtnClick:function(){if(window.wx)GameApp.uiManager.showToast("\u6682\u672a\u5f00\u653e\uff01");else if(this.onceClick){this.onceClick=!1,GameApp.audioManager.playEffect("click");var e=this;window.tt?i.addVideo("addVideo",function(){e.onceClick=!0,GameApp.dataManager.addPlayedVideoNum(),GameApp.uiManager.showPopup("OpenBoxPopup",function(a){var t=Tools.randomNum(100,1e3);GameApp.dataManager.addCoin(t),a.getComponent("OpenBoxPopup").init(GameApp.uiManager.boxSkinDataGroup[1],1,t),e.onceClick=!0,e.rewardBtnNode.interactable=!1},!1)},function(a){e.onceClick=!0,a?GameApp.uiManager.showToast(a):GameApp.uiManager.showToast("\u672a\u770b\u5b8c\u89c6\u9891\uff01")}):(e.onceClick=!0,GameApp.dataManager.addPlayedVideoNum(),GameApp.uiManager.showPopup("OpenBoxPopup",function(a){var t=Tools.randomNum(100,1e3);GameApp.dataManager.addCoin(t),a.getComponent("OpenBoxPopup").init(GameApp.uiManager.boxSkinDataGroup[1],1,t),e.onceClick=!0,e.rewardBtnNode.interactable=!1},!1))}},recordBtnClick:function(){if(this.onceClick){this.onceClick=!1;var e=this;if(GameApp.audioManager.playEffect("click"),this.clickedShare)return i.shareRecord(GameApp.dataManager.globalData.recordPath,function(){e.onceClick=!0,console.log("\u5206\u4eab\u5b8c\u6210\u4e86")},function(){e.onceClick=!0,console.log("\u5206\u4eab\u5931\u8d25\u4e86")}),void GameApp.dataManager.changeRecordState(RecordState.READY);if(GameApp.dataManager.globalData.recordTimer<3)return e.onceClick=!0,void GameApp.uiManager.showToast("\u5f55\u5c4f\u65f6\u95f4\u5c0f\u4e8e3\u79d2!");console.log("\u7ed3\u675f\u4e86");e=this;i.stopRecord(function(a){null!=a&&(GameApp.dataManager.globalData.recordPath=a.videoPath),e.clickedShare=!0,GameApp.dataManager.changeRecordState(RecordState.READY),i.shareRecord(GameApp.dataManager.globalData.recordPath,function(){e.onceClick=!0,console.log("\u5206\u4eab\u5b8c\u6210\u4e86")},function(){e.onceClick=!0,console.log("\u5206\u4eab\u5931\u8d25\u4e86")})})}}}),cc._RF.pop()},{Utils:"Utils"}],ParatrooperEnemy:[function(e,a,t){"use strict";cc._RF.push(a,"bf863F2RelJYKW79OD4Wy5c","ParatrooperEnemy"),cc.Class({extends:cc.Component,properties:{_borderGroup:[]},init:function(e){this._borderGroup=e},update:function(){var e=this.node.position;e.x<this._borderGroup[0].x&&(e.x=this._borderGroup[0].x),e.x>this._borderGroup[1].x&&(e.x=this._borderGroup[1].x),e.y>this._borderGroup[0].y&&(e.y=this._borderGroup[0].y),e.y<this._borderGroup[2].y&&(e.y=this._borderGroup[2].y),this.node.setPosition(e)}}),cc._RF.pop()},{}],ParatrooperPlayer:[function(e,a,t){"use strict";cc._RF.push(a,"248fc4jZoZIZJMVVhMKdpCk","ParatrooperPlayer");var i=e("JoystickCommon");cc.Class({extends:cc.Component,properties:{moveDir:{default:cc.v2(1,0),displayName:"Move Dir",tooltip:"\u79fb\u52a8\u65b9\u5411"},_speedType:{default:i.SpeedType.STOP,displayName:"Speed Type",type:i.SpeedType,tooltip:"\u901f\u5ea6\u7ea7\u522b"},_moveSpeed:{default:0,displayName:"Move Speed",tooltip:"\u79fb\u52a8\u901f\u5ea6"},stopSpeed:{default:0,type:cc.Integer,tooltip:"\u505c\u6b62\u65f6\u901f\u5ea6"},fastSpeed:{default:100,type:cc.Integer,tooltip:"\u6700\u5feb\u901f\u5ea6"},_borderGroup:[]},onLoad:function(){},onEnable:function(){},onDisable:function(){},onDestroy:function(){},init:function(e){this._borderGroup=e},move:function(){var e=this.node.position.add(this.moveDir.mul(this._moveSpeed/60));e.x<this._borderGroup[0].x&&(e.x=this._borderGroup[0].x),e.x>this._borderGroup[1].x&&(e.x=this._borderGroup[1].x),e.y>this._borderGroup[0].y&&(e.y=this._borderGroup[0].y),e.y<this._borderGroup[2].y&&(e.y=this._borderGroup[2].y),this.node.setPosition(e)},setSpeedType:function(e){this._isDie||this._speedType!=e&&(this._speedType=e)},setDir:function(e){this.moveDir=e},update:function(e){switch(this._speedType){case i.SpeedType.STOP:this._moveSpeed=this.stopSpeed;break;case i.SpeedType.NORMAL:case i.SpeedType.FAST:this._moveSpeed=this.fastSpeed}this.move()},lateUpdate:function(e){GameApp.uiManager.mapCamera.node.setPosition(this.node.position)}}),cc._RF.pop()},{JoystickCommon:"JoystickCommon"}],PlaneUI:[function(e,a,t){"use strict";cc._RF.push(a,"31f24zVlipJbrVcAJ0zIaIp","PlaneUI"),cc.Class({extends:cc.Component,properties:{planeNode:cc.Node,mapNode:cc.Node,_chooseType:0,_speedUp:!1},onLoad:function(){},init:function(e){this._speedUp=e;var a=Tools.randomNum(0,3);switch(this._chooseType=a%2,this.planeNode.setPosition(this.node.children[0].convertToNodeSpaceAR(this.mapNode.children[a].convertToWorldSpaceAR(cc.v2(0,0)))),this.planeNode.angle=[-135,135,45,-45][a],a){case 0:this.planeNode.runAction(cc.moveTo(5,this.mapNode.children[2].position));break;case 1:this.planeNode.runAction(cc.moveTo(5,this.mapNode.children[3].position));break;case 2:this.planeNode.runAction(cc.moveTo(5,this.mapNode.children[0].position));break;case 3:this.planeNode.runAction(cc.moveTo(5,this.mapNode.children[1].position))}GameApp.audioManager.playEffect("plane",1,2)},jumpBtnClick:function(){var e=this;GameApp.audioManager.playEffect("click"),this.planeNode.stopAllActions(),GameApp.uiManager.showUI("GameUI",function(a){var t=0,i=0;0==e._chooseType?(t=cc.v2(e.mapNode.children[0].position).sub(e.mapNode.children[2].position).mag(),i=cc.v2(e.planeNode.position).sub(e.mapNode.children[0].position).mag()):(t=cc.v2(e.mapNode.children[1].position).sub(e.mapNode.children[3].position).mag(),i=cc.v2(e.planeNode.position).sub(e.mapNode.children[3].position).mag());var n=i/t;a.getComponent("GameUI").init(e._chooseType,n,e._speedUp)})}}),cc._RF.pop()},{}],Player:[function(e,a,t){"use strict";cc._RF.push(a,"175c9l71jJIOK/erMuxWhel","Player");var i=e("JoystickCommon");cc.Class({extends:cc.Component,properties:{moveDir:{default:cc.v2(1,0),displayName:"Move Dir",tooltip:"\u79fb\u52a8\u65b9\u5411"},_speedType:{default:i.SpeedType.STOP,displayName:"Speed Type",type:i.SpeedType,tooltip:"\u901f\u5ea6\u7ea7\u522b"},_moveSpeed:{default:0,displayName:"Move Speed",tooltip:"\u79fb\u52a8\u901f\u5ea6"},stopSpeed:{default:0,type:cc.Integer,tooltip:"\u505c\u6b62\u65f6\u901f\u5ea6"},roleAnim:{default:null,type:sp.Skeleton,tooltip:"\u89d2\u8272\u7684Spine\u52a8\u753b\u7ec4\u4ef6"},_gunDir:{default:cc.v2(1,0)},gunAnim:{default:null,type:sp.Skeleton,tooltip:"\u67aa\u7684Spine\u52a8\u753b\u7ec4\u4ef6"},gunNode:{default:null,type:cc.Node,tooltip:"\u67aa\u8282\u70b9"},_haveGun:!1,gunData:{default:{}},skinData:{default:{}},_pbc:cc.PhysicsBoxCollider,nameUI:cc.Label,bulletPrefab:cc.Prefab,tempGroundWeapon:null,hpBar:cc.ProgressBar,amoBar:cc.ProgressBar,starNode:cc.Node,lastHitBullet:null,_isAim:!1,_aimTimer:0,_aimInterval:.05,_stepTimer:0,_stepInterval:.3,_isDie:!1,arrowNode:cc.Node,_mapNoGun:!1,_isProtect:!1,_isGas:!1,_inGasTimer:0,_inGasInterval:.5},onLoad:function(){GameApp.eventManager.on(EventNames.EVENT_PLAYER_SHOOT,this.shoot.bind(this)),GameApp.eventManager.on(EventNames.EVENT_PLAYER_RELOAD,this.reload.bind(this)),GameApp.eventManager.on(EventNames.EVENT_PICKUP_WEAPON,this.pickUpWeapon.bind(this)),GameApp.eventManager.on(EventNames.EVENT_UPDATE_TOPBAR_SHOW,this.updatePlayerTopBarShow.bind(this)),GameApp.eventManager.on(EventNames.EVENT_AIM,this.aimState.bind(this)),GameApp.eventManager.on(EventNames.EVENT_THEGAMESTART,this.theGameStart.bind(this)),GameApp.eventManager.on(EventNames.EVENT_FLASH,this.doFlash.bind(this)),GameApp.eventManager.on(EventNames.EVENT_RESUME_HEALTH,this.doResumeHealth.bind(this)),GameApp.eventManager.on(EventNames.EVENT_UPDATE_STAR_SHOW,this.updateStarShow.bind(this)),this._pbc=this.getComponent(cc.PhysicsBoxCollider),this._pbc.tag=Tags.player},onEnable:function(){},onDisable:function(){},onDestroy:function(){GameApp.eventManager.removeListener(EventNames.EVENT_PLAYER_SHOOT),GameApp.eventManager.removeListener(EventNames.EVENT_PLAYER_RELOAD),GameApp.eventManager.removeListener(EventNames.EVENT_PICKUP_WEAPON),GameApp.eventManager.removeListener(EventNames.EVENT_UPDATE_TOPBAR_SHOW),GameApp.eventManager.removeListener(EventNames.EVENT_AIM),GameApp.eventManager.removeListener(EventNames.EVENT_THEGAMESTART),GameApp.eventManager.removeListener(EventNames.EVENT_FLASH),GameApp.eventManager.removeListener(EventNames.EVENT_RESUME_HEALTH),GameApp.eventManager.removeListener(EventNames.EVENT_UPDATE_STAR_SHOW)},init:function(){GameApp.dataManager.globalData.isInGame&&this.roleProtect(),this.skinData=GameApp.dataManager.jsonData.SkinsData[GameApp.dataManager.userData.choosedSkinId-1],this.initNameShow(),this.initSkinShow()},roleProtect:function(){GameApp.audioManager.playEffect("noticeFindGun",.5),this._haveGun||(this._isProtect=!0,this.arrowNode.active=!0),this.node.opacity=100},theGameStart:function(){this._isProtect=!1,this.node.opacity=255},doFlash:function(){this._isDie||this.move(null,!0)},doResumeHealth:function(){this._isDie||this.resumeHealth(GameApp.dataManager.getResumeHealthNum())},resumeHealth:function(e){var a=this;this.node.runAction(cc.sequence(cc.callFunc(function(){GameApp.uiManager.showGameObject("InfoLabel",function(a){a.getComponent(cc.RichText).string="<b><color=green>+"+e+"</color></b>";var t=cc.callFunc(function(){GameApp.dataManager.addHp(e),a.setPosition(0,110)}),i=cc.sequence(t,cc.spawn(cc.fadeIn(.2),cc.scaleTo(0,1.5),cc.moveTo(.3,cc.v2(0,190))),cc.fadeOut(.3),cc.callFunc(function(){a.destroy()}));a.runAction(i)},a.node)}),cc.delayTime(.3)).repeat(4))},updateStarShow:function(){for(var e=0,a=0;a<4;a++)e+=GameApp.dataManager.globalData.getItemAttrArr[a].rank;if(0==e)this.starNode.active=!1;else{var t=parseInt((e-1)/3),i=e-3*t;this.starNode.children[0].getComponent(cc.Sprite).spriteFrame=GameApp.uiManager.commonAtlas.getSpriteFrame("level_bg_"+(t+1)),this.starNode.children[1].getComponent(cc.Sprite).spriteFrame=GameApp.uiManager.commonAtlas.getSpriteFrame("level_star_"+(t+1)+"_"+i),this.starNode.active=!0}},initNameShow:function(){this.nameUI.string=GameApp.dataManager.userData.playerName},initSkinShow:function(){GameApp.dataManager.userData.choosedSkinId<21?(this.roleAnim.skeletonData=GameApp.uiManager.normalSkinData,this.roleAnim.setSkin(this.skinData.skinname)):this.roleAnim.skeletonData=GameApp.uiManager.advanceSkinDataGroup[GameApp.dataManager.userData.choosedSkinId-21];var e=GameApp.dataManager.userData.choosedSkinId<21?["await"]:["await_fight_1"];this.roleAnim.setAnimation(0,e[0],!0)},updatePlayerTopBarShow:function(){this.hpBar.progress=GameApp.dataManager.globalData.curHp/GameApp.dataManager.globalData.maxHp,this.amoBar.progress=GameApp.dataManager.globalData.curAmoNum/GameApp.dataManager.globalData.maxAmoNum},move:function(e,a){if(a){var t=GameApp.uiManager.getGame("GameMap").getComponent("GameMap").enemySpawnPosGroupNode.children,i=this.node.position.add(this.moveDir.mul(1e3));return i.x<t[0].x&&(i.x=t[0].x),i.x>t[1].x&&(i.x=t[1].x),i.y>t[0].y&&(i.y=t[0].y),i.y<t[2].y&&(i.y=t[2].y),this.node.setPosition(i),void GameApp.audioManager.playEffect("flash")}0!=this._moveSpeed&&(this._stepTimer-=e,this._stepTimer<0&&(this._stepTimer=this._stepInterval,GameApp.audioManager.playEffect("run",.3)));var n=90-cc.misc.radiansToDegrees(Math.atan2(this.moveDir.y,this.moveDir.x));this.roleAnim.node.scaleX=n>180||n<0?-1:1;var o=this.node.position.add(this.moveDir.mul(this._moveSpeed*e));this.node.setPosition(o),GameApp.eventManager.emit(EventNames.EVENT_UPDATE_MIPMAP_PLAYER,cc.v2(this.node.x/50,this.node.y/50))},setSpeedType:function(e){if(!this._isDie&&this._speedType!=e){this._speedType=e;var a=GameApp.dataManager.userData.choosedSkinId<21?["await","run2","run2"]:["await_fight_1","run","run"];this.roleAnim&&this.roleAnim.setAnimation(0,a[e],!0)}},setDir:function(e){this._isDie||(this.moveDir=e,this._isAim||this.setGunDir(e))},setGunDir:function(e){if(this._haveGun&&this.gunNode){null==e&&(e=this.moveDir),this._gunDir=e,this.gunNode.rotation=-cc.misc.radiansToDegrees(Math.atan2(e.y,e.x));var a=90-this.gunNode.rotation;this.gunNode.scaleY=a>180||a<0?-1:1}},setArrowDir:function(e){this.arrowNode.setPosition(cc.v2(this.arrowNode.parent.position).add(e.mul(100))),this.arrowNode.children[0].children[0].setPosition(cc.v2(this.arrowNode.children[0].position).add(e.mul(30))),this.arrowNode.children[0].children[0].rotation=-cc.misc.radiansToDegrees(Math.atan2(e.y,e.x))},update:function(e){if(!this._isDie){switch(GameApp.dataManager.globalData.isInGame&&(GameApp.dataManager.globalData.lifeTime+=e),this._speedType){case i.SpeedType.STOP:this._moveSpeed=this.stopSpeed;break;case i.SpeedType.NORMAL:this._moveSpeed=GameApp.dataManager.globalData.curSpeed;break;case i.SpeedType.FAST:this._moveSpeed=GameApp.dataManager.globalData.curSpeed+Math.floor(GameApp.dataManager.globalData.curSpeed*GameApp.dataManager.getEquipItemAttr(EquipType.speed))}this.move(e),this.checkGas(e),this._haveGun||this._mapNoGun||(this._aimTimer-=e,this._aimTimer<0&&(this._aimTimer=this._aimInterval,this.arrowToNearestGun())),this._isProtect||(this._isAim?(this._aimTimer-=e,this._aimTimer<0&&(this._aimTimer=this._aimInterval,this.aimToNearest())):this._aimTimer=0)}},lateUpdate:function(e){GameApp.uiManager.mapCamera.node.setPosition(this.node.position)},checkGas:function(e){null!=GameApp.dataManager.globalData.gasConfig?cc.v2(GameApp.dataManager.globalData.gasConfig.safePosition).sub(cc.v2(this.node.position)).mag()>GameApp.dataManager.globalData.gasConfig.gasCircle/2?(this._inGasTimer-=e,this._inGasTimer<0&&(this._inGasTimer=this._inGasInterval,this.beDamage(5,-1)),this._isGas=!0):this._isGas=!1:this._isGas=!1},aimState:function(e){this._isDie||this._haveGun&&(this._isAim=e,this._isAim&&this.aimToNearest())},aimToNearest:function(){var e=GameApp.dataManager.globalData.allRoleArr.concat();Tools.removeArray(e,this.getComponent("Player"));for(var a=1e6,t=-1,i=0;i<e.length;i++){var n=cc.v2(e[i].node.position).sub(cc.v2(this.node.position)).mag();n<a&&n<1.4*this.gunData.range&&(a=n,t=i)}var o=null;if(-1==t)this._isAim=!1;else{this._isAim=!0;var s=e[t].node;o=cc.v2(s.position).sub(cc.v2(this.node.position)).normalize()}this.setGunDir(o)},arrowToNearestGun:function(){for(var e=GameApp.dataManager.globalData.allGunArr.concat(),a=1e6,t=-1,i=0;i<e.length;i++){var n=cc.v2(e[i].position).sub(cc.v2(this.node.position)).mag();n<a&&(a=n,t=i)}var o=null;if(-1==t)this._mapNoGun=!0,this.arrowNode.active=!1;else{var s=e[t];o=cc.v2(s.position).sub(cc.v2(this.node.position)).normalize(),this.setArrowDir(o)}},shoot:function(){if(!this._isDie&&this._haveGun){if(GameApp.dataManager.reduceAmo()){this.gunAnim.setAnimation(0,"attack_"+this.gunData.skinname,!1);var e=Math.ceil(this.gunData.power*(GameApp.dataManager.globalData.curDamage+GameApp.dataManager.getEquipItemAttr(EquipType.damage))),a=!1;if(Tools.isCrit(GameApp.dataManager.globalData.curCrit+GameApp.dataManager.getEquipItemAttr(EquipType.crit))&&(e*=2,a=!0),1002==this.gunData.weaponid){GameApp.audioManager.playEffect("shot_shoot",.6);var t=cc.instantiate(this.bulletPrefab),i=cc.instantiate(this.bulletPrefab),n=cc.instantiate(this.bulletPrefab),o=this.node.parent.parent.convertToNodeSpaceAR(this.gunNode.children[0].convertToWorldSpaceAR(cc.v2(0,0)));t.parent=i.parent=n.parent=this.node.parent.parent,t.setPosition(o),i.setPosition(o),n.setPosition(o),t.rotation=this.gunNode.rotation,i.rotation=this.gunNode.rotation+30,n.rotation=this.gunNode.rotation-30;var s=cc.v2(this._gunDir),r=t.getComponent("Bullet");r._belongTag=this._pbc.tag,r._belongName=GameApp.dataManager.userData.playerName,r._flyDir=s,r.init(this.gunData,e,a);var c=i.getComponent("Bullet");c._belongTag=this._pbc.tag,c._belongName=GameApp.dataManager.userData.playerName,c._flyDir=s.rotate(-cc.misc.degreesToRadians(30)),c.init(this.gunData,e,a);var p=n.getComponent("Bullet");p._belongTag=this._pbc.tag,p._belongName=GameApp.dataManager.userData.playerName,p._flyDir=s.rotate(-cc.misc.degreesToRadians(-30)),p.init(this.gunData,e,a)}else{1003==this.gunData.weaponid||1103==this.gunData.weaponid?GameApp.audioManager.playEffect("charge_shoot",.6):1005==this.gunData.weaponid||1105==this.gunData.weaponid?GameApp.audioManager.playEffect("missile_shoot",.6):1102==this.gunData.weaponid&&GameApp.audioManager.playEffect("shot_shoot",.6);var l=cc.instantiate(this.bulletPrefab),d=this.node.parent.parent.convertToNodeSpaceAR(this.gunNode.children[0].convertToWorldSpaceAR(cc.v2(0,0)));l.parent=this.node.parent.parent,l.setPosition(d),l.rotation=this.gunNode.rotation;var h=l.getComponent("Bullet");h._belongTag=this._pbc.tag,h._belongName=GameApp.dataManager.userData.playerName,h._flyDir=this._gunDir,h.init(this.gunData,e,a)}this.updatePlayerTopBarShow()}else GameApp.uiManager.getUI(GameApp.uiManager.uiRoot.children[0].name).getComponent(GameApp.uiManager.uiRoot.children[0].name).reloadBtnClick();0==GameApp.dataManager.globalData.curAmoNum&&GameApp.uiManager.getUI(GameApp.uiManager.uiRoot.children[0].name).getComponent(GameApp.uiManager.uiRoot.children[0].name).reloadBtnClick()}},reload:function(){this._isDie||this._haveGun&&(GameApp.audioManager.playEffect("reload",.6),this.gunAnim.setAnimation(0,"reload_"+this.gunData.skinname,!1))},equipWeapon:function(e){GameApp.audioManager.playEffect("pick_item",.6),this.gunData=GameApp.dataManager.jsonData.WeaponData[e],this._haveGun=!0,this.arrowNode.active=!1,GameApp.eventManager.emit(EventNames.EVENT_SHOW_RELOAD_UI,!0),GameApp.dataManager.globalData.shootInterval=this.gunData.shootdelay,GameApp.dataManager.globalData.reloadInterval=this.gunData.reloaddelay,GameApp.dataManager.globalData.maxAmoNum=this.gunData.clipnum,GameApp.dataManager.reloadAmo(),this.gunNode.active=!0,this.gunAnim.skeletonData=e<3?GameApp.uiManager.gunSkinDataGroup[0]:GameApp.uiManager.gunSkinDataGroup[1],this.gunAnim.setSkin(this.gunData.skinname),this.setGunDir(this.moveDir)},getItem:function(){},onBeginContact:function(e,a,t){if(a.tag!=Tags.empty)if(t.tag==Tags.item){var i=t.node.getComponent("GroundItem");i.itemType._type==ItemType.weapon?(this.tempGroundWeapon=i,this._haveGun?GameApp.eventManager.emit(EventNames.EVENT_SHOW_GUN_UI,!0,GameApp.dataManager.jsonData.WeaponData[i.itemType._kind]):(Tools.removeArray(GameApp.dataManager.globalData.allGunArr,t.node),this.pickUpWeapon())):i.itemType._type==ItemType.item&&this.getItem()}else if(t.tag==Tags.bullet){if(!GameApp.dataManager.globalData.isInGame)return;if(this._isDie)return;var n=t.node.getComponent("Bullet");if(n._belongTag==a.tag)return;if(t.node==this.lastHitBullet)return;this.lastHitBullet=t.node,this.beDamage(n._power,n._belongTag,n._belongName,n._isCrit)}else if(t.tag==Tags.boom){if(this._isDie)return;this.beDamage(999,-2)}},onEndContact:function(e,a,t){if(a.tag!=Tags.empty&&t.tag==Tags.item){var i=t.node.getComponent("GroundItem");i.itemType._type==ItemType.weapon?(this.tempGroundWeapon=null,GameApp.eventManager.emit(EventNames.EVENT_SHOW_GUN_UI,!1)):(i.itemType._type,ItemType.item)}},pickUpWeapon:function(){var e=this.tempGroundWeapon.itemType._kind;if(this._haveGun){var a={_type:ItemType.weapon,_kind:GameApp.dataManager.jsonData.WeaponData.indexOf(this.gunData)};this.tempGroundWeapon.init(a),GameApp.eventManager.emit(EventNames.EVENT_SHOW_GUN_UI,!0,this.gunData)}else this.tempGroundWeapon.node.destroy();this.equipWeapon(e)},beDamage:function(e,a,t,i){var n=this;if(GameApp.uiManager.showGameObject("InfoLabel",function(a){var t=a.parent.convertToNodeSpaceAR(n.node.convertToWorldSpaceAR(cc.v2(.5,.5)));a.setPosition(t);var o=Math.ceil(e*GameApp.dataManager.globalData.curDef)+Math.ceil(e*GameApp.dataManager.getEquipItemAttr(EquipType.def)),s="<color=red>-"+(e-=o)+"</color>";i&&(s="<color=red>\u66b4\u51fb-"+e+"</color>"),o&&(s+="<color=#0fffff>\u51cf\u4f24"+o+"</color>"),a.getComponent(cc.RichText).string="<b>"+s+"</b>";var r=cc.v2(Tools.randomNum(60,100),Tools.randomNum(60,100)),c=[t,cc.v2(t.x+r.x-20,t.y+r.y+20),t.add(r)],p=cc.sequence(cc.spawn(cc.fadeIn(.2),cc.scaleTo(.3,1.5),cc.bezierTo(.3,c)),cc.delayTime(.5),cc.fadeOut(.3),cc.callFunc(function(){a.destroy()}));a.runAction(p)},this.node.parent.parent),GameApp.dataManager.reduceHp(e));else{if(GameApp.audioManager.playEffect("maleDeath",.5),this.node.parent=GameApp.uiManager.getGame("GameMap").getChildByName("DeadObjectNode"),this._pbc.enabled=!1,this._isDie=!0,-1==a)GameApp.uiManager.showToast(GameApp.dataManager.userData.playerName+" \u88ab\u6bd2\u51fa\u5c40");else if(-2==a)GameApp.uiManager.showToast(GameApp.dataManager.userData.playerName+" \u88ab\u8f70\u70b8\u51fa\u5c40");else{var o=GameApp.dataManager.addKillNum(a,t);if(o>1){var s=o>5?5:o;GameApp.audioManager.playEffect("kill"+s,.5),GameApp.uiManager.showToast(t,null,o)}else GameApp.uiManager.showToast(t+" \u51fb\u6740\u4e86 "+GameApp.dataManager.userData.playerName)}if(this._haveGun){var r=GameApp.uiManager.gameRoot.children[0].getComponent("GameMap");GameApp.uiManager.showGameObject("GroundItem",function(e){var a=r.allGunNode.convertToNodeSpaceAR(n.node.convertToWorldSpaceAR(cc.v2(0,0)));e.parent=r.allGunNode,e.setPosition(a);var t={_type:ItemType.weapon,_kind:Tools.getIndex(GameApp.dataManager.jsonData.WeaponData,n.gunData)};e.getComponent("GroundItem").init(t),GameApp.dataManager.globalData.allGunArr.push(e)})}var c=GameApp.dataManager.userData.choosedSkinId<21?["dead"]:["dead2"];this.roleAnim.setAnimation(0,c[0],!1),this.gunNode.active=!1,Tools.removeArray(GameApp.dataManager.globalData.allRoleArr,this.node.getComponent("Player"));var p=GameApp.dataManager.globalData.allRoleArr.length;null==GameApp.uiManager.getPopup("OverPopup")&&GameApp.uiManager.showPopup("OverPopup",function(e){e.getComponent("OverPopup").init(!1,p+1)}),GameApp.eventManager.emit(EventNames.EVENT_SHOW_ALLROLENUM_UI)}}}),cc._RF.pop()},{JoystickCommon:"JoystickCommon"}],PrefabPath:[function(e,a,t){"use strict";cc._RF.push(a,"d25dcKl/4dFeZ+1ROEIEuTd","PrefabPath");a.exports={ToastUI:"uiPrefab/ToastUI",SplashUI:"uiPrefab/SplashUI",LoginUI:"uiPrefab/LoginUI",SkinUI:"uiPrefab/SkinUI",SkinInfoPopup:"uiPrefab/SkinInfoPopup",BoxUI:"uiPrefab/BoxUI",GunUI:"uiPrefab/GunUI",RankUI:"uiPrefab/RankUI",GiftPopup:"uiPrefab/GiftPopup",OpenBoxPopup:"uiPrefab/OpenBoxPopup",PrepareUI:"uiPrefab/PrepareUI",PrepareMap:"uiPrefab/PrepareMap",Player:"game/Player",Enemy:"game/Enemy",GroundItem:"game/GroundItem",PlaneUI:"uiPrefab/PlaneUI",GameUI:"uiPrefab/GameUI",GameMap:"uiPrefab/GameMap",ParatrooperPlayer:"game/ParatrooperPlayer",ParatrooperEnemy:"game/ParatrooperEnemy",InfoLabel:"game/InfoLabel",DropBox:"game/DropBox",MipBox:"game/MipBox",Boom:"game/Boom",OverPopup:"uiPrefab/OverPopup",DailyPopup:"uiPrefab/DailyPopup",ActivityPopup:"uiPrefab/ActivityPopup"},cc._RF.pop()},{}],PrepareMap:[function(e,a,t){"use strict";cc._RF.push(a,"f0242hMp5pE/YgD+xqZxRob","PrepareMap"),cc.Class({extends:cc.Component,properties:{tiledMap:cc.TiledMap,objectPrefab:cc.Prefab,colliderPrefab:cc.Prefab,groundItemPrefab:cc.Prefab,waitLabel:cc.Node,allObjectNode:cc.Node,allColliderNode:cc.Node,allGunNode:cc.Node,enemySpawnPosGroupNode:cc.Node,mapAtlas:cc.SpriteAtlas,_timer0:.1,_timer:.1,readyToSort:!1},onLoad:function(){this.initMapShow(),this.showPlayer(),this.showEnemy()},update:function(e){this.readyToSort&&(this._timer-=e,this._timer<0&&(this._timer=this._timer0,this.sortAll()))},initMapShow:function(){var e=this;GameApp.dataManager.globalData.allRoleArr=[],GameApp.dataManager.globalData.allGunArr=[];var a=this.tiledMap.getLayer("wall");this.tiledMap.getObjectGroup("dynamic")._objects.forEach(function(t){var i=cc.instantiate(e.objectPrefab);i.getComponent(cc.Sprite).spriteFrame=e.mapAtlas.getSpriteFrame(t.name.split(".")[0]),i.parent=e.allColliderNode;var n=a.getPositionAt(e.getTilePos(cc.v2(t.x,t.y)));i.setPosition(n);var o=e.allObjectNode.convertToNodeSpaceAR(i.convertToWorldSpaceAR(cc.v2(0,0)));i.parent=e.allObjectNode,i.setPosition(o)}),this.tiledMap.getObjectGroup("collision")._objects.forEach(function(a){var t=cc.instantiate(e.colliderPrefab),i=t.getComponent(cc.PhysicsBoxCollider);i.size=cc.size(a.width,a.height),i.offset=cc.v2(a.width/2,-a.height/2),i.apply(),e.allColliderNode.addChild(t),t.setPosition(cc.v2(a.x,a.y)),i.tag=Tags.collider}),this.tiledMap.getObjectGroup("gun")._objects.forEach(function(t){var i=cc.instantiate(e.groundItemPrefab);i.parent=e.allColliderNode;var n=a.getPositionAt(e.getTilePos(cc.v2(t.x,t.y)));i.setPosition(n);var o=e.allGunNode.convertToNodeSpaceAR(i.convertToWorldSpaceAR(cc.v2(0,0)));i.parent=e.allGunNode,i.setPosition(o);var s={_type:ItemType.weapon,_kind:Tools.randomNum(0,5)};i.getComponent("GroundItem").init(s),GameApp.dataManager.globalData.allGunArr.push(i)})},getTilePos:function(e){var a=this.tiledMap.node.getContentSize(),t=this.tiledMap.getTileSize(),i=Math.floor(e.x/t.width),n=Math.floor((a.height-e.y)/t.height);return cc.v2(i,n)},showPlayer:function(){var e=this;GameApp.uiManager.showGameObject("Player",function(a){var t=a.getComponent("Player");GameApp.uiManager.getUI("PrepareUI").getComponent("PrepareUI").joystick.getComponent("Joystick").player=t,t.init(),GameApp.dataManager.globalData.allRoleArr.push(t),e.readyToSort=!0},this.allObjectNode)},showEnemy:function(){for(var e=this.enemySpawnPosGroupNode.children,a=Tags.enemy,t=0;t<5;t++)t+1!=GameApp.dataManager.userData.choosedSkinId&&GameApp.uiManager.showGameObject("Enemy",function(i){i.getComponent(cc.PhysicsBoxCollider).tag=a++,i.setPosition(cc.v2(Tools.randomNum(e[0].x,e[1].x),Tools.randomNum(e[2].y,e[0].y)));var n=i.getComponent("Enemy");n.init(t+1,GameApp.dataManager.jsonData.RobotName[t]),GameApp.dataManager.globalData.allRoleArr.push(n)},this.allObjectNode);var i=function(){30!=t&&(t+1==GameApp.dataManager.userData.choosedSkinId||GameApp.uiManager.showGameObject("Enemy",function(i){i.getComponent(cc.PhysicsBoxCollider).tag=a++,i.setPosition(cc.v2(Tools.randomNum(e[0].x,e[1].x),Tools.randomNum(e[2].y,e[0].y)));var n=i.getComponent("Enemy");n.init(t+1,GameApp.dataManager.jsonData.RobotName[t]),GameApp.dataManager.globalData.allRoleArr.push(n),GameApp.eventManager.emit(EventNames.EVENT_SHOW_ALLROLENUM_UI)},this.allObjectNode),t++)}.bind(this);this.schedule(i,.5,25,0)},sortAll:function(){var e=this.allObjectNode.children.concat(),a=[],t=[];for(var i in e)GameApp.uiManager.isInMapSight(e[i])&&(a.push({y:e[i].y,index:i}),t.push(i));for(var n in a.sort(function(e,a){return a.y-e.y}),a)e[a[n].index].setSiblingIndex(t[n])}}),cc._RF.pop()},{}],PrepareUI:[function(e,a,t){"use strict";cc._RF.push(a,"2e391TZyyJPmYBLDqA+YUbL","PrepareUI"),cc.Class({extends:cc.Component,properties:{joystick:{default:null,type:cc.Node,tooltip:"\u6447\u6746\u7684\u811a\u672c"},soundNode:cc.Node,shootBtn:cc.Node,reloadBtnNode:cc.Node,amoUI:cc.Label,allRoleNumUI:cc.Label,weaponBtnNode:cc.Node,prepareTopNode:cc.Node,countDownSpGroup:[cc.SpriteFrame],_shootFlag:!1,_shootTimer:0,_reloadFlag:!1,_reloadTimer:0,_timeCountDown:20,_onceCountDownAnim:!1,_onceExecute:!0},onLoad:function(){var e=this;GameApp.dataManager.globalData.isInGame=!1,GameApp.eventManager.on(EventNames.EVENT_UPDATE_AMO_SHOW,this.updateAmoShow.bind(this)),GameApp.eventManager.on(EventNames.EVENT_SHOW_GUN_UI,this.updateGunUIShow.bind(this)),GameApp.eventManager.on(EventNames.EVENT_SHOW_RELOAD_UI,this.updateReloadUIShow.bind(this)),GameApp.eventManager.on(EventNames.EVENT_SHOW_ALLROLENUM_UI,this.updateAllRoleNumUIShow.bind(this)),this.shootBtn.on(cc.Node.EventType.TOUCH_START,this.onTouchBegin,this),this.shootBtn.on(cc.Node.EventType.TOUCH_END,this.onTouchLeave,this),this.shootBtn.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchLeave,this),GameApp.uiManager.showGame("PrepareMap"),this.weaponBtnNode.children[0].runAction(cc.rotateBy(.2,90).repeatForever()),this.prepareTopNode.children[0].runAction(cc.sequence(cc.callFunc(function(){e.prepareTopNode.children[0].children[0].active=!0}),cc.delayTime(.4),cc.callFunc(function(){e.prepareTopNode.children[0].children[1].active=!0}),cc.delayTime(.4),cc.callFunc(function(){e.prepareTopNode.children[0].children[2].active=!0}),cc.delayTime(.4),cc.callFunc(function(){e.prepareTopNode.children[0].children[0].active=!1,e.prepareTopNode.children[0].children[1].active=!1,e.prepareTopNode.children[0].children[2].active=!1}),cc.delayTime(.4)).repeatForever()),this._timeCountDown=20,GameApp.dataManager.globalData.inGameKillNum.push({_killNum:0,_belongName:GameApp.dataManager.userData.playerName}),this.updateSoundBtnShow()},onDestroy:function(){GameApp.eventManager.removeListener(EventNames.EVENT_UPDATE_AMO_SHOW),GameApp.eventManager.removeListener(EventNames.EVENT_SHOW_GUN_UI),GameApp.eventManager.removeListener(EventNames.EVENT_SHOW_RELOAD_UI),GameApp.eventManager.removeListener(EventNames.EVENT_SHOW_ALLROLENUM_UI)},update:function(e){if(this._shootTimer-=e,this._shootFlag&&this._shootTimer<0&&!this._reloadFlag&&(this._shootTimer=GameApp.dataManager.globalData.shootInterval,this.shoot()),this._reloadFlag&&(this._reloadTimer-=e,this._reloadFlag&&this._reloadTimer<0&&(this._reloadFlag=!1,GameApp.dataManager.reloadAmo())),this._timeCountDown-=e,this._timeCountDown<6&&(this.prepareTopNode.children[0].active=!1,this.prepareTopNode.children[1].active=!0,this.prepareTopNode.children[2].active=!0,this.countDownAnim(),this.prepareTopNode.children[2].getComponent(cc.Sprite).spriteFrame=this.countDownSpGroup[Math.floor(this._timeCountDown-1)]),Math.floor(this._timeCountDown)<=0){if(!this._onceExecute)return;this._onceExecute=!1,GameApp.uiManager.showPopup("GiftPopup",function(e){e.getComponent("GiftPopup").init("GameUI",2)})}},showPlaneUI:function(e){GameApp.uiManager.showUI("PlaneUI",function(a){a.getComponent("PlaneUI").init(e)})},countDownAnim:function(){var e=this;if(!this._onceCountDownAnim){this._onceCountDownAnim=!0,cc.log("\u64ad\u653e\u4e86"),GameApp.audioManager.playEffect("waitSceneCutDown");var a=cc.sequence(cc.scaleTo(.2,1.5),cc.scaleTo(.3,1),cc.delayTime(.5),cc.callFunc(function(){e._onceCountDownAnim=!1}));this.prepareTopNode.children[2].runAction(a)}},onTouchBegin:function(e){this._shootFlag=!0},onTouchLeave:function(e){this._shootFlag=!1,GameApp.eventManager.emit(EventNames.EVENT_AIM,!1)},shoot:function(){GameApp.eventManager.emit(EventNames.EVENT_AIM,!0),GameApp.eventManager.emit(EventNames.EVENT_PLAYER_SHOOT)},updateAmoShow:function(){this.amoUI.string=GameApp.dataManager.globalData.curAmoNum,GameApp.eventManager.emit(EventNames.EVENT_UPDATE_TOPBAR_SHOW)},updateGunUIShow:function(e,a){a&&(console.log(a),this.weaponBtnNode.getComponent(cc.Sprite).spriteFrame=GameApp.uiManager.commonAtlas.getSpriteFrame("ui_weapon_"+a.weaponid),this.weaponBtnNode.children[1].children[0].getComponent(cc.Label).string=a.name),this.weaponBtnNode.active=e,e&&(this.weaponBtnNode.scaleX=0,this.weaponBtnNode.scaleY=0,this.weaponBtnNode.runAction(cc.scaleTo(.3,1).easing(cc.easeBackOut())))},updateReloadUIShow:function(e){this.reloadBtnNode.active=e},updateAllRoleNumUIShow:function(){this.allRoleNumUI.string=GameApp.dataManager.globalData.allRoleArr.length},reloadBtnClick:function(){GameApp.audioManager.playEffect("click"),this._reloadFlag||(this._reloadTimer=GameApp.dataManager.globalData.reloadInterval,this._reloadFlag=!0,GameApp.eventManager.emit(EventNames.EVENT_PLAYER_RELOAD))},weaponBtnClick:function(){GameApp.audioManager.playEffect("click"),GameApp.eventManager.emit(EventNames.EVENT_PICKUP_WEAPON)},backBtnClick:function(){GameApp.audioManager.playEffect("click"),GameApp.uiManager.showUI("LoginUI")},soundBtnClick:function(){GameApp.audioManager.playEffect("click");var e=!GameApp.audioManager._effectOn;GameApp.audioManager.setEffect(e),this.updateSoundBtnShow()},updateSoundBtnShow:function(){this.soundNode.children[0].active=GameApp.audioManager._effectOn,this.soundNode.children[1].active=!GameApp.audioManager._effectOn}}),cc._RF.pop()},{}],Protocol:[function(e,a,t){"use strict";cc._RF.push(a,"9687aZxv/RO9ac5DcZQ91Zh","Protocol"),cc.Class({statics:{Initialize:function(){}}}),cc._RF.pop()},{}],RankUI:[function(e,a,t){"use strict";cc._RF.push(a,"6d7790HceZM3JqLL+gUKux9","RankUI"),cc.Class({extends:cc.Component,properties:{allPlayNumUI:cc.Label,winNumUI:cc.Label,top5NumUI:cc.Label,winRateUI:cc.Label,kdUI:cc.Label,avgRankUI:cc.Label,mostKillUI:cc.Label,avgLifeTimeUI:cc.Label},onLoad:function(){this.allPlayNumUI.string=GameApp.dataManager.userData.allPlayNum,this.winNumUI.string=GameApp.dataManager.userData.winNum,this.top5NumUI.string=GameApp.dataManager.userData.top5Num,this.winRateUI.string=100*GameApp.dataManager.userData.winRate+"%",this.kdUI.string=GameApp.dataManager.userData.kd,this.avgRankUI.string=GameApp.dataManager.userData.avgRank,this.mostKillUI.string=GameApp.dataManager.userData.mostKill,this.avgLifeTimeUI.string=Tools.toTimeString(GameApp.dataManager.userData.avgLifeTime)},backBtnClick:function(){GameApp.audioManager.playEffect("click"),GameApp.uiManager.showUI("LoginUI")}}),cc._RF.pop()},{}],RouletteData:[function(e,a,t){"use strict";cc._RF.push(a,"87c70GyAa9DY7qwmvLhQogw","RouletteData");var i={ALLROATE:360,num:8,deviation:5,offset:22.5,zhuanpanData:{default:{}},duration:3,rotateNum:3,load:function(){for(var e=1;e<9;e++)this.zhuanpanData[e]={start:(this.num-(9-e))*this.ALLROATE/this.num-this.offset+this.deviation,end:(this.num-(8-e))*this.ALLROATE/this.num-this.offset-this.deviation}}};i.load(),a.exports=i,cc._RF.pop()},{}],SkinInfoPopup:[function(e,a,t){"use strict";cc._RF.push(a,"906abQ6KhRK94jc8lii7QN9","SkinInfoPopup");var i=e("Utils");cc.Class({extends:cc.Component,properties:{actorAnim:sp.Skeleton,nameUI:cc.Label,descUI:cc.Label,skinData:{default:{}},methodUIGroup:[cc.Node],methodBtnGroup:[cc.Node],onceClick:{default:!0,visible:!1}},onLoad:function(){GameApp.eventManager.on(EventNames.EVENT_UPDATE_SHOP_CHOOSED_SHOW,this.updateUnLockShow)},onDestroy:function(){GameApp.eventManager.removeListener(EventNames.EVENT_UPDATE_SHOP_CHOOSED_SHOW,this.updateUnLockShow)},init:function(e){this.skinData=e,this.initNameShow(),this.initSkinShow(),this.updateMethodShow()},initNameShow:function(){this.nameUI.string=this.skinData.name;var e=Math.floor((this.skinData.skinid-1)/5);this.nameUI.node.color=(new cc.Color).fromHEX(NameColor[e]),this.descUI.string=this.skinData.des},initSkinShow:function(){var e=this;this.skinData.skinid<21?(this.actorAnim.skeletonData=GameApp.uiManager.normalSkinData,this.actorAnim.setSkin(this.skinData.skinname)):this.actorAnim.skeletonData=GameApp.uiManager.advanceSkinDataGroup[this.skinData.skinid-21],this.skinData.skinid<21?this.actorAnim.setAnimation(0,"await",!0):(this.actorAnim.setAnimation(0,"await_main_1",!1),this.actorAnim.setCompleteListener(function(){e.actorAnim.setAnimation(0,"await_main_"+Tools.randomNum(1,3),!1)}))},updateMethodShow:function(){this.skinData.skinid>25&&(this.methodUIGroup[2].children[0].getComponent(cc.Label).string=GameApp.dataManager.userData.havePieceNum[this.skinData.skinid]+"/"+this.skinData.needpiece,this.setpieceIcon(this.skinData.skinid)),this.updateUnLockShow(this)},updateUnLockShow:function(e){e.methodUIGroup[0].active=e.methodBtnGroup[0].active=e.skinData.needcoin,e.methodUIGroup[1].active=e.methodBtnGroup[1].active=e.skinData.needgem,e.methodUIGroup[2].active=e.methodBtnGroup[2].active=e.skinData.needpiece,e.methodBtnGroup[3].active=!1,e.methodUIGroup[0].children[0].getComponent(cc.Label).string=e.skinData.needcoin,e.methodUIGroup[1].children[0].getComponent(cc.Label).string=GameApp.dataManager.userData.playedVideoNum+"/"+e.skinData.needgem;var a=GameApp.dataManager.userData.unLockedSkinIdArr.concat();a.sort(function(e,a){return e-a}),a.forEach(function(a){if(a==e.skinData.skinid)return e.methodBtnGroup[0].active=!1,e.methodBtnGroup[1].active=!1,e.methodBtnGroup[2].active=!1,void(e.methodBtnGroup[3].active=!0)}),e.updateChoosedShow2(e)},updateChoosedShow2:function(e){GameApp.dataManager.getChoosedSkinId()==e.skinData.skinid?(e.methodBtnGroup[3].children[0].active=!1,e.methodBtnGroup[3].children[1].active=!0):(e.methodBtnGroup[3].children[0].active=!0,e.methodBtnGroup[3].children[1].active=!1)},setpieceIcon:function(e){var a=this;cc.loader.loadRes("texture/skin_piece/card_p_"+e,cc.SpriteFrame,function(e,t){a.methodUIGroup[2].getComponent(cc.Sprite).spriteFrame=t})},selelctBtnClick:function(){GameApp.audioManager.playEffect("click"),GameApp.dataManager.setChoosedSkinId(this.skinData.skinid),GameApp.eventManager.emit(EventNames.EVENT_UPDATE_SHOP_CHOOSED_SHOW,this)},coinBtnClick:function(){GameApp.audioManager.playEffect("click"),GameApp.dataManager.reduceCoin(this.skinData.needcoin)?(GameApp.uiManager.showToast("\u89e3\u9501\u6210\u529f"),GameApp.dataManager.unLockSkin(this.skinData.skinid),GameApp.eventManager.emit(EventNames.EVENT_UPDATE_SHOP_CHOOSED_SHOW,this)):GameApp.uiManager.showToast("\u91d1\u5e01\u4e0d\u8db3\uff01")},videoBtnClick:function(){if(window.wx)GameApp.uiManager.showToast("\u6682\u672a\u5f00\u653e\uff01");else if(this.onceClick){this.onceClick=!1,GameApp.audioManager.playEffect("click");var e=this;window.tt?i.addVideo("addVideo",function(){e.onceClick=!0,GameApp.dataManager.addPlayedVideoNum(),GameApp.eventManager.emit(EventNames.EVENT_UPDATE_SHOP_CHOOSED_SHOW,e)},function(a){e.onceClick=!0,a?GameApp.uiManager.showToast(a):GameApp.uiManager.showToast("\u672a\u770b\u5b8c\u89c6\u9891\uff01")}):(e.onceClick=!0,GameApp.dataManager.addPlayedVideoNum(),GameApp.eventManager.emit(EventNames.EVENT_UPDATE_SHOP_CHOOSED_SHOW,e))}},pieceBtnClick:function(){GameApp.audioManager.playEffect("click"),GameApp.uiManager.showToast("\u788e\u7247\u4e0d\u8db3,\u8bf7\u4ece<color=#faf80d>\u9ec4\u91d1\u5b9d\u7bb1</color>\u83b7\u53d6\uff01")},onCloseBtnClick:function(){GameApp.audioManager.playEffect("click"),GameApp.uiManager.closePopup("SkinInfoPopup")}}),cc._RF.pop()},{Utils:"Utils"}],SkinItem:[function(e,a,t){"use strict";cc._RF.push(a,"400f7aj7KtIOIhHbYk3GMvQ","SkinItem"),cc.Class({extends:cc.Component,properties:{actorAnim:sp.Skeleton,nameUI:cc.Label,skinData:{default:{}},methodBtnGroup:[cc.Node]},onLoad:function(){GameApp.eventManager.on(EventNames.EVENT_UPDATE_SHOP_CHOOSED_SHOW,this.updateUnLockShow.bind(this))},onDestroy:function(){GameApp.eventManager.removeListener(EventNames.EVENT_UPDATE_SHOP_CHOOSED_SHOW)},init:function(e){this.skinData=e,this.initNameShow(),this.initSkinShow(),this.updateMethodShow()},initNameShow:function(){this.nameUI.string=this.skinData.name;var e=Math.floor((this.skinData.skinid-1)/5);this.nameUI.node.color=(new cc.Color).fromHEX(NameColor[e])},initSkinShow:function(){var e=this;this.skinData.skinid<21?(this.actorAnim.skeletonData=GameApp.uiManager.normalSkinData,this.actorAnim.setSkin(this.skinData.skinname)):this.actorAnim.skeletonData=GameApp.uiManager.advanceSkinDataGroup[this.skinData.skinid-21],this.skinData.skinid<21?this.actorAnim.setAnimation(0,"await",!0):(this.actorAnim.setAnimation(0,"await_main_1",!1),this.actorAnim.setCompleteListener(function(){e.actorAnim.setAnimation(0,"await_main_"+Tools.randomNum(1,3),!1)}))},updateMethodShow:function(){this.skinData.skinid>25&&(this.methodBtnGroup[2].children[1].getComponent(cc.Label).string=GameApp.dataManager.userData.havePieceNum[this.skinData.skinid]+"/"+this.skinData.needpiece,this.setpieceIcon(this.skinData.skinid)),this.updateUnLockShow()},updateUnLockShow:function(){var e=this;this.methodBtnGroup[0].active=this.skinData.needcoin,this.methodBtnGroup[1].active=this.skinData.needgem,this.methodBtnGroup[2].active=this.skinData.needpiece,this.methodBtnGroup[3].active=!1,this.methodBtnGroup[0].children[1].getComponent(cc.Label).string=this.skinData.needcoin,this.methodBtnGroup[1].children[1].getComponent(cc.Label).string=GameApp.dataManager.userData.playedVideoNum+"/"+this.skinData.needgem;var a=GameApp.dataManager.userData.unLockedSkinIdArr.concat();a.sort(function(e,a){return e-a}),a.forEach(function(a){if(a==e.skinData.skinid)return e.methodBtnGroup[0].active=!1,e.methodBtnGroup[1].active=!1,e.methodBtnGroup[2].active=!1,void(e.methodBtnGroup[3].active=!0)}),this.updateChoosedShow()},updateChoosedShow:function(){GameApp.dataManager.getChoosedSkinId()==this.skinData.skinid?(this.methodBtnGroup[3].children[0].active=!1,this.methodBtnGroup[3].children[1].active=!0):(this.methodBtnGroup[3].children[0].active=!0,this.methodBtnGroup[3].children[1].active=!1)},setpieceIcon:function(e){var a=this;cc.loader.loadRes("texture/skin_piece/card_p_"+e,cc.SpriteFrame,function(e,t){a.methodBtnGroup[2].children[0].getComponent(cc.Sprite).spriteFrame=t})},frameBtnClick:function(){var e=this;GameApp.audioManager.playEffect("click"),GameApp.uiManager.showPopup("SkinInfoPopup",function(a){a.getComponent("SkinInfoPopup").init(e.skinData)},!1)},selelctBtnClick:function(){GameApp.audioManager.playEffect("click"),GameApp.dataManager.setChoosedSkinId(this.skinData.skinid),GameApp.eventManager.emit(EventNames.EVENT_UPDATE_SHOP_CHOOSED_SHOW)}}),cc._RF.pop()},{}],SkinUI:[function(e,a,t){"use strict";cc._RF.push(a,"8453a9XdO5IP5zIjb1wltqu","SkinUI");var i=e("Utils");cc.Class({extends:cc.Component,properties:{scrollView:cc.ScrollView,itemPrefab:cc.Prefab,coinUI:cc.Label,onceClick:{default:!0,visible:!1}},onLoad:function(){GameApp.eventManager.on(EventNames.EVENT_UPDATE_COIN_SHOW,this.updateCoinShow.bind(this)),this.initData(),this.updateCoinShow()},onDestroy:function(){GameApp.eventManager.removeListener(EventNames.EVENT_UPDATE_COIN_SHOW)},initData:function(){var e=this;this.scrollView.content.removeAllChildren();var a=0;GameApp.dataManager.jsonData.SkinsData.forEach(function(t){e.scheduleOnce(function(){var a=cc.instantiate(e.itemPrefab);e.scrollView.content.addChild(a),a.getComponent("SkinItem").init(t)},a+=.05)})},updateCoinShow:function(){this.coinUI.string=GameApp.dataManager.userData.coinNum},coinBtnClick:function(){if(window.wx)GameApp.uiManager.showToast("\u6682\u672a\u5f00\u653e\uff01");else if(this.onceClick){this.onceClick=!1,GameApp.audioManager.playEffect("click");var e=this;window.tt?i.addVideo("addVideo",function(){e.onceClick=!0,GameApp.uiManager.showToast("\u83b7\u5f97500\u91d1\u5e01"),GameApp.dataManager.addCoin(500),e.updateCoinShow()},function(a){e.onceClick=!0,a?GameApp.uiManager.showToast(a):GameApp.uiManager.showToast("\u672a\u770b\u5b8c\u89c6\u9891\uff01")}):(e.onceClick=!0,GameApp.uiManager.showToast("\u975e\u771f\u673a,\u83b7\u5f97500\u91d1\u5e01"),GameApp.dataManager.addCoin(500),e.updateCoinShow())}},backBtnClick:function(){GameApp.audioManager.playEffect("click"),GameApp.uiManager.showUI("LoginUI")}}),cc._RF.pop()},{Utils:"Utils"}],SplashUI:[function(e,a,t){"use strict";cc._RF.push(a,"80d85q9LDVJk5VXIllfACwI","SplashUI"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.node.runAction(cc.sequence(cc.delayTime(2),cc.callFunc(function(){GameApp.uiManager.showUI("LoginUI")})))}}),cc._RF.pop()},{}],ToastUI:[function(e,a,t){"use strict";cc._RF.push(a,"a0c7fFQzm9IFYw0LACYPqiI","ToastUI"),cc.Class({extends:cc.Component,properties:{labTxt:cc.RichText,_callback:null,playerName:cc.RichText,killNum:cc.Label,killTipNode:cc.Node},start:function(){this.node.setScale(0,0)},show:function(e,a,t){this._callback=a,this.node.stopAllActions(),t?(this.playerName.string=e,this.killNum.string=t,this.killTipNode.active=!0):this.labTxt.string=e,this.node.runAction(cc.sequence(cc.scaleTo(.3,1).easing(cc.easeBounceOut(2)),cc.delayTime(1),cc.callFunc(function(){this.dis()}.bind(this))))},dis:function(){this.node.runAction(cc.sequence(cc.spawn(cc.fadeOut(1),cc.moveBy(1,cc.v2(0,this.node.height))),cc.callFunc(function(){this.disIme()}.bind(this))))},disIme:function(){this.node.active=!1,this.node.removeFromParent(),this._callback&&this._callback()}}),cc._RF.pop()},{}],Tools:[function(e,a,t){"use strict";cc._RF.push(a,"22582a+jCBHjZflQ11fhZCr","Tools"),window.Tools={addClickEvent:function(e,a,t,i,n){var o=new cc.Component.EventHandler;o.target=a,o.component=t,o.handler=i,n&&(o.customEventData=n),e.getComponent(cc.Button).clickEvents=[],e.getComponent(cc.Button).clickEvents.push(o)},randomNum:function(e,a,t){return t?Math.random()*(a-e+1)+e:Math.floor(Math.random()*(a-e+1)+e)},getRandomElement:function(e){var a=e.length;if(a>0){var t=Math.floor(Math.random()*a);return t==a&&(t=a-1),e[t]}return null},getRandomAmountElementUnRepeat:function(e,a){var t=e.length;if(a>=t){for(var i={nodeArr:e,indexArr:[]},n=0;n<e.length;n++)i.indexArr.push(n);return i}if(a<=0)return null;i={nodeArr:[],indexArr:[]};var o=[],s=null;for(n=0;n<a;n++){do{s=Math.floor(Math.random()*t)}while(o.indexOf(s)>-1);o.push(s),i.nodeArr.push(e[s]),i.indexArr.push(s)}return i},isCrit:function(e){var a=this.getRandomAmountElementUnRepeat([0,1,2,3,4,5,6,7,8,9],e);return null!=a&&-1!=a.nodeArr.indexOf(7)},getIndex:function(e,a){for(var t=e.length,i=0;i<t;i++)if(e[i]==a)return parseInt(i);return-1},removeArray:function(e,a){for(var t=e.length,i=0;i<t;i++)if(e[i]==a)return 0==i?(e.shift(),e):i==t-1?(e.pop(),e):(e.splice(i,1),e)},pointOfRandom:function(e,a,t){for(var i=Tools.randomNum(Math.floor(e.x-(a-t)),Math.floor(e.x+(a-t))),n=Tools.randomNum(Math.floor(e.y-(a-t)),Math.floor(e.y+(a-t)));!this.isInRegion(i-e.x,n-e.y,a-t);)i=Tools.randomNum(Math.floor(e.x-(a-t)),Math.floor(e.x+(a-t))),n=Tools.randomNum(Math.floor(e.y-(a-t)),Math.floor(e.y+(a-t)));return cc.v2(i,n)},isInRegion:function(e,a,t){return e*e+a*a<=t*t},isIntersect:function(e,a,t,i){return parseFloat(Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y)))+i>=a},scaleUpAndDowm:function(e,a,t){e.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.3,1.1).easing(cc.easeIn(2)),cc.scaleTo(.6,.9).easing(cc.easeIn(2)),cc.scaleTo(.6,1.1).easing(cc.easeIn(2)),cc.scaleTo(.6,.9).easing(cc.easeIn(2))))),a&&t.runAction(cc.repeatForever(cc.sequence(cc.fadeIn(.3).easing(cc.easeIn(2)),cc.fadeOut(.6).easing(cc.easeIn(2)),cc.fadeIn(.6).easing(cc.easeIn(2)),cc.fadeOut(.6).easing(cc.easeIn(2)))))},shake:function(e){e.runAction(cc.repeatForever(cc.sequence(cc.rotateTo(.1,5).easing(cc.easeIn(2)),cc.rotateTo(.2,-5).easing(cc.easeIn(2)),cc.rotateTo(.2,5).easing(cc.easeIn(2)),cc.rotateTo(.1,0).easing(cc.easeIn(2)),cc.delayTime(.5))))},jumpOneByOne:function(e){for(var a=e.childrenCount,t=0;t<a;t++)e.children[t].runAction(cc.sequence(cc.delayTime(.2*t),cc.scaleTo(.2,1.3).easing(cc.easeBackOut()),cc.scaleTo(.2,1),cc.delayTime(.2*(a-1-t)+1)).repeatForever())},toDateFormat:function(){var e=new Date;return{year:(e=new Date(e.getTime())).getFullYear(),month:e.getMonth()+1,day:e.getDate()}},toTimeString2:function(e){if(e<=0)return"00:00:00";e=Math.floor(e);var a=Math.floor(e/3600);e-=3600*a;var t=Math.floor(e/60);e-=60*t;return a>0?a<10?"0"+a:a:"00",":",t>0?t<10?"0"+t:t:"00",":",e>0?e<10?"0"+e:e:"00",{hour:a,minute:t,s:e}},toTimeString:function(e){if(e<=0)return"00:00";e=Math.floor(e),e-=3600*Math.floor(e/3600);var a=Math.floor(e/60);e-=60*a;var t="";return t+=a>0?a<10?"0"+a:a:"00",t+=":",t+=e>0?e<10?"0"+e:e:"00"},addNegativeCaculation:function(e,a,t,i){return e?"-"+this.calculation(a,t,i):this.calculation(a,t,i)},calculation:function(e,a,t){var i=Math.floor(e/a),n=Math.floor(e%a/a*10);return 0===n?i+t:i+"."+n+t}},cc._RF.pop()},{}],UIManager:[function(e,a,t){"use strict";function i(e,a){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=n(e))||a&&e&&"number"==typeof e.length){t&&(e=t);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}function n(e,a){if(e){if("string"==typeof e)return o(e,a);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?o(e,a):void 0}}function o(e,a){(null==a||a>e.length)&&(a=e.length);for(var t=0,i=new Array(a);t<a;t++)i[t]=e[t];return i}cc._RF.push(a,"8a5d0r/JcRKyJq63bPbc7t9","UIManager");var s=e("PrefabPath"),r=e("JsonPath");window.conMag=window.conMag||e("ConfigManager"),cc.Class({extends:cc.Component,properties:{gameRoot:cc.Node,uiRoot:cc.Node,popupRoot:cc.Node,toastRoot:cc.Node,toastPrefab:cc.Prefab,loadingMask:cc.Node,loadingProgress:cc.ProgressBar,splashUI:cc.Node,_Prefabs:{default:{}},_Jsons:{default:{}},mapCamera:cc.Camera,mipmapCamera:cc.Camera,normalSkinData:sp.SkeletonData,advanceSkinDataGroup:[sp.SkeletonData],boxSkinDataGroup:[sp.SkeletonData],commonAtlas:cc.SpriteAtlas,gunSkinDataGroup:[sp.SkeletonData]},onLoad:function(){if(null!==GameApp.uiManager)return this.node.destroy();GameApp.uiManager=this,cc.game.addPersistRootNode(this.node),cc.director.getCollisionManager().enabled=!0,cc.director.getCollisionManager().enabledDrawBoundingBox=!0,cc.director.getCollisionManager().enabledDebugDraw=!0;var e=cc.director.getPhysicsManager();e.enabled=!0,e.debugDrawFlags=cc.PhysicsManager.DrawBits.e_aabbBit|cc.PhysicsManager.DrawBits.e_pairBit|cc.PhysicsManager.DrawBits.e_centerOfMassBit|cc.PhysicsManager.DrawBits.e_jointBit|cc.PhysicsManager.DrawBits.e_shapeBit;var a=cc.view.getFrameSize(),t=cc.game.canvas;t.width=a.width*window.devicePixelRatio,t.height=a.height*window.devicePixelRatio,this.setLoadingMaskVisible(!1),this.loadingProgress.progress=0,this.startLoading()},startLoading:function(){console.log("\u5f00\u59cb\u52a0\u8f7d"),this.loadingProgress.node.active=!0,this.loadAll(function(e,a){var t=e/a;t&&!isNaN(t)&&(this.loadingProgress.progress=t)}.bind(this),function(){this.loadingProgress.node.active=!1,this.splashUI.active=!1;var e=cc.sys.localStorage.getItem("EatChicken_UserData");null==e||void 0==e||""==e||(GameApp.dataManager.userData=JSON.parse(e)),this.showUI("LoginUI")}.bind(this))},loadAll:function(e,a){var t=[],i=0;for(var n in s)t.push(s[n]),i++;var o=i,c=0;for(var p in r)t.push(r[p]),c++;var l=c;cc.loader.loadResArray(t,function(a,t){e(a,t)},function(e,t){for(var i=Object.keys(s),n=0;n<o;n++)this._Prefabs[i[n]]=t[n];for(var c=Object.keys(r),p=0;p<l;p++)this._Jsons[c[p]]=t[o+p].json[c[p]],GameApp.dataManager.jsonData[c[p]]=this._Jsons[c[p]];a()}.bind(this))},load:function(e,a){cc.loader.loadRes(s[e],function(t,i){t?cc.error(t.message||t):(this._Prefabs[e]=i,a&&a(e))}.bind(this))},showGameObject:function(e,a,t){if(this._Prefabs[e]){var i=cc.instantiate(this._Prefabs[e]);t&&t.addChild(i),a&&a(i)}else this.load(e,function(){this.showGameObject(e,a)}.bind(this))},showGame:function(e,a){if(this._curGameName==e&&console.log("---showGame.repeat----"),this._Prefabs[e]){var t=cc.instantiate(this._Prefabs[e]);this.gameRoot.addChild(t),this._curGameName=e,a&&a(t)}else this.load(e,function(){this.showGame(e,a)}.bind(this))},showUI:function(e,a){if(console.log("showUI"),this._curName!=e)if(this._Prefabs[e]){this.clearGames(),this.uiRoot.children.forEach(function(e){e.runAction(cc.sequence(cc.fadeOut(.1),cc.callFunc(function(){e.destroy()})))}),this.clearPopups();var t=cc.instantiate(this._Prefabs[e]);t.opacity=0,this.uiRoot.addChild(t),t.runAction(cc.fadeIn(.3)),this._curName=e,a&&a(t)}else this.load(e,function(){this.showUI(e,a)}.bind(this));else console.log("---showUI.repeat----")},getUI:function(e){return this.uiRoot.getChildByName(e)},popUI:function(){var e=this.uiRoot.children;e.length>0&&e[e.length-1].destroy()},isInMapSight:function(e){var a=this.mapCamera.node.width/.9,t=this.mapCamera.node.height/.9,i=this.mapCamera.getWorldToScreenPoint(e.convertToWorldSpaceAR(cc.v2(0,0)));return!(i.x<0||i.x>a||i.y<0||i.y>t)},showPopup:function(e,a,t){if(void 0===t&&(t=!0),this._curPopupName==e&&console.log("---showPopup.repeat----"),this._Prefabs[e]){t&&this.clearPopups();var i=cc.instantiate(this._Prefabs[e]);i.children[0].scaleX=0,i.children[0].scaleY=0,this.popupRoot.addChild(i),i.children[0].runAction(cc.scaleTo(.5,1).easing(cc.easeBounceOut(2))),this._curPopupName=e,a&&a(i)}else this.load(e,function(){this.showPopup(e,a)}.bind(this))},getPopup:function(e){return this.popupRoot.getChildByName(e)},popPopup:function(){var e=this.popupRoot.children;e.length>0&&e[e.length-1].destroy()},closePopup:function(e){for(var a,t=this,n=function(){var i=a.value;if(i.name===e)return i.runAction(cc.sequence(cc.fadeOut(.1),cc.callFunc(function(){t._curPopupName="",i.active=!1,i.destroy()}))),"break"},o=i(this.popupRoot.children);!(a=o()).done;){if("break"===n())break}},clearPopups:function(){console.log("clearPopups");for(var e,a=function(){var a=e.value;a.runAction(cc.sequence(cc.fadeOut(.1),cc.callFunc(function(){a.destroy()})))},t=i(this.popupRoot.children);!(e=t()).done;)a();this._curPopupName=""},getGame:function(e){return this.gameRoot.getChildByName(e)},clearGames:function(){this.gameRoot.destroyAllChildren(),this._curGameName=""},showToast:function(e,a,t){if(this.toastPrefab){var i=cc.instantiate(this.toastPrefab);if(this.toastRoot.childrenCount>0)for(var n=this.toastRoot.childrenCount-1;n>=0;n--){var o=cc.moveBy(.1,cc.v2(0,i.height));this.toastRoot.children[n].runAction(o)}this.toastRoot.addChild(i),i.getComponent("ToastUI").show(e,a,t)}},setLoadingMaskVisible:function(e){this.loadingMask.active=!!e},update:function(e){switch(GameApp.dataManager.globalData.onLineTime+=e,GameApp.dataManager.globalData.recordState){case RecordState.READY:GameApp.dataManager.globalData.recordTimer=0;break;case RecordState.RECORD:GameApp.dataManager.globalData.recordTimer+=e;break;case RecordState.PAUSE:}}}),cc._RF.pop()},{ConfigManager:"ConfigManager",JsonPath:"JsonPath",PrefabPath:"PrefabPath"}],Utils:[function(e,a,t){"use strict";cc._RF.push(a,"4e007BguLFPRI4XSmgSly76","Utils");var i={},n={addBanner:"503khkj54l5m1j6i0i"};i.m_banner=null,i.moregameBtn=null,i.vedioAd=null,i.recorder=null,i.recordNatureStop=!1;var o={addVideo:"i2nd08ki9p723pt2k4"},s="https://ecwx-1257044218.cos.ap-chengdu.myqcloud.com/bingoballshare.jpg",r=[{idx:1,txt:"\u4ed6\u62ff\u8d77\u55b7\u5b50\u4e00\u68ad\u5b50\u5c31\u7ed9\u6211\u5e26\u8d70\u4e86\u3002\u3002\u3002"},{idx:2,txt:"\u8001\u677f\u6709\u6ca1\u6709\u52a0\u7279\u6797\uff0c\u54d2\u54d2\u54d2\u5192\u84dd\u706b\u90a3\u79cd"},{idx:3,txt:"\u9e21\u5403\u6491\u4e86\uff0c\u6b47\u4f1a\u513f"},{idx:4,txt:"\u8fd9\u91cc\u7684\u59b9\u5b50\u771fQ\u5f39\uff0c\u5c31\u662f\u5979\u4e86\uff01"}];i._getShareObject=function(e,a,t){var i="\u53f2\u4e0a\u6700\u96be\u7684\u6e38\u620f\uff0c\u73a9\u8fc7\u7684\u4eba\u90fd\u8bf4\u6625\u8fd0\u62a2\u7968\u4e0d\u7b97\u96be\uff01",n=null,o=null,c=Tools.getRandomElement(r);return c&&(o=c.txt,n="from="+e+"&txt_id="+i.idx),{title:i,desc:o,query:n,imageUrl:s,success:function(){console.log("\u5206\u4eab\u6210\u529f"),a&&a()},fail:function(e){console.log("\u5206\u4eab\u5931\u8d25"),console.log(e),t&&t()}}},i.shareFromHomePage=function(e,a){window.wx?wx.shareAppMessage(i._getShareObject("home_page",e,a)):e&&e()},i.shareRecord=function(e,a,t){if(window.tt){var i="\u53f2\u4e0a\u6700\u96be\u7684\u6e38\u620f\uff0c\u73a9\u8fc7\u7684\u4eba\u90fd\u8bf4\u6625\u8fd0\u62a2\u7968\u4e0d\u7b97\u96be\uff01",n=null,o=null,c=Tools.getRandomElement(r);c&&(o=c.txt,n="from=share&txt_id="+i.idx),tt.shareAppMessage({channel:"video",title:i,desc:o,imageUrl:s,templateId:"",query:n,extra:{videoPath:e,videoTopics:["\u5168\u6c11\u523a\u6fc0\u5403\u9e21","\u5c0f\u6e38\u620f"],createChallenge:!0},success:function(){console.log("\u5206\u4eab\u89c6\u9891\u6210\u529f"),a&&a()},fail:function(e){console.log("\u5206\u4eab\u89c6\u9891\u5931\u8d25"),console.log(e),t&&t()}})}},i.addBanner=function(e,a,t,o){if(null!=window.tt){var s=tt.getSystemInfoSync(),r=s.screenWidth,c=s.screenHeight;i.m_banner?(i.m_banner.destroy(),console.log("m_banner is has create")):console.log("m_banner is has not create");var p=tt.createBannerAd({adUnitId:n[e],style:a});i.m_banner=p,p.onLoad(function(){console.log("bannerAd \u52a0\u8f7d\u6210\u529f"),i.m_banner.show().then(function(){console.log("\u5e7f\u544a\u663e\u793a\u6210\u529f")})}),p.onResize(function(e){0!=e.width&&0!=e.height&&200!=e.width&&(p.style.top=c-e.height,p.style.left=(r-e.width)/2)})}},i.removeBanner=function(){null!=window.tt&&i.m_banner&&(i.m_banner.hide(),console.log("removeBanner"))},i.addMoreGameBtn=function(e){if(window.tt){var a=tt.getSystemInfoSync();a.screenWidth,a.screenHeight;i.moregameBtn=tt.createMoreGamesButton({type:"image",image:e,style:{left:20,top:50,width:50,height:50,lineHeight:50,backgroundColor:"",textColor:"",textAlign:"center",fontSize:16,borderRadius:0,borderWidth:0,borderColor:""},appLaunchOptions:[{appId:"ttXXXXXX",query:"foo=bar&baz=qux",extraData:{}}],onNavigateToMiniGame:function(e){console.log("\u8df3\u8f6c\u5176\u4ed6\u5c0f\u6e38\u620f",e)}}),console.log(i.moregameBtn)}},i.closeMoreGameBtn=function(){i.moregameBtn.destroy()},i.addVideo=function(e,a,t){if(null!=window.tt){i.vedioAd=tt.createRewardedVideoAd({adUnitId:o[e]});try{i.vedioAd.errorFunc&&(console.log("\u5173\u95ed\u4e86error"),i.vedioAd.offError(i.vedioAd.errorFunc)),i.vedioAd.closeFunc&&(console.log("\u5173\u95ed\u4e86close"),i.vedioAd.offClose(i.vedioAd.closeFunc))}catch(e){console.warn("--------------videoAd offClose or offError error:"),console.error(e)}i.vedioAd.errorFunc=function(e){console.log(e),1004==e.errCode?a&&a("\u65e0\u53ef\u89c2\u770b\u89c6\u9891"):a&&a("\u89c6\u9891\u670d\u52a1\u5668\u9519\u8bef")},i.vedioAd.onError(i.vedioAd.errorFunc),i.vedioAd.closeFunc=function(e){console.log("\u6267\u884c\u4e86closeFunc"),e&&e.isEnded||void 0===e?(console.log("\u64ad\u653e\u5b8c\u4e86"),a&&a()):(console.log("\u4e2d\u9014\u9000\u51fa"),t&&t())},i.vedioAd.onClose(i.vedioAd.closeFunc),i.vedioAd.show().catch(function(){i.vedioAd.load().then(function(){return i.vedioAd.show()}).catch(function(e){console.log("\u6fc0\u52b1\u89c6\u9891or\u5e7f\u544a\u663e\u793a\u5931\u8d25")})})}},i.startRecord=function(e,a){null!=window.tt&&(i.recorder=tt.getGameRecorderManager(),i.recorder.onStart(function(a){console.log("\u5f55\u5c4f\u5f00\u59cb"),i.recordNatureStop=!1,e&&e()}),i.recorder.onStop(function(e){console.log("\u5f55\u5c4f\u81ea\u7136\u505c\u6b62"),i.recordNatureStop=!0,a&&a(e)}),i.recorder.onError(function(e){console.log("\u5f55\u5c4f\u9519\u8bef")}),i.recorder.start({duration:1200}))},i.pauseRecord=function(e){i.recorder.onPause(function(a){console.log("\u5f55\u5c4f\u6682\u505c"),e&&e()}),i.recorder.pause()},i.resumeRecord=function(e){i.recorder.onResume(function(a){console.log("\u5f55\u5c4f\u6062\u590d"),e&&e()}),i.recorder.resume()},i.stopRecord=function(e){i.recordNatureStop?e&&e():(i.recorder.onStop(function(a){console.log("\u5f55\u5c4f\u505c\u6b62"),e&&e(a)}),i.recorder.stop())},a.exports=i,cc._RF.pop()},{}],use_reversed_rotateBy:[function(e,a,t){"use strict";cc._RF.push(a,"81416DFolBB9Y75qNfx+PQ6","use_reversed_rotateBy"),cc.RotateBy._reverse=!0,cc._RF.pop()},{}],"use_v2.1-2.2.1_cc.Toggle_event":[function(e,a,t){"use strict";cc._RF.push(a,"c6a4b0h4hNHo7t8OG5gSmcy","use_v2.1-2.2.1_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_isChecked=!0),cc._RF.pop()},{}]},{},["use_reversed_rotateBy","use_v2.1-2.2.1_cc.Toggle_event","GameApp","LaunchScript","Protocol","Tools","Utils","Consts","JsonPath","PrefabPath","RouletteData","Bullet","DropBox","Enemy","GroundItem","Joystick","JoystickCommon","ParatrooperEnemy","ParatrooperPlayer","Player","AudioManager","ConfigManager","DataManager","EventManager","UIManager","ActivityPopup","BoxUI","DailyPopup","GameMap","GameUI","GiftPopup","GunUI","LoginUI","OpenBoxPopup","OverPopup","PlaneUI","PrepareMap","PrepareUI","RankUI","SkinInfoPopup","SkinItem","SkinUI","SplashUI","ToastUI"]);